(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7893],{86350:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/realtime/inspector",function(){return t(72956)}])},39274:function(e,s,t){"use strict";t.d(s,{Z:function(){return x}});var n=t(52322),a=t(5632),l=t(34056),r=t(26211),i=t(3373),c=t(75939),o=t(45022);let d=(e,s)=>{var t;let{authzEnabled:n}=s,a=null!==(t=null==e?void 0:e.ref)&&void 0!==t?t:"default";return[{title:"Tools",items:[{name:"Inspector",key:"inspector",url:"/project/".concat(a,"/realtime/inspector"),items:[]}]},...n?[{title:"Configuration",items:[{name:"Policies",key:"policies",url:"/project/".concat(a,"/realtime/policies"),items:[]}]}]:[]]};var x=(0,i.Q)(e=>{let{title:s,children:t}=e,i=(0,r.V)(),x=(0,a.useRouter)().pathname.split("/")[4],u=(0,c.P)("authzRealtime");return(0,n.jsx)(o.Z,{title:s,product:"Realtime",productMenu:(0,n.jsx)(l.Q,{page:x,menu:d(i,{authzEnabled:u})}),children:t})})},82663:function(e,s,t){"use strict";var n=t(52322),a=t(79534),l=t(98537),r=t.n(l),i=t(34291),c=t.n(i),o=t(2784),d=t(80435),x=t(82955),u=t(54383),m=t(25733),h=t(98280);s.Z=e=>{let{id:s,language:t,defaultValue:l,autofocus:i=!0,isReadOnly:p=!1,hideLineNumbers:f=!1,onInputChange:g=c(),onInputRun:j=c(),className:b,loading:v,options:N,value:y,placeholder:w,disableTabToUsePlaceholder:k=!1}=e,C=(0,o.useRef)(),_=(0,o.useRef)(),S=(0,o.useRef)(),z=void 0!==w&&0===(null!=y?y:"").trim().length,[E,Z]=(0,o.useState)(z),R=async(e,s)=>{_.current=e,S.current=s,(0,h.$)(e),C.current=e.createContextKey("hasValue",!1),C.current.set(void 0!==y&&y.trim().length>0),Z(z),k||e.addCommand(s.KeyCode.Tab,()=>{e.executeEdits("source",[{identifier:"add-placeholder",range:new s.Range(1,1,1,1),text:(null!=w?w:"").split("\n\n").join("\n").replaceAll("*","").replaceAll("&nbsp;","")}])},"!hasValue"),e.addAction({id:"supabase",label:"Run Query",keybindings:[s.KeyMod.CtrlCmd+s.KeyCode.Enter],contextMenuGroupId:"operation",contextMenuOrder:0,run:async()=>{var e,s;j((null==_?void 0:_.current).getModel().getValueInRange(null==_?void 0:null===(e=_.current)||void 0===e?void 0:e.getSelection())||(null==_?void 0:null===(s=_.current)||void 0===s?void 0:s.getValue()))}});let t=e.getModel();if(t){let s=t.getPositionAt((null!=y?y:"").length);e.setPosition(s)}await (0,x.Vs)(500),i&&(null==e||e.focus())},M=r()({tabSize:2,fontSize:13,readOnly:p,minimap:{enabled:!1},wordWrap:"on",fixedOverflowWidgets:!0,contextmenu:!0,lineNumbers:f?"off":void 0,glyphMargin:!f&&void 0,lineNumbersMinChars:f?0:4,folding:!f&&void 0,scrollBeyondLastLine:!1},N);return(0,o.useEffect)(()=>{Z(z)},[z]),(0,o.useEffect)(()=>{if(!k&&void 0!==_.current&&void 0!==S.current){let e=_.current,s=S.current;e.addCommand(s.KeyCode.Tab,()=>{e.executeEdits("source",[{identifier:"add-placeholder",range:new s.Range(1,1,1,1),text:(null!=w?w:"  ").split("\n\n").join("\n").replaceAll("*","").replaceAll("&nbsp;","")}])},"!hasValue")}},[w,k]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.default,{path:s,theme:"supabase",className:(0,u.cn)(b,"monaco-editor"),value:null!=y?y:void 0,language:t,defaultValue:null!=l?l:void 0,loading:v||(0,n.jsx)(m.Z,{}),options:M,onMount:R,onChange:e=>{C.current.set((null!=e?e:"").length>0),Z(!e),g(e)}}),void 0!==w&&(0,n.jsx)("div",{className:(0,u.cn)("monaco-placeholder absolute top-[3px] left-[57px] text-sm pointer-events-none font-mono","[&>div>p]:text-foreground-lighter [&>div>p]:!m-0 tracking-tighter",E?"block":"hidden"),children:(0,n.jsx)(d.U,{content:w})})]})}},15998:function(e,s,t){"use strict";var n=t(52322),a=t(82955),l=t(76141),r=t(7774),i=t(2784),c=t(32079);s.Z=e=>{let{text:s,iconOnly:t=!1,children:o,onClick:d,copyLabel:x="Copy",copiedLabel:u="Copied",...m}=e,[h,p]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(!h)return;let e=setTimeout(()=>p(!1),2e3);return()=>clearTimeout(e)},[h]),(0,n.jsx)(c.z,{onClick:e=>{p(!0),(0,a.vQ)(s),null==d||d(e)},icon:h?(0,n.jsx)(l.Z,{size:14,strokeWidth:2,className:"text-brand"}):(0,n.jsx)(r.Z,{size:14}),...m,children:!t&&(0,n.jsx)(n.Fragment,{children:null!=o?o:h?u:x})})}},14782:function(e,s,t){"use strict";var n=t(52322),a=t(39459);s.Z=e=>{let{resourceText:s,isFullPage:t=!1}=e,l=()=>(0,n.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(a.Z,{size:"large"})}),(0,n.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",s]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return t?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("div",{className:"w-[550px]",children:(0,n.jsx)(l,{})})}):(0,n.jsx)(l,{})}},34056:function(e,s,t){"use strict";t.d(s,{Q:function(){return d}});var n=t(52322),a=t(3085),l=t(81076),r=t(39097),i=t.n(r),c=t(32079),o=e=>{let{name:s="",isActive:t,isExternal:r,icon:o,rightIcon:d,url:x="",target:u="_self",onClick:m,textClassName:h="",hoverText:p="",label:f}=e,g=(0,n.jsx)(a.ZP.Item,{icon:o,rounded:!0,active:t,onClick:m,children:(0,n.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,n.jsxs)("div",{title:p||("string"==typeof s?s:""),className:"flex items-center gap-2 truncate w-full "+h,children:[(0,n.jsxs)("span",{className:"truncate",children:[s," "]}),void 0!==f&&(0,n.jsx)(l.C,{variant:"warning",children:f})]}),d&&(0,n.jsx)("div",{children:d})]})});return x?r?(0,n.jsx)(c.z,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:o,children:(0,n.jsx)(i(),{href:x,target:"_blank",rel:"noreferrer",children:s})}):(0,n.jsx)(i(),{href:x,className:"block",target:u,children:g}):g},d=e=>{let{page:s,menu:t}=e;return(0,n.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto",children:(0,n.jsx)(a.ZP,{type:"pills",children:t.map((e,r)=>(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"my-6 space-y-8",children:(0,n.jsxs)("div",{className:"mx-3",children:[(0,n.jsx)(a.ZP.Group,{title:e.title?(0,n.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,n.jsx)("span",{children:e.title}),e.isPreview&&(0,n.jsx)(l.C,{variant:"warning",children:"Not production ready"})]}):null}),(0,n.jsx)("div",{children:e.items.map(e=>(0,n.jsx)(o,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:s===e.key,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key))})]})}),r!==t.length-1&&(0,n.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},92286:function(e,s,t){"use strict";var n=t(52322),a=t(90038),l=t(76141),r=t(89404),i=t(2784),c=t(59491),o=t(27570),d=t(49650),x=t(87175),u=t(32079),m=t(95492),h=t(61786),p=t(90504),f=t(19869);s.Z=e=>{let{className:s,disabled:t=!1,size:g="tiny",showError:j=!0,selectedSchemaName:b,supportSelectAll:v=!1,excludedSchemas:N=[],onSelectSchema:y,onSelectCreateSchema:w}=e,[k,C]=(0,i.useState)(!1),_=(0,x.Xo)(c.KA.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:S}=(0,o.d2)(),{data:z,isLoading:E,isSuccess:Z,isError:R,error:M,refetch:T}=(0,d.Q)({projectRef:null==S?void 0:S.ref,connectionString:null==S?void 0:S.connectionString}),P=(z||[]).filter(e=>!N.includes(e.name)).sort((e,s)=>e.name.localeCompare(s.name));return(0,n.jsxs)("div",{className:s,children:[E&&(0,n.jsx)(u.z,{type:"default",className:"justify-start",block:!0,size:g,loading:!0,children:"Loading schemas..."}),j&&R&&(0,n.jsxs)(m.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,n.jsx)(m.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,n.jsxs)(m.X,{className:"text-xs mb-2 break-words",children:["Error: ",null==M?void 0:M.message]}),(0,n.jsx)(u.z,{type:"default",size:"tiny",onClick:()=>T(),children:"Reload schemas"})]}),Z&&(0,n.jsxs)(h.J2,{open:k,onOpenChange:C,modal:!1,children:[(0,n.jsx)(h.xo,{asChild:!0,children:(0,n.jsx)(u.z,{size:g,disabled:t,type:"default",className:"w-full [&>span]:w-full",iconRight:(0,n.jsx)(a.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:(0,n.jsxs)("div",{className:"w-full flex gap-1",children:[(0,n.jsx)("p",{className:"text-foreground-lighter",children:"schema:"}),(0,n.jsx)("p",{className:"text-foreground",children:"*"===b?"All schemas":b})]})})}),(0,n.jsx)(h.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,n.jsxs)(p.mY,{children:[(0,n.jsx)(p.sZ,{placeholder:"Find schema..."}),(0,n.jsxs)(p.e8,{children:[(0,n.jsx)(p.rb,{children:"No schemas found"}),(0,n.jsx)(p.fu,{children:(0,n.jsxs)(f.x,{className:(P||[]).length>7?"h-[210px]":"",children:[v&&(0,n.jsxs)(p.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{y("*"),C(!1)},onClick:()=>{y("*"),C(!1)},children:[(0,n.jsx)("span",{children:"All schemas"}),"*"===b&&(0,n.jsx)(l.Z,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==P?void 0:P.map(e=>(0,n.jsxs)(p.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{y(e.name),C(!1)},onClick:()=>{y(e.name),C(!1)},children:[(0,n.jsx)("span",{children:e.name}),b===e.name&&(0,n.jsx)(l.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==w&&_&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.zz,{}),(0,n.jsx)(p.fu,{children:(0,n.jsxs)(p.di,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{w(),C(!1)},onClick:()=>{w(),C(!1)},children:[(0,n.jsx)(r.Z,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},3937:function(e,s,t){"use strict";t.d(s,{s:function(){return c}});var n=t(36492),a=t(88354),l=t(99248),r=t(45101);async function i(e,s){let{projectRef:t}=e;if(!t)throw Error("projectRef is required");let n=await (0,a.U2)("".concat(l.T5,"/projects/").concat(t,"/config/postgrest"),{signal:s});if(n.error)throw n.error;return n}let c=function(e){let{projectRef:s}=e,{enabled:t=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(r.U.postgrest(s),e=>{let{signal:t}=e;return i({projectRef:s},t)},{enabled:t&&void 0!==s,...a})}},49650:function(e,s,t){"use strict";t.d(s,{Q:function(){return i},X:function(){return c}});var n=t(98402),a=t(18592),l=t(18545);let r=n.Z.schemas.list(),i=function(e){let{projectRef:s,connectionString:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.cp)({projectRef:s,connectionString:t,sql:r.sql,queryKey:["schemas","list"]},{select:e=>e.result,...n})};function c(e,s){return e.invalidateQueries(l.M.query(s,["schemas","list"]))}},94957:function(e,s,t){"use strict";t.d(s,{H:function(){return i}});var n=t(59403),a=t(18592),l=t(16623);async function r(e,s){let{projectRef:t,connectionString:n,schema:l="public",search:r,limit:i=100,page:c=0,sort:o="alphabetical",filterTypes:d}=e,x='\n    with records as (\n      select\n        c.oid::int8 as "id",\n        nc.nspname as "schema",\n        c.relname as "name",\n        c.relkind as "type",\n        case c.relkind\n          when \'r\' then 1\n          when \'v\' then 2\n          when \'m\' then 3\n          when \'f\' then 4\n          when \'p\' then 5\n        end as "type_sort",\n        obj_description(c.oid) as "comment",\n        count(*) over() as "count",\n        c.relrowsecurity as "rls_enabled"\n      from\n        pg_namespace nc\n        join pg_class c on nc.oid = c.relnamespace\n      where\n        c.relkind in ('.concat(void 0===d?"'r', 'v', 'm', 'f', 'p'":d.map(e=>"'".concat(e,"'")).join(", "),")\n        and not pg_is_other_temp_schema(nc.oid)\n        and (\n          pg_has_role(c.relowner, 'USAGE')\n          or has_table_privilege(\n            c.oid,\n            'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER'\n          )\n          or has_any_column_privilege(c.oid, 'SELECT, INSERT, UPDATE, REFERENCES')\n        )\n        and nc.nspname = '").concat(l,"'\n        ").concat(r?"and c.relname ilike '%".concat(r,"%'"):"","\n      order by ").concat("alphabetical"===o?"c.relname asc":'"type_sort" asc, c.relname asc',"\n      limit ").concat(i,"\n      offset ").concat(c*i,"\n    )\n    select\n      jsonb_build_object(\n        'entities', coalesce(jsonb_agg(\n          jsonb_build_object(\n            'id', r.id,\n            'schema', r.schema,\n            'name', r.name,\n            'type', r.type,\n            'comment', r.comment,\n            'rls_enabled', r.rls_enabled\n          )\n          order by ").concat("alphabetical"===o?"r.name asc":"r.type_sort asc, r.name asc","\n        ), '[]'::jsonb),\n        'count', coalesce(min(r.count), 0)\n      ) \"data\"\n    from records r;\n  "),{result:u}=await (0,a.Rj)({projectRef:t,connectionString:n,sql:x,queryKey:["public","entity-types"]},s);return u[0]}let i=function(e){let{projectRef:s,connectionString:t,schema:a="public",search:i,limit:c=100,sort:o,filterTypes:d}=e,{enabled:x=!0,...u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.N)(l.C.list(s,{schema:a,search:i,sort:o,limit:c,filterTypes:d}),e=>{let{signal:n,pageParam:l}=e;return r({projectRef:s,connectionString:t,schema:a,search:i,limit:c,page:l,sort:o,filterTypes:d},n)},{enabled:x&&void 0!==s,staleTime:0,getNextPageParam(e,s){let t=s.length;if(!(t*c>=e.data.count))return t},...u})}},16623:function(e,s,t){"use strict";t.d(s,{C:function(){return n}});let n={list:(e,s)=>["projects",e,"entity-types",...s?[s]:[]]}},72956:function(e,s,t){"use strict";t.r(s),t.d(s,{InspectorPage:function(){return e3},default:function(){return e4}});var n=t(52322),a=t(59491),l=t(99959),r=t(5632),i=t(2784),c=t(28020),o=t(24990),d=t(41344),x=t(61425),u=t(32079),m=t(88883),h=t(63955),p=t(30195),f=t(75939),g=t(17172),j=t(61786),b=t(43687),v=t(22574),N=t(42070),y=t(93705);let w=p.Ry({channel:p.Z_(),isPrivate:p.O7()}),k=e=>{let{config:s,onChangeConfig:t}=e,[a,o]=(0,i.useState)(!1),d=(0,l.Mk)(),x=(0,r.useRouter)(),p=(0,f.P)("authzRealtime"),k=(0,h.cI)({mode:"onBlur",reValidateMode:"onBlur",resolver:(0,m.F)(w),defaultValues:{channel:"",isPrivate:!1}}),C=()=>{o(!1),c.Z.sendEvent({category:"realtime_inspector",action:"started_listening_to_channel_in_input_channel_popover",label:"realtime_inspector_config"},d,x),t({...s,channelName:k.getValues("channel"),isChannelPrivate:k.getValues("isPrivate"),enabled:!0})};return(0,n.jsxs)(j.J2,{open:a,onOpenChange:e=>{!0===e&&k.setValue("channel",s.channelName),o(e)},children:[(0,n.jsx)(j.xo,{asChild:!0,children:(0,n.jsx)(u.z,{className:"rounded-r-none",type:"default",size:"tiny",iconRight:(0,n.jsx)(b.Z,{}),children:(0,n.jsx)("p",{className:"max-w-[120px] truncate",title:s.channelName.length>0?s.channelName:"",children:s.channelName.length>0?"Channel: ".concat(s.channelName):"Join a channel"})})}),(0,n.jsx)(j.yk,{className:"p-0 w-[320px]",align:"start",children:(0,n.jsx)("div",{className:"p-4 flex flex-col text-sm",children:0===s.channelName.length?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(v.l0,{...k,children:(0,n.jsxs)("form",{id:"realtime-channel",onSubmit:k.handleSubmit(()=>C()),className:"flex flex-col gap-y-4",children:[(0,n.jsx)(v.Wi,{name:"channel",control:k.control,render:e=>{let{field:s}=e;return(0,n.jsxs)(v.xJ,{className:"flex flex-col gap-y-2",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,n.jsx)("label",{className:"text-foreground text-xs",children:"Name of channel"}),(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsx)(v.NI,{children:(0,n.jsx)(N.I,{...s,autoComplete:"off",className:"rounded-r-none text-xs px-2.5 py-1 h-auto",placeholder:"Enter a channel name"})}),(0,n.jsx)(u.z,{type:"primary",className:"rounded-l-none",disabled:0===k.getValues().channel.length,onClick:()=>C(),children:"Listen to channel"})]})]}),(0,n.jsxs)(v.pf,{className:"text-xs text-foreground-lighter",children:["The channel you initialize with the Supabase Realtime client. Learn more in"," ",(0,n.jsx)("a",{target:"_blank",rel:"noreferrer",className:"underline hover:text-foreground transition",href:"https://supabase.com/docs/guides/realtime/concepts#channels",children:"our docs"})]})]})}}),p?(0,n.jsx)(v.Wi,{control:k.control,name:"isPrivate",render:e=>{let{field:s}=e;return(0,n.jsxs)(v.xJ,{className:"",children:[(0,n.jsxs)("div",{className:"flex flex-row items-center gap-x-2",children:[(0,n.jsx)(v.NI,{children:(0,n.jsx)(y.r,{checked:s.value,onCheckedChange:s.onChange,disabled:s.disabled})}),(0,n.jsx)(v.lX,{className:"text-xs",children:"Is channel private?"})]}),(0,n.jsx)(v.pf,{className:"text-xs text-foreground-lighter mt-2",children:"If the channel is marked as private, it will use RLS policies to filter messages."})]})}},"isPrivate"):null,(0,n.jsx)(u.z,{asChild:!0,type:"default",className:"w-min",icon:(0,n.jsx)(g.Z,{}),children:(0,n.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/realtime/authorization",children:"Documentation"})})]})})}):(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsxs)("p",{className:"text-foreground text-xs",children:["Currently joined"," ",(0,n.jsx)("span",{className:s.isChannelPrivate?"text-brand":"text-warning",children:s.isChannelPrivate?"private":"public"})," ","channel:"]}),(0,n.jsx)("p",{className:"text-xs border border-scale-600  py-0.5 px-1 rounded-md bg-surface-200",children:s.channelName})]}),(0,n.jsx)("p",{className:"text-xs text-foreground-lighter mt-2",children:"If you leave this channel, all of the messages populated on this page will disappear"}),(0,n.jsx)(u.z,{type:"default",onClick:()=>t({...s,channelName:"",enabled:!1}),children:"Leave channel"})]})})})]})};var C=t(66593),_=t(39097),S=t.n(_),z=t(54383),E=t(81076),Z=t(59073);let R=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinejoin:"round",strokeMiterlimit:10,d:"m23.149 23.499 3.424 7.83a.5.5 0 0 0 .942-.074l.74-2.868a.5.5 0 0 1 .364-.36l3.039-.756a.5.5 0 0 0 .08-.943l-7.93-3.487a.5.5 0 0 0-.66.658Z"}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinejoin:"round",strokeMiterlimit:10,d:"M24.544 32.746h-5.623a3 3 0 0 1-3-3V18.5a3 3 0 0 1 3-3h11.247a3 3 0 0 1 3 3v5.623",opacity:.45})]});var M=function(e){return(0,n.jsx)(Z.Z,{src:(0,n.jsx)(R,{}),viewBox:"12.5 12 24 24",...e})},T=t(22854);let P=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{id:"Ellipse 146",d:"M17.3154 6.70312C18.6968 8.06227 19.5532 9.95249 19.5532 12.0426C19.5532 14.1326 18.6968 16.0229 17.3154 17.382M6.79102 6.70312C5.40966 8.06227 4.55322 9.95249 4.55322 12.0426C4.55322 14.1326 5.40966 16.0229 6.79102 17.382",stroke:"currentColor",strokeMiterlimit:"10",strokeLinejoin:"bevel",opacity:.45}),(0,n.jsx)("ellipse",{id:"Ellipse 144",cx:"12.0532",cy:"12.0428",rx:"3.00928",ry:"3.00666",stroke:"currentColor",strokeMiterlimit:"10",strokeLinejoin:"bevel"}),(0,n.jsx)("path",{id:"Vector 96",d:"M12.0747 15.0488L12.0747 23.9996",stroke:"currentColor",strokeMiterlimit:"10",strokeLinejoin:"bevel"})]});var A=function(e){return(0,n.jsx)(Z.Z,{src:(0,n.jsx)(P,{}),viewBox:"0 0 24 24",...e})};let L=()=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:25,height:24,fill:"none",children:[(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"bevel",strokeMiterlimit:10,d:"M20.307 12a7.807 7.807 0 0 1-7.807 7.808M4.693 12A7.807 7.807 0 0 1 12.5 4.193",opacity:.45}),(0,n.jsx)("circle",{cx:17.512,cy:6.971,r:3.723,stroke:"currentColor",strokeLinejoin:"bevel",strokeMiterlimit:10}),(0,n.jsx)("path",{stroke:"currentColor",strokeLinejoin:"bevel",strokeMiterlimit:10,d:"m10.11 13.287 2.137 3.703-2.138 3.703H5.833L3.695 16.99l2.138-3.703h4.276Z"})]});var F=function(e){return(0,n.jsx)(Z.Z,{src:(0,n.jsx)(L,{}),viewBox:"0 0 25 24",...e})},I=t(750),O=t(92286);let D=e=>{let{value:s,onChange:t}=e;return(0,n.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,n.jsx)("p",{className:"w-[60px] flex justify-end text-sm",children:"WHERE"}),(0,n.jsx)(O.Z,{disabled:!0,supportSelectAll:!0,size:"small",selectedSchemaName:s,onSelectSchema:t,className:"rounded-l-none [&>button>span>div]:py-0 w-64"})]})};var B=t(84447),V=t(52995),W=t(90504),J=t(95492),K=t(19869),U=t(90488),H=t(27570),Q=t(94957),G=t(54073),q=t.n(G),X=e=>{let{className:s,size:t="tiny",showError:a=!0,selectedSchemaName:l,selectedTableName:r,onSelectTable:c}=e,[o,d]=(0,i.useState)(!1),[x,m]=(0,i.useState)(!1),{project:h}=(0,H.d2)(),[p,f]=(0,i.useState)(""),{data:g,isLoading:b,isSuccess:v,isError:N,error:y,refetch:w}=(0,Q.H)({projectRef:null==h?void 0:h.ref,search:p,connectionString:null==h?void 0:h.connectionString,schema:l});(0,i.useEffect)(()=>{!x&&v&&m(!0)},[x,v]),(0,i.useEffect)(()=>{o||""===p||f("")},[o,p]);let k=q()(f),C=((null==g?void 0:g.pages[0].data.entities)?[...null==g?void 0:g.pages[0].data.entities]:[]).sort((e,s)=>e.name>s.name?0:-1);return(0,n.jsx)("div",{className:s,children:(0,n.jsxs)(j.J2,{open:o,onOpenChange:d,modal:!1,children:[(0,n.jsx)(j.xo,{asChild:!0,children:(0,n.jsx)(u.z,{size:t,type:"outline",disabled:b,className:"w-full [&>span]:w-full ".concat("small"===t?"py-1.5":""),icon:b?(0,n.jsx)(B.Z,{className:"animate-spin",size:12}):null,iconRight:(0,n.jsx)(V.Z,{className:"text-foreground-light rotate-90",strokeWidth:2,size:12}),children:x?(0,n.jsxs)("div",{className:"w-full flex space-x-3",children:[(0,n.jsx)("p",{className:"text-xs text-light",children:"table"}),(0,n.jsx)("p",{className:"text-xs",children:"*"===r?"All tables":r})]}):(0,n.jsx)("p",{className:"flex text-xs text-light",children:"Loading tables..."})})}),(0,n.jsx)(j.yk,{className:"p-0 w-64",side:"bottom",align:"start",children:(0,n.jsxs)(W.mY,{children:[(0,n.jsx)(W.sZ,{placeholder:"Find table...",onValueChange:e=>k(e)}),(0,n.jsxs)(W.e8,{children:[b&&(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-2 px-3 py-2",children:[(0,n.jsx)(B.Z,{className:"animate-spin",size:12}),(0,n.jsx)("p",{className:"flex text-xs text-light",children:"Loading tables..."})]}),a&&N&&(0,n.jsxs)(J.bZ,{variant:"warning",className:"!px-3 !py-3 !border-0 rounded-none",children:[(0,n.jsx)(J.Cd,{className:"text-xs text-amber-900",children:"Failed to load tables"}),(0,n.jsxs)(J.X,{className:"text-xs mb-2",children:["Error: ",null==y?void 0:y.message]}),(0,n.jsx)(u.z,{type:"default",size:"tiny",onClick:()=>w(),children:"Reload tables"})]}),v&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(W.fu,{forceMount:!0,children:(0,n.jsxs)(K.x,{className:(C||[]).length>7?"h-[210px]":"",children:[(0,n.jsx)(W.rb,{children:"No tables found"}),!p&&(0,n.jsxs)(W.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{c("*",void 0),d(!1)},onClick:()=>{c("*",void 0),d(!1)},children:[(0,n.jsx)("span",{children:"All tables"}),"*"===l&&(0,n.jsx)(U.Z,{className:"text-brand",strokeWidth:2})]},"all-tables"),null==C?void 0:C.map(e=>(0,n.jsxs)(W.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{c(e.name,e.id),d(!1)},onClick:()=>{c(e.name,e.id),d(!1)},children:[(0,n.jsx)("span",{children:e.name}),l===e.name&&(0,n.jsx)(U.Z,{className:"text-brand",strokeWidth:2})]},e.id))]})})})]})]})})]})})};let Y=e=>{let{value:s,schema:t,onChange:a}=e;return(0,n.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,n.jsx)("p",{className:"w-[60px] flex justify-end text-sm",children:"AND"}),(0,n.jsx)(X,{selectedSchemaName:t,selectedTableName:s,onSelectTable:a,className:"w-64",size:"small"})]})};var $=t(74138);let ee=e=>{let{config:s,onChangeConfig:t}=e,[a,o]=(0,i.useState)(!1),[d,x]=(0,i.useState)(!1),[m,h]=(0,i.useState)(s),p=(0,l.Mk)(),f=(0,r.useRouter)(),g="*"!==s.table;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(j.J2,{open:a,onOpenChange:e=>{!0===e&&h(s),o(e)},children:[(0,n.jsx)(j.xo,{asChild:!0,children:(0,n.jsx)(u.z,{icon:(0,n.jsx)(C.Z,{size:"16"}),type:g?"primary":"dashed",className:(0,z.cn)("rounded-full px-1.5 text-xs",g?"!py-0.5":"!py-1"),size:"small",children:g?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"mr-1",children:"Filtered by "}),(0,n.jsxs)(E.C,{variant:"brand",children:["table: ",s.table]})]}):(0,n.jsx)("span",{className:"mr-1",children:"Filter messages"})})}),(0,n.jsxs)(j.yk,{className:"p-0 w-[365px]",align:"start",children:[(0,n.jsx)("div",{className:"border-b border-overlay text-xs px-4 py-3 text-foreground",children:"Listen to event types"}),(0,n.jsxs)("div",{className:"py-3 px-4 border-b border-overlay",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,n.jsxs)("div",{className:"flex gap-2.5 items-center",children:[(0,n.jsx)(M,{size:"xlarge",className:"bg-foreground rounded text-background-muted"}),(0,n.jsx)("label",{htmlFor:"toggle-presence",className:"text-sm",children:"Presence"})]}),(0,n.jsx)(T.Z,{id:"toggle-presence",size:"tiny",checked:m.enablePresence,onChange:()=>h({...m,enablePresence:!m.enablePresence})})]}),(0,n.jsx)("p",{className:"text-xs text-foreground-light pt-1",children:"Store and synchronize user state consistently across clients"})]}),(0,n.jsxs)("div",{className:"py-3 px-4 border-b border-overlay",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex gap-2.5 items-center",children:[(0,n.jsx)(A,{size:"xlarge",className:"bg-foreground rounded text-background-muted"}),(0,n.jsx)("label",{htmlFor:"toggle-broadcast",className:"text-sm",children:"Broadcast"})]}),(0,n.jsx)(T.Z,{id:"toggle-broadcast",size:"tiny",checked:m.enableBroadcast,onChange:()=>h({...m,enableBroadcast:!m.enableBroadcast})})]}),(0,n.jsx)("p",{className:"text-xs  text-foreground-light pt-1",children:"Send any data to any client subscribed to the same channel"})]}),(0,n.jsxs)("div",{className:"py-3 px-4 border-b border-overlay",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex gap-2.5 items-center",children:[(0,n.jsx)(F,{size:"xlarge",className:"bg-foreground rounded text-background-muted"}),(0,n.jsx)("label",{htmlFor:"toggle-db-changes",className:"text-sm",children:"Database changes"})]}),(0,n.jsx)(T.Z,{id:"toggle-db-changes",size:"tiny",checked:m.enableDbChanges,onChange:()=>h({...m,enableDbChanges:!m.enableDbChanges})})]}),(0,n.jsx)("p",{className:"text-xs text-foreground-light pt-1",children:"Listen for Database inserts, updates, deletes and more"})]}),m.enableDbChanges&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"border-b border-overlay text-xs px-4 py-3 text-foreground",children:"Filter messages from database changes"}),(0,n.jsxs)("div",{className:"flex border-b border-overlay p-4 gap-y-2 flex-col",children:[(0,n.jsx)(D,{value:m.schema,onChange:e=>h({...m,schema:e,table:"*"})}),(0,n.jsx)(Y,{value:m.table,schema:m.schema,onChange:e=>h({...m,table:e})})]}),(0,n.jsxs)("div",{className:"border-b border-overlay p-4 flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[(0,n.jsx)("p",{className:"w-[60px] flex justify-end text-sm",children:"AND"}),(0,n.jsx)(I.Z,{size:"tiny",className:"flex-grow",placeholder:"body=eq.hey",value:m.filter,onChange:e=>h({...m,filter:e.target.value})})]}),(0,n.jsxs)("p",{className:"text-xs text-foreground-light pl-[80px]",children:["Learn more about realtime filtering in"," ",(0,n.jsx)(S(),{className:"underline",target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/realtime/postgres-changes#available-filters",children:"our docs"})]})]})]}),(0,n.jsxs)("div",{className:"px-4 py-2 gap-2 flex justify-end",children:[(0,n.jsx)(u.z,{type:"default",onClick:()=>o(!1),children:"Cancel"}),(0,n.jsx)(u.z,{onClick:()=>x(!0),children:"Apply"})]})]})]}),(0,n.jsx)($.Z,{title:"Previously found messages will be lost",variant:"destructive",confirmLabel:"Confirm",size:"small",visible:d,onCancel:()=>x(!1),onConfirm:()=>{c.Z.sendEvent({category:"realtime_inspector",action:"applied_filters",label:"realtime_inspector_config"},p,f),t(m),x(!1),o(!1)},children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"The realtime inspector will clear currently collected messages and start listening for new messages matching the updated filters."})})]})};var es=t(62202),et=t(3696),en=t(53535),ea=t(3937),el=t(99248),er=t(35432),ei=t(83537);let ec=e=>{let{config:s,onChangeConfig:t}=e,{data:a}=(0,en.q)({projectRef:s.projectRef}),o=(0,l.Mk)(),d=(0,r.useRouter)(),x=null==a?void 0:a.autoApiService,u=(null==x?void 0:x.service_api_keys.find(e=>"service_role key"===e.name))?x.serviceApiKey:void 0,m=(null==x?void 0:x.service_api_keys.find(e=>"anon key"===e.name))?x.defaultApiKey:void 0,{data:h}=(0,ea.s)({projectRef:s.projectRef},{enabled:el.Qy}),p=null==h?void 0:h.jwt_secret,f=(0,ei.fN)(),g=(0,i.useRef)(!1);return(0,i.useEffect)(()=>{g.current&&c.Z.sendEvent({category:"realtime_inspector",action:"changed_database_role",label:"realtime_inspector_config"},o,d),g.current=!0},[f.role]),(0,i.useEffect)(()=>{(async()=>{let e;let n=null;void 0!==s.projectRef&&void 0!==p&&void 0!==f.role&&"postgrest"===f.role.type?(e=m,await (0,er.Wn)(s.projectRef,p,f.role).then(e=>n=e).catch(e=>es.ZP.error("Failed to get JWT for role: ".concat(e.message)))):e=u,e&&t({...s,token:e,bearer:n})})()},[f.role,m,u]),(0,n.jsx)(et.Q,{align:"start",variant:"connected-on-both"})},eo=e=>{let{config:s,onChangeConfig:t}=e,a=(0,l.Mk)(),i=(0,r.useRouter)();return(0,n.jsxs)("div",{className:"flex flex-row h-14 gap-2.5 items-center px-4",children:[(0,n.jsxs)("div",{className:"flex flex-row",children:[(0,n.jsx)(k,{config:s,onChangeConfig:t}),(0,n.jsx)(ec,{config:s,onChangeConfig:t}),(0,n.jsxs)(o.fC,{delayDuration:0,children:[(0,n.jsx)(o.xz,{asChild:!0,children:(0,n.jsx)(u.z,{size:"tiny",type:s.enabled?"warning":"primary",className:"rounded-l-none border-l-0",disabled:0===s.channelName.length,icon:s.enabled?(0,n.jsx)(d.Z,{size:"16"}):(0,n.jsx)(x.Z,{size:"16"}),onClick:()=>{t({...s,enabled:!s.enabled}),s.enabled||c.Z.sendEvent({category:"realtime_inspector",action:"started_listening",label:"realtime_inspector_config"},a,i)},children:s.enabled?"Stop listening":"Start listening"})}),0===s.channelName.length&&(0,n.jsx)(o.h_,{children:(0,n.jsxs)(o.VY,{side:"bottom",children:[(0,n.jsx)(o.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You'll need to join a channel first"})})]})})]})]}),(0,n.jsx)(ee,{config:s,onChangeConfig:t})]})};var ed=t(18149),ex=t.n(ed),eu=t(46252),em=t(66960),eh=t(47370),ep=t(32830),ef=t(33706),eg=t(53738),ej=t(15998),eb=t(28879),ev=t.n(eb);let eN=e=>ev().unix(Number(e)/1e3).toISOString(),ey=e=>{let{children:s}=e;return(0,n.jsx)("div",{className:"flex h-full w-full items-center gap-4",children:s})},ew=e=>{let{value:s,hideCopy:t=!1}=e;return(0,n.jsx)(ek,{label:"Timestamp",value:eN(s),hideCopy:t})},ek=e=>{let{label:s,value:t,valueRender:a,hideCopy:l=!1}=e;return(0,n.jsxs)("div",{className:"grid grid-cols-12 group",children:[(0,n.jsx)("span",{className:"text-scale-900 text-sm col-span-4 whitespace-pre-wrap",children:s}),(0,n.jsx)("span",{className:"text-scale-1200 text-sm col-span-6 whitespace-pre-wrap break-all",children:null!=a?a:t}),!l&&(0,n.jsx)(ej.Z,{text:t,className:"group-hover:opacity-100 opacity-0 my-auto transition col-span-2  h-4 w-4 px-0 py-0",type:"text",title:"Copy to clipboard"})]})},eC=()=>(0,n.jsx)("div",{className:"h-px w-full bg-panel-border-interior-light [[data-theme*=dark]_&]:bg-panel-border-interior-dark"}),e_=e=>{let{log:s}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"px-8",children:[(0,n.jsx)("span",{className:"col-span-4 text-sm text-scale-900",children:"Message"}),(0,n.jsx)("p",{className:"text-wrap mt-2 overflow-x-auto whitespace-pre-wrap font-mono text-xs text-scale-1200",children:s.message})]}),(0,n.jsx)(eC,{}),(0,n.jsx)("div",{className:"px-8 space-y-2",children:(0,n.jsx)(ew,{hideCopy:!0,value:s.timestamp})}),(0,n.jsx)(eC,{}),(0,n.jsxs)("div",{className:"px-8",children:[(0,n.jsx)("h3",{className:"mb-4 text-sm text-foreground-lighter",children:"Metadata"}),(0,n.jsx)("pre",{className:"syntax-highlight overflow-x-auto text-sm",children:(0,n.jsx)("div",{className:"text-wrap",dangerouslySetInnerHTML:{__html:s.metadata?JSON.stringify(s.metadata,null,2).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var s="number text-tomato-900";return/^"/.test(e)?s=/:$/.test(e)?"key text-scale-1200":"string text-brand-600":/true|false/.test(e)?s="boolean text-blue-900":/null/.test(e)&&(s="null text-amber-1100"),'<span class="'+s+'">'+e+"</span>"}).split("\n").map(e=>'<span class="line text-xs">'.concat(e,"</span>")).join("\n"):""}})})]})]})};var eS=e=>{let{log:s,onClose:t}=e,a=(0,l.Mk)(),o=(0,r.useRouter)(),d=(0,i.useMemo)(()=>JSON.stringify(s,null,2),[s]);return(0,n.jsxs)("div",{className:(0,z.cn)("relative flex h-full flex-grow flex-col border-l border-t-2 overflow-y-scroll bg-200"),children:[(0,n.jsx)("div",{className:(0,z.cn)("absolute flex h-full w-full flex-col items-center justify-center gap-2 bg-200 text-center opacity-0 transition-all",s?"z-0 opacity-0":"z-10 opacity-100"),children:(0,n.jsxs)("div",{className:(0,z.cn)("flex w-full max-w-sm scale-95 flex-col items-center justify-center gap-6 text-center opacity-0 transition-all delay-300 duration-500",s?"mt-0 scale-95 opacity-0":"mt-8 scale-100 opacity-100"),children:[(0,n.jsxs)("div",{className:"relative flex h-4 w-32 items-center rounded border border-default px-2",children:[(0,n.jsx)("div",{className:"h-0.5 w-2/3 rounded-full bg-overlay-hover"}),(0,n.jsx)("div",{className:"absolute right-1 -bottom-4",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})})})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("h3",{className:"text-sm text-foreground",children:"Select a message"}),(0,n.jsx)("p",{className:"text-xs text-foreground-lighter",children:"Click on a message on the left to view details."})]})]})}),(0,n.jsxs)("div",{className:"relative h-px flex-grow",children:[(0,n.jsxs)("div",{className:"pt-4 flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"px-4 flex flex-row justify-between items-center",children:[(0,n.jsx)("div",{className:"transition",children:(0,n.jsx)(ej.Z,{text:d,type:"default",title:"Copy log to clipboard",onClick:()=>{c.Z.sendEvent({category:"realtime_inspector",action:"copied_message",label:"realtime_inspector_results"},a,o)}})}),(0,n.jsx)(u.z,{type:"text",className:"cursor-pointer transition hover:text-scale-1200 h-8 w-8 px-0 py-0 flex items-center justify-center",onClick:t,children:(0,n.jsx)(eg.Z,{size:14,strokeWidth:2,className:"text-scale-900"})})]}),(0,n.jsx)("div",{className:"h-px w-full bg-scale-600 rounded"})]}),(0,n.jsx)("div",{className:"flex flex-col space-y-6 py-4",children:s&&(0,n.jsx)(e_,{log:s})})]})]})},ez=()=>(0,n.jsxs)("div",{className:"border bg-studio border-border rounded-md justify-start items-center flex flex-col w-10/12 relative",children:[(0,n.jsx)("div",{className:"w-full px-5 py-4 items-center gap-4 inline-flex border-b rounded-t-md",children:(0,n.jsxs)("div",{className:"grow flex-col flex gap-y-1",children:[(0,n.jsx)("p",{className:"text-foreground",children:"Join a channel to start listening to messages"}),(0,n.jsx)("p",{className:"text-foreground-lighter text-xs",children:"Channels are the building blocks of realtime where clients can bi-directionally send and receive messages in."})]})}),(0,n.jsxs)("div",{className:"w-full px-5 py-4 items-center gap-4 inline-flex rounded-b-md",children:[(0,n.jsxs)("div",{className:"grow flex-col flex",children:[(0,n.jsx)("p",{className:"text-foreground",children:"Not sure what to do?"}),(0,n.jsx)("p",{className:"text-foreground-lighter text-xs",children:"Browse our documentation"})]}),(0,n.jsx)(u.z,{type:"default",iconRight:(0,n.jsx)(ep.Z,{}),children:(0,n.jsx)("a",{href:"https://supabase.com/docs/guides/realtime",target:"_blank",rel:"noreferrer",children:"Documentation"})})]})]}),eE=t(78804);let eZ={PRESENCE:(0,n.jsx)(M,{size:"xlarge"}),BROADCAST:(0,n.jsx)(A,{size:"xlarge"}),POSTGRES:(0,n.jsx)(F,{size:"xlarge"}),SYSTEM:(0,n.jsx)(eE.Z,{size:"large"})},eR=[{name:"timestamp-with-truncated-text",key:"main-column",renderCell:e=>{let s=e.row.message;return(0,n.jsxs)(ey,{children:[(0,n.jsx)("div",{className:(0,z.cn)("flex justify-center items-center min-w-[24px]",eM(e.row)?"text-warning-600":"text-green-900"),children:eZ[s]}),(0,n.jsx)("span",{className:(0,z.cn)("font-mono",eM(e.row)?"!text-warning-600":""),children:new Date(e.row.timestamp).toISOString()}),(0,n.jsx)("span",{className:(0,z.cn)("truncate font-mono",eM(e.row)?"!text-warning-600":""),children:JSON.stringify(e.row.metadata)})]})}}],eM=e=>{var s;return"SYSTEM"===e.message&&(null===(s=e.metadata)||void 0===s?void 0:s.status)==="error"},eT=e=>{let{enabled:s,hasChannelSet:t,showSendMessage:a}=e,{ref:r}=(0,l.UO)();return(0,n.jsx)("div",{className:"w-full max-w-md flex items-center flex-col",children:t?(0,n.jsxs)(n.Fragment,{children:[s&&(0,n.jsx)("p",{className:"text-foreground",children:"No Realtime messages found"}),(0,n.jsx)("p",{className:"text-foreground-lighter",children:"Realtime message logs will be shown here"}),(0,n.jsxs)("div",{className:"mt-4 border bg-surface-100 border-border rounded-md justify-start items-center flex flex-col w-full",children:[(0,n.jsxs)("div",{className:"w-full px-5 py-4 items-center gap-4 inline-flex border-b",children:[(0,n.jsx)(A,{size:"xlarge",className:"text-background bg-foreground rounded w-6"}),(0,n.jsxs)("div",{className:"grow flex-col flex",children:[(0,n.jsx)("p",{className:"text-foreground",children:"Create a Broadcast message"}),(0,n.jsx)("p",{className:"text-foreground-lighter text-xs",children:"Send a message in the channel"})]}),(0,n.jsx)(u.z,{type:"default",onClick:a,children:"Broadcast a message"})]}),(0,n.jsxs)("div",{className:"w-full px-5 py-4 items-center gap-4 inline-flex border-b",children:[(0,n.jsx)(M,{size:"xlarge",className:"text-background bg-foreground rounded w-6"}),(0,n.jsxs)("div",{className:"grow flex-col flex",children:[(0,n.jsx)("p",{className:"text-foreground",children:"Join from another browser tab"}),(0,n.jsx)("p",{className:"text-foreground-lighter text-xs",children:"Send messages between multiple clients"})]}),(0,n.jsx)(S(),{href:"/project/".concat(r,"/realtime/inspector"),target:"_blank",rel:"noreferrer",children:(0,n.jsx)(u.z,{type:"default",iconRight:(0,n.jsx)(ep.Z,{}),children:"Open inspector"})})]}),(0,n.jsxs)("div",{className:"w-full px-5 py-4 items-center gap-4 inline-flex border-b",children:[(0,n.jsx)(F,{size:"xlarge",className:"text-background bg-foreground rounded w-6"}),(0,n.jsxs)("div",{className:"grow flex-col flex",children:[(0,n.jsx)("p",{className:"text-foreground",children:"Listen to a table for changes"}),(0,n.jsx)("p",{className:"text-foreground-lighter text-xs",children:"Tables must have realtime enabled"})]}),(0,n.jsx)(S(),{href:"/project/".concat(r,"/database/publications"),target:"_blank",rel:"noreferrer",children:(0,n.jsx)(u.z,{type:"default",iconRight:(0,n.jsx)(ep.Z,{}),children:"Publications settings"})})]}),(0,n.jsxs)("div",{className:"w-full px-5 py-4 items-center gap-4 inline-flex rounded-b-md bg-studio",children:[(0,n.jsxs)("div",{className:"grow flex-col flex",children:[(0,n.jsx)("p",{className:"text-foreground",children:"Not sure what to do?"}),(0,n.jsx)("p",{className:"text-foreground-lighter text-xs",children:"Browse our documentation"})]}),(0,n.jsx)(u.z,{type:"default",iconRight:(0,n.jsx)(ep.Z,{}),children:(0,n.jsx)("a",{href:"https://supabase.com/docs/guides/realtime",target:"_blank",rel:"noreferrer",children:"Documentation"})})]})]})]}):(0,n.jsx)(ez,{})})},eP=(e,s)=>(0,n.jsx)(eh.X2,{...s,isRowSelected:!1,selectedCellIdx:void 0},e);var eA=e=>{let{enabled:s,hasChannelSet:t,data:a=[],showSendMessage:o}=e,[d,x]=(0,i.useState)(null),m=JSON.stringify(a),h=(0,l.Mk)(),p=(0,r.useRouter)();return((0,i.useEffect)(()=>{a&&(a.find(e=>e.id===(null==d?void 0:d.id))||x(null))},[m]),a)?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("section",{className:"flex w-full flex-col",style:{maxHeight:"calc(100vh - 42px - 3rem)"},children:[(0,n.jsx)(ef.Z,{active:s}),(0,n.jsxs)("div",{className:(0,z.cn)("flex h-full flex-row",s?"border-brand-400":null),children:[(0,n.jsxs)("div",{className:"flex flex-grow flex-col",children:[s&&(0,n.jsxs)("div",{className:"w-full h-9 px-4 bg-surface-100 border-b items-center inline-flex justify-between text-foreground-light",children:[(0,n.jsxs)("div",{className:"inline-flex gap-2.5 text-xs",children:[(0,n.jsx)(eu.Z,{size:"16",className:"animate-spin"}),(0,n.jsx)("div",{children:"Listening"}),(0,n.jsx)("div",{children:"â€¢"}),(0,n.jsx)("div",{children:a.length>0?a.length>=100?"Found a large number of messages, showing only the latest 100...":"Found ".concat(a.length," messages..."):"No message found yet..."})]}),(0,n.jsx)(u.z,{type:"default",onClick:o,icon:(0,n.jsx)(em.Z,{size:14,strokeWidth:1.5}),children:(0,n.jsx)("span",{children:"Broadcast a message"})})]}),(0,n.jsx)(eh.ZP,{className:"data-grid--simple-logs h-full border-b-0",rowHeight:40,headerRowHeight:0,onSelectedCellChange:e=>{let{rowIdx:s}=e;c.Z.sendEvent({category:"realtime_inspector",action:"focused-specific-message",label:"realtime_inspector_results"},h,p),x(a[s])},selectedRows:new Set([]),columns:eR,rowClass:e=>(0,z.cn)(["font-mono tracking-tight",ex()(e,d)?"bg-scale-800 rdg-row--focused":" bg-200 hover:bg-scale-300 cursor-pointer",eM(e)&&"!bg-warning-300"]),rows:a,rowKeyGetter:e=>e.id,renderers:{renderRow:eP,noRowsFallback:(0,n.jsx)("div",{className:"mx-auto flex h-full w-full items-center justify-center space-y-12 py-4 transition-all delay-200 duration-500",children:(0,n.jsx)(eT,{enabled:s,hasChannelSet:t,showSendMessage:o})})}})]}),(0,n.jsx)("div",{className:"flex w-1/2 flex-col",children:(0,n.jsx)(eS,{onClose:()=>x(null),log:d})})]})]})}):null},eL=t(82663),eF=t(82955),eI=t(83690);let eO={message:"Test message",payload:'{ "message": "Hello World" }'},eD=e=>{let{visible:s,onSelectCancel:t,onSelectConfirm:a}=e,[l,r]=(0,i.useState)(),[c,o]=(0,i.useState)(eO);return(0,i.useEffect)(()=>{s&&(r(void 0),o(eO))},[s]),(0,n.jsx)(eI.Z,{size:"medium",alignFooter:"right",header:"Broadcast a message to all clients",visible:s,loading:!1,onCancel:t,onConfirm:()=>{let e=(0,eF.dW)(c.payload);void 0===e?r("Please provide a valid JSON"):a({...c,payload:e})},children:(0,n.jsxs)(eI.Z.Content,{className:"flex flex-col gap-y-4",children:[(0,n.jsx)(I.Z,{label:"Message name",size:"small",className:"flex-grow",value:c.message,onChange:e=>o({...c,message:e.target.value})}),(0,n.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,n.jsx)("p",{className:"text-sm text-scale-1100",children:"Message payload"}),(0,n.jsx)(eL.Z,{id:"message-payload",language:"json",className:"!mb-0 h-32 overflow-hidden rounded border",onInputChange:e=>o({...c,payload:null!=e?e:"{}"}),options:{wordWrap:"off",contextmenu:!1},value:c.payload}),void 0!==l&&(0,n.jsx)("p",{className:"text-sm text-red-900",children:l})]})]})})};var eB=t(51102),eV=t(51579),eW=t(98537),eJ=t.n(eW),eK=t(829),eU=t.n(eK),eH=t(85701),eQ=t.n(eH),eG=t(45077),eq=t(93542);function eX(e,s){return"clear"===s.type?eG.Z6:eQ()(eU()([{id:(0,eF.k$)(),timestamp:new Date().getTime(),message:s.payload.messageType,metadata:s.payload.metadata},...e],e=>-e.timestamp),100)}let eY=(e,s)=>{let{enabled:t,channelName:n,projectRef:a,logLevel:l,token:r,schema:c,table:o,isChannelPrivate:d,filter:x,bearer:u,enablePresence:m,enableDbChanges:h,enableBroadcast:p}=e,{data:f}=(0,en.q)({projectRef:a}),g=f?"".concat(f.autoApiService.protocol,"://").concat(f.autoApiService.endpoint):"https://".concat(a,".supabase.co"),j="".concat(g,"/realtime/v1").replace(/^http/i,"ws"),[b,v]=(0,i.useReducer)(eX,[]),N=(e,s)=>{v({type:"add",payload:{messageType:e,metadata:s}})},[y,w]=(0,i.useState)(),[k,C]=(0,i.useState)(),_=(0,ei.fN)();return(0,i.useEffect)(()=>{if(!t)return;let e=eJ()(eV.SU,{headers:{"User-Agent":"supabase-api/".concat(eq.env.VERCEL_GIT_COMMIT_SHA||"unknown-sha")}}),s=eJ()(eV.fw,{params:{log_level:l}}),n={headers:e.headers,...s,params:{apikey:r,...s.params}},a=new eB.VH(j,n);return u&&a.setAuth(u),w(a),()=>{a.disconnect(),w(void 0)}},[t,u,g,l,r]),(0,i.useEffect)(()=>{if(!y)return;v({type:"clear"});let t=null==y?void 0:y.channel(n,{config:{broadcast:{self:!0},private:d}});if(t.on("system",{},e=>{N("SYSTEM",e)}),p&&t.on("broadcast",{event:"*"},e=>N("BROADCAST",e)),m&&t.on("presence",{event:"*"},e=>{N("PRESENCE",e)}),h){let e={event:"*",schema:c,table:o,filter:void 0};""!==x&&(e.filter=x),t.on("postgres_changes",e,e=>{let s=performance.now()+performance.timeOrigin,t=Date.parse(e.commit_timestamp);N("POSTGRES",{...e,latency:s-t})})}return t.subscribe(async a=>{if("SUBSCRIBED"===a){var l;let e=null===(l=_.role)||void 0===l?void 0:l.role;m&&t.send({type:"presence",event:"TRACK",payload:{name:(void 0===e?"service_role_":"anon"===e?"anon_role_":"authenticated"===e?"authenticated_role_":"user_name_")+Math.floor(100*Math.random()),t:performance.now()}})}else"CHANNEL_ERROR"===a&&(es.ZP.error("Failed to connect to the channel ".concat(n,": This may be due to restrictive RLS policies. Check your role and try again.")),t.unsubscribe(),C(void 0),s({...e,channelName:"",enabled:!1}))}),C(t),()=>{t.unsubscribe(),C(void 0)}},[y,n,p,h,m,x,g,c,o]),{logData:b,sendMessage:(0,i.useCallback)(async(e,s,t)=>{k?"error"===await k.send({type:"broadcast",event:e,payload:s})?es.ZP.error("Failed to broadcast message"):(es.ZP.success("Successfully broadcasted message"),t()):es.ZP.error("Failed to broadcast message: channel has not been set")},[k])}},e$=()=>{let{ref:e}=(0,l.UO)(),s=(0,l.Mk)(),t=(0,r.useRouter)(),[a,o]=(0,i.useState)(!1),[d,x]=(0,i.useState)({enabled:!1,projectRef:e,channelName:"",logLevel:"info",token:"",schema:"public",table:"*",isChannelPrivate:!1,filter:void 0,bearer:null,enablePresence:!0,enableDbChanges:!0,enableBroadcast:!0}),{logData:u,sendMessage:m}=eY(d,x);return(0,n.jsxs)("div",{className:"flex flex-col grow h-full",children:[(0,n.jsx)(eo,{config:d,onChangeConfig:x}),(0,n.jsx)("div",{className:"relative flex flex-col grow",children:(0,n.jsx)("div",{className:"flex grow",children:(0,n.jsx)(eA,{hasChannelSet:d.channelName.length>0,enabled:d.enabled,data:u,showSendMessage:()=>o(!0)})})}),(0,n.jsx)(eD,{visible:a,onSelectCancel:()=>o(!1),onSelectConfirm:e=>{c.Z.sendEvent({category:"realtime_inspector",action:"send_broadcast_message",label:"realtime_inspector_results"},s,t),m(e.message,e.payload,()=>o(!1))}})]})};var e0=t(39274),e2=t(14782),e1=t(87175);let e3=()=>(0,e1.Xo)(a.KA.READ,"service_api_keys")?(0,n.jsx)(e$,{}):(0,n.jsx)(e2.Z,{isFullPage:!0,resourceText:"access your project's realtime functionalities"});e3.getLayout=e=>(0,n.jsx)(e0.Z,{title:"Realtime Inspector",children:e});var e4=e3},3085:function(e,s,t){"use strict";t.d(s,{ZP:function(){return u}});var n=t(52322),a=t(2784),l=t(46318),r=t(54383);function i(e){let{children:s,className:t,tag:a="div",style:l}=e;return(0,n.jsx)("".concat(a),{style:l,children:s})}i.Title=function(e){let{className:s,level:t=1,children:a,style:l}=e;return(0,n.jsx)("h".concat(t),{style:l,children:a})},i.Text=function(e){let{className:s,children:t,style:a,type:l,disabled:r,mark:i,code:c,keyboard:o,underline:d,strikethrough:x,strong:u,small:m}=e;return c?(0,n.jsx)("code",{style:a,children:t}):i?(0,n.jsx)("mark",{style:a,children:t}):o?(0,n.jsx)("kbd",{style:a,children:t}):u?(0,n.jsx)("strong",{style:a,children:t}):(0,n.jsx)("span",{style:a,children:t})},i.Link=function(e){let{children:s,target:t="_blank",href:a,className:l,onClick:r,style:i}=e;return(0,n.jsx)("a",{onClick:r,href:a,target:t,rel:"noopener noreferrer",style:i,children:s})};let c=(0,a.createContext)({type:"text"}),o=e=>{let{type:s}=e;return(0,n.jsx)(c.Provider,{value:{type:s},children:e.children})},d=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function x(e){let{children:s,className:t,ulClassName:a,style:l,type:r="text"}=e;return(0,n.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:t,style:l,children:(0,n.jsx)(o,{type:r,children:(0,n.jsx)("ul",{className:a,children:s})})})}x.Item=function(e){let{children:s,icon:t,active:a,rounded:i,onClick:c,doNotCloseOverlay:o=!1,showActiveBar:x=!1,style:u}=e,m=(0,l.Z)("menu"),{type:h}=d(),p=[m.item.base];p.push(m.item.variants[h].base),a?p.push(m.item.variants[h].active):p.push(m.item.variants[h].normal);let f=[m.item.content.base];a?f.push(m.item.content.active):f.push(m.item.content.normal);let g=[m.item.icon.base];return a?g.push(m.item.icon.active):g.push(m.item.icon.normal),(0,n.jsxs)("li",{role:"menuitem",className:(0,r.cn)("outline-none",p),style:u,onClick:c,"aria-current":a?"page":void 0,children:[t&&(0,n.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:t}),(0,n.jsx)("span",{className:f.join(" "),children:s})]})},x.Group=function(e){let{children:s,icon:t,title:a}=e,r=(0,l.Z)("menu"),{type:i}=d();return(0,n.jsxs)("div",{className:[r.group.base,r.group.variants[i]].join(" "),children:[t&&(0,n.jsx)("span",{className:r.group.icon,children:t}),(0,n.jsx)("span",{className:r.group.content,children:a}),s]})},x.Misc=function(e){let{children:s}=e;return(0,n.jsx)("div",{children:(0,n.jsx)(i.Text,{children:(0,n.jsx)("span",{children:s})})})};var u=x},93705:function(e,s,t){"use strict";t.d(s,{r:function(){return d}});var n=t(52322),a=t(16530),l=t(10929),r=t(2784),i=t(54383);let c=(0,l.j)("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",{variants:{size:{small:"h-[16px] w-[28px]",medium:"h-[20px] w-[34px]",large:"h-[24px] w-[44px]"}},defaultVariants:{size:"medium"}}),o=(0,l.j)("pointer-events-none block rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform",{variants:{size:{small:"h-[12px] w-[12px] data-[state=checked]:translate-x-[13px] data-[state=unchecked]:translate-x-[1px]",medium:"h-[16px] w-[16px] data-[state=checked]:translate-x-[15px] data-[state=unchecked]:translate-x-[1px]",large:"h-[18px] w-[18px] data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]"}},defaultVariants:{size:"medium"}}),d=r.forwardRef((e,s)=>{let{className:t,size:l,...r}=e;return(0,n.jsx)(a.fC,{className:(0,i.cn)(c({size:l}),t),...r,ref:s,children:(0,n.jsx)(a.bU,{className:(0,i.cn)(o({size:l}))})})});d.displayName=a.fC.displayName}},function(e){e.O(0,[8421,538,8183,7385,6770,3844,63,8993,8395,3736,7148,7370,3111,5845,4830,9428,6640,5022,8402,1224,2888,9774,179],function(){return e(e.s=86350)}),_N_E=e.O()}]);