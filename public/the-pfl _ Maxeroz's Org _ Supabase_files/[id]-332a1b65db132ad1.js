(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6377,8020,8402],{40936:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/sql/[id]",function(){return n(38292)}])},34750:function(e,t,n){"use strict";n.d(t,{$w:function(){return r},Gh:function(){return a},OP:function(){return s}});var i=n(99248);let s=e=>{let t=e.find(e=>"compute_instance"===e.type);return{computeInstance:t,pitr:e.find(e=>"pitr"===e.type),customDomain:e.find(e=>"custom_domain"===e.type),ipv4:e.find(e=>"ipv4"===e.type)}},r=e=>{var t;return!!i.Qy&&(null!==(t=null==e?void 0:e.addons)&&void 0!==t?t:[]).some(e=>"addon_security_hipaa"===e.supabase_prod_id)},a=e=>{if(!e)return e;switch(e){case"fly":return"Fly.io";case"aws":return"AWS";default:return e}}},75951:function(e,t,n){"use strict";n.d(t,{B:function(){return o},F2:function(){return d},G2:function(){return m},LZ:function(){return f},Y4:function(){return l},_J:function(){return u},hk:function(){return c},nK:function(){return a},q_:function(){return p}});var i=n(63059),s=n(99248),r=n(28702);let a=660,l=50,o=20,c={...s.S,INIT_READ_REPLICA:"INIT_READ_REPLICA",INIT_READ_REPLICA_FAILED:"INIT_READ_REPLICA_FAILED"},d={SOUTHEAST_ASIA:[103.8,1.37],NORTHEAST_ASIA:[139.42,35.41],NORTHEAST_ASIA_2:[126.98,37.56],CENTRAL_CANADA:[-73.6,45.5],WEST_US:[-121.96,37.35],EAST_US:[-78.45,38.13],WEST_EU:[-8,53],WEST_EU_2:[-.1,51],CENTRAL_EU:[8,50],SOUTH_ASIA:[72.88,19.08],OCEANIA:[151.2,-33.86],SOUTH_AMERICA:[-46.38,-23.34]},u={SOUTHEAST_ASIA:[103.8,1.37]},p=Object.keys(r.Wp).map(e=>({key:e,name:null===r.Wp||void 0===r.Wp?void 0:r.Wp[e].displayName,region:null===r.Wp||void 0===r.Wp?void 0:r.Wp[e].code,coordinates:d[e]})).filter(e=>void 0!==e.coordinates),m={[i.Vb.Requested]:"Requesting replica instance",[i.Vb.Started]:"Launching replica instance",[i.Vb.LaunchedReadReplicaInstance]:"Initiating replica setup",[i.Vb.InitiatedReadReplicaSetup]:"Downloading base backup",[i.Vb.DownloadedBaseBackup]:"Replaying WAL archives",[i.Vb.ReplayedWalArchives]:"Completing set up",[i.Vb.CompletedReadReplicaSetup]:"Completed"},f={[i.Bm.ReadReplicaInstanceLaunchFailed]:"Failed to launch replica",[i.Bm.InitiateReadReplicaSetupFailed]:"Failed to initiate replica",[i.Bm.DownloadBaseBackupFailed]:"Failed to download backup",[i.Bm.ReplayWalArchivesFailed]:"Failed to replay WAL archives",[i.Bm.CompleteReadReplicaSetupFailed]:"Failed to set up replica"}},67366:function(e,t,n){"use strict";n.d(t,{Z:function(){return tq}});var i=n(52322),s=n(28879),r=n.n(s),a=n(44446),l=n(41344),o=n(2784),c=n(62202),d=n(56006),u=n(92575),p=n(85945),m=n(48228),f=n(18592),h=n(18545);async function x(e){let{pid:t,projectRef:n,connectionString:i}=e,{result:s}=await (0,f.Rj)({projectRef:n,connectionString:i,sql:"select pg_terminate_backend(".concat(t,")")});return s}let g=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,p.NL)();return(0,m.D)(e=>x(e),{async onSuccess(t,n,s){let{projectRef:r}=n;await i.invalidateQueries(h.M.query(r,["ongoing-queries"])),await (null==e?void 0:e(t,n,s))},async onError(e,n,i){void 0===t?c.Am.error("Failed to abort query: ".concat(e.message)):t(e,n,i)},...n})},v=()=>"\nselect pid, query, query_start from pg_stat_activity where state = 'active' and datname = 'postgres';\n".trim(),j=function(e){let{projectRef:t,connectionString:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,f.cp)({projectRef:t,connectionString:n,sql:v(),queryKey:["ongoing-queries"]},{...i,select(e){var t;return(null!==(t=null==e?void 0:e.result)&&void 0!==t?t:[]).filter(e=>!e.query.startsWith(v()))}})};var y=n(26211),_=n(99248),b=n(9109),N=n(7117),w=n(32079),S=n(58898),C=n(54383),E=n(2322),q=n(74138);let R=e=>{let{visible:t,onClose:n}=e,s=(0,y.V)(),p=(0,b.TF)(),[m,f]=(0,o.useState)(),{data:h}=(0,u.b)({projectRef:null==s?void 0:s.ref}),x=(null!=h?h:[]).find(e=>e.identifier===p.selectedDatabaseId),{data:v,error:R,isError:L,isLoading:k,isFetching:z,refetch:A}=j({projectRef:null==s?void 0:s.ref,connectionString:null==x?void 0:x.connectionString},{enabled:!_.Qy||_.Qy&&(null==x?void 0:x.connectionString)!==void 0,staleTime:5e3}),I=null!=v?v:[],{mutate:Z,isLoading:T}=g({onSuccess:()=>{c.ZP.success("Successfully aborted query (ID: ".concat(m,")")),f(void 0)}});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N.yo,{open:t,onOpenChange:()=>n(),children:(0,i.jsxs)(N.ue,{size:"lg",children:[(0,i.jsxs)(N.Tu,{children:[(0,i.jsxs)(N.bC,{className:"flex items-center gap-x-2",children:["Running queries on"," ",(null==x?void 0:x.identifier)===(null==s?void 0:s.ref)?"primary database":"read replica",(0,i.jsx)(w.z,{type:"default",className:"px-1.5",loading:k||z,icon:(0,i.jsx)(a.Z,{}),onClick:()=>A()})]}),(0,i.jsxs)(N.Ei,{children:["There ",1===I.length?"is":"are"," ",(0,i.jsx)("span",{className:"text-foreground-light",children:I.length})," quer",1===I.length?"y":"ies"," currently running"," ",(null==x?void 0:x.identifier)!==(null==s?void 0:s.ref)?"on replica ".concat(null==x?void 0:x.identifier):""]})]}),(0,i.jsxs)("div",{className:"max-h-full h-full divide-y overflow-y-auto",children:[L&&(0,i.jsx)("div",{className:"flex items-center justify-center h-full px-16",children:(0,i.jsx)(d.Z,{subject:"Failed to retrieve ongoing queries",error:R})}),0===I.length&&(0,i.jsxs)("div",{className:"flex flex-col gap-y-2 items-center justify-center h-full text-foreground-light text-sm",children:[(0,i.jsxs)("span",{children:["No queries are currently running on the"," ",(null==x?void 0:x.identifier)!==(null==s?void 0:s.ref)?"read replica ".concat(null==x?void 0:x.identifier):(null!=h?h:[]).length>1?"primary database":"database"]}),(0,i.jsx)(w.z,{type:"default",loading:k||z,icon:(0,i.jsx)(a.Z,{}),onClick:()=>A(),children:"Refresh"})]}),I.map(e=>(0,i.jsxs)(N.DN,{className:"flex justify-between gap-x-4",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-y-2 w-full",children:[(0,i.jsx)(S.d,{hideLineNumbers:!0,value:e.query,language:"sql",className:(0,C.cn)("max-w-none max-h-52 w-full","!bg-transparent !py-3 !px-3.5 prose dark:prose-dark","[&>code]:m-0 [&>code>span]:flex [&>code>span]:flex-wrap")}),(0,i.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,i.jsxs)("p",{className:"text-foreground-light text-xs",children:["PID: ",e.pid]}),(0,i.jsx)("p",{className:"text-foreground-light text-xs",children:"â€¢"}),(0,i.jsxs)("p",{className:"text-foreground-light text-xs",children:["Started since: ",r()(e.query_start).format("DD MMM YYYY HH:mm (ZZ)")]})]})]}),(0,i.jsxs)(E.u,{children:[(0,i.jsx)(E.aJ,{asChild:!0,children:(0,i.jsx)(w.z,{type:"warning",className:"px-1.5",icon:(0,i.jsx)(l.Z,{}),onClick:()=>f(e.pid)})}),(0,i.jsx)(E._v,{side:"bottom",children:"Abort query"})]})]},e.pid))]})]})}),(0,i.jsx)(q.Z,{loading:T,variant:"warning",title:"Confirm to abort this query? (ID: ".concat(m,")"),visible:void 0!==m,onCancel:()=>f(void 0),onConfirm:()=>{void 0!==m&&Z({pid:m,projectRef:null==s?void 0:s.ref,connectionString:null==x?void 0:x.connectionString})},children:(0,i.jsx)("p",{className:"text-sm",children:"This will force the query to stop running."})})]})};var L=n(3373),k=n(45022),z=n(59491),A=n(89404),I=n(1520),Z=n(93778),T=n(5632),F=n(99959),D=n(56902),O=n(30789),P=n(2160),U=n(87175),M=n(75939),V=n(82955),W=n(74067),Q=n(2670),B=n(24413),K=n(34503),G=n(40022),Y=n(96795),H=n.n(Y),$=n(31442);function X(e){return"sql"===e.type}let J=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,$.I)(e,{select:e=>({snippets:e.content.filter(X)}),...t})};var ee=n(34291),et=n.n(ee),en=n(48188),ei=n(27775),es=n(57370),er=n.n(es),ea=n(17172),el=n(39097),eo=n.n(el),ec=n(38264),ed=n(83690),eu=n(9015),ep=n(80435),em=e=>{var t;let{id:n,...s}=e,r=(0,Q.W2)(),a=(0,B.B0)(),l=(0,M.P)("sqlFolderOrganization")?null===(t=a.snippets[n])||void 0===t?void 0:t.snippet:r.snippets[n].snippet,c=er()(null==l?void 0:l.name),[d,u]=(0,o.useState)("CLI"),p=[{id:"migration",label:"Migration",title:"Download as migration",description:"Download the snippet in a new migration named `".concat(c,"`"),cli:(0,O.kL)(n,c),npm:(0,O.kL)(n,c,!0)},{id:"seed",label:"Seed file",title:"Download as seed file",description:"If your query consists of sample data, append the snippet to the end of `supabase/seed.sql`",cli:(0,O.YI)(n),npm:(0,O.YI)(n,!0)},{id:"sql",label:"SQL file",title:"Download as SQL file",description:"Download the snippet directly into a new SQL file named `".concat(c,".sql`"),cli:(0,O.y4)(n,c),npm:(0,O.y4)(n,c,!0)}];return(0,i.jsx)(ed.Z,{hideFooter:!0,showCloseButton:!0,size:"xlarge",header:(0,i.jsx)("p",{children:"Download snippet as local migration file via the Supabase CLI."}),...s,children:(0,i.jsxs)("div",{className:"flex flex-col items-start justify-between gap-4 relative pt-2",children:[(0,i.jsx)(eu.Z,{type:"underlined",listClassNames:"pl-5",children:p.map(e=>(0,i.jsx)(eu.Z.Panel,{id:e.id,label:e.label,children:(0,i.jsxs)(ed.Z.Content,{className:"!py-0",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,i.jsx)("p",{className:"text-base",children:e.title}),(0,i.jsx)(ep.U,{className:"text-sm text-scale-1000 [&>p>code]:!break-normal",content:e.description})]}),(0,i.jsx)(ec.Z,{width:50,options:["CLI","NPM"],activeOption:d,borderOverride:"border-muted",onClickOption:()=>"CLI"===d?u("NPM"):u("CLI")})]}),(0,i.jsx)("pre",{children:(0,i.jsx)(S.d,{language:"bash",className:"language-bash prose dark:prose-dark max-w-none",children:"CLI"===d?e.cli:e.npm})})]})},e.id))}),(0,i.jsxs)(ed.Z.Content,{className:"w-full flex items-center justify-between pt-0",children:[(0,i.jsx)("p",{className:"text-xs text-lighter",children:"Run this command from your project directory"}),(0,i.jsxs)("div",{className:"flex justify-between items-center gap-x-2",children:[(0,i.jsx)(w.z,{asChild:!0,type:"default",icon:(0,i.jsx)(ea.Z,{strokeWidth:1.5}),children:(0,i.jsx)(eo(),{href:"https://supabase.com/docs/guides/cli/local-development#database-migrations",target:"_blank",rel:"noreferrer",children:"About migrations"})}),(0,i.jsx)(w.z,{asChild:!0,type:"default",icon:(0,i.jsx)(ea.Z,{size:14,strokeWidth:1.5}),children:(0,i.jsx)(eo(),{href:"https://supabase.com/docs/guides/cli/local-development",target:"_blank",rel:"noreferrer",children:"About CLI"})})]})]})]})})},ef=n(99430),eh=n(93463),ex=n(89823),eg=n(62277),ev=n(750),ej=n(54849),ey=n(34750),e_=n(18734),eb=e=>{let{snippet:t={},visible:n,onCancel:s,onComplete:r}=e,{ref:a}=(0,F.UO)(),l=(0,ex.l)(),d=(0,Q.W2)(),u=(0,B.B0)(),p=(0,M.P)("sqlFolderOrganization"),{data:m}=(0,eh.G)({orgSlug:null==l?void 0:l.slug}),f=(0,ey.$w)(m),{id:h,name:x,description:g}=t,[v,j]=(0,o.useState)(x),[y,_]=(0,o.useState)(g),{mutate:b,isLoading:N}=(0,ef.g)({onSuccess:e=>{let{title:t,description:n}=e;j(t),y||_(n)},onError:e=>{c.ZP.error("Failed to rename query: ".concat(e.message))}}),S=!!p||"content"in t&&!!t.content.sql,C=async()=>{if(p){if("content"in t)b({sql:t.content.sql});else try{let{content:e}=await (0,e_.A)({projectRef:a,id:t.id});b({sql:e.sql})}catch(e){c.ZP.error("Unable to generate title based on query contents")}}else"content"in t&&b({sql:t.content.sql})},E=async(e,n)=>{let{setSubmitting:i}=n;if(!a)return console.error("Project ref is required");if(!h)return console.error("Snippet ID is required");i(!0);try{if(p){if(!("content"in t)){let e=await (0,e_.A)({projectRef:a,id:h});u.addSnippet({projectRef:a,snippet:e})}u.renameSnippet({id:h,name:v,description:y})}else d.renameSnippet(h,v,y);r&&r()}catch(e){c.ZP.error("Failed to rename query: ".concat(e.message))}};return(0,o.useEffect)(()=>{j(x),_(g)},[t.id]),(0,i.jsx)(ed.Z,{visible:n,onCancel:s,hideFooter:!0,header:"Rename",size:"small",children:(0,i.jsx)(eg.Z,{onReset:s,validateOnBlur:!0,initialValues:{name:null!=x?x:"",description:null!=g?g:""},validate:()=>{let e={};return v||(e.name="Please enter a query name"),e},onSubmit:E,children:e=>{let{isSubmitting:t}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ed.Z.Content,{className:"space-y-4",children:[(0,i.jsx)(ev.Z,{label:"Name",id:"name",name:"name",value:v,onChange:e=>j(e.target.value)}),(0,i.jsx)("div",{className:"flex w-full justify-end mt-2",children:!f&&S&&(0,i.jsx)(w.z,{type:"default",onClick:()=>C(),size:"tiny",disabled:N,children:(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("div",{className:"scale-75",children:(0,i.jsx)(ej.c,{loading:N})}),(0,i.jsx)("span",{children:"Rename with Supabase AI"})]})})}),(0,i.jsx)(ev.Z.TextArea,{label:"Description",id:"description",placeholder:"Describe query",size:"medium",textAreaClassName:"resize-none",value:y,onChange:e=>_(e.target.value)})]}),(0,i.jsx)(ed.Z.Separator,{}),(0,i.jsxs)(ed.Z.Content,{className:"flex items-center justify-end gap-2",children:[(0,i.jsx)(w.z,{htmlType:"reset",type:"default",onClick:s,disabled:t,children:"Cancel"}),(0,i.jsx)(w.z,{htmlType:"submit",loading:t,disabled:t,children:"Rename query"})]})]})}})})},eN=n(62614),ew=n(15998),eS=n(59769),eC=n(71640),eE=n(50692),eq=n(65644),eR=n(63754),eL=n(94299),ek=n(17913),ez=n(3536);let eA=e=>{let{tabInfo:t,open:n,setOpen:s,onSelectRenameQuery:r,onSelectDeleteQuery:a,onSelectShareQuery:l,onSelectDownloadQuery:o}=e,{ref:d}=(0,F.UO)(),u=(0,T.useRouter)(),{profile:p}=(0,W.Un)(),m=(0,Q.W2)(),f=(0,y.V)(),{id:h,name:x,visibility:g,content:v}=t||{},j=(0,U.Xo)(z.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==p?void 0:p.id},subject:{id:null==p?void 0:p.id}}),{id:_}=t||{},b=void 0!==_&&m.snippets&&void 0!==m.snippets[_]?m.snippets[_]:null,N=(null==p?void 0:p.id)===(null==b?void 0:b.snippet.owner_id),S=async()=>{if(!d)return console.error("Project ref is required");if(!h)return console.error("Snippet ID is required");try{let e=(0,O.UA)({id:(0,V.k$)(),name:x,sql:v.sql,owner_id:null==p?void 0:p.id,project_id:null==f?void 0:f.id});m.addSnippet(e,d),m.addNeedsSaving(e.id),u.push("/project/".concat(d,"/sql/").concat(e.id))}catch(e){c.ZP.error("Failed to create a personal copy of this query: ".concat(e.message))}};return(0,i.jsx)(i.Fragment,{children:F.Qy?(0,i.jsxs)(K.h_,{open:n,onOpenChange:s,children:[(0,i.jsx)(K.$F,{className:"opacity-0 group-hover:opacity-100 group-focus:opacity-100 focus:opacity-100 data-[state=open]:opacity-100",asChild:!0,name:"Query actions",children:(0,i.jsx)(w.z,{type:"text",className:"px-1 text-lighter data-[state=open]:text-foreground",icon:(0,i.jsx)(eE.Z,{size:14,strokeWidth:2}),onClick:e=>e.preventDefault()})}),(0,i.jsxs)(K.AW,{side:"bottom",align:"start",className:"w-52",children:[N&&(0,i.jsxs)(K.Xi,{onClick:e=>{e.stopPropagation(),r()},className:"flex gap-2",children:[(0,i.jsx)(eq.Z,{size:14}),"Rename query"]}),"user"===g&&j&&(0,i.jsxs)(K.Xi,{onClick:e=>{e.stopPropagation(),l()},className:"flex gap-2",children:[(0,i.jsx)(eR.Z,{size:14}),"Share query"]}),"project"===g&&j&&(0,i.jsxs)(K.Xi,{onClick:S,className:"flex gap-2",children:[(0,i.jsx)(eL.Z,{size:14}),"Duplicate personal copy"]}),F.Qy&&(0,i.jsxs)(K.Xi,{onClick:()=>o(),className:"flex gap-2",children:[(0,i.jsx)(ek.Z,{size:14}),"Download as migration file"]}),N&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(K.VD,{}),(0,i.jsxs)(K.Xi,{onClick:e=>{e.stopPropagation(),a()},className:"flex gap-2",children:[(0,i.jsx)(ez.Z,{size:14}),"Delete query"]})]})]})]}):(0,i.jsx)(w.z,{asChild:!0,disabled:!0,type:"text",style:{padding:"3px"},children:(0,i.jsx)("span",{})})})};var eI=e=>{let{tabInfo:t,isSelected:n=!1,hasQueriesSelected:s=!1,onSelectQuery:r=et(),onDeleteQuery:a=et()}=e,[l,d]=(0,o.useState)(!1),[u,p]=(0,o.useState)(!1),[m,f]=(0,o.useState)(!1),[h,x]=(0,o.useState)(!1),[g,v]=(0,o.useState)(!1),{ref:j,id:y}=(0,F.UO)(),_=(0,Q.W2)(),{id:b,name:N,description:w,content:S,visibility:E}=t||{},R=b===y,L=(0,o.useRef)(null),k=l||R||u||m||h||g,{mutate:z,isLoading:A}=(0,P.z)({onSuccess:e=>{a(e)},onError:(e,t)=>{e.message.includes("Contents not found")?a(t.ids):c.ZP.error("Failed to delete query: ".concat(e.message))}}),I=async()=>j?b?void z({projectRef:j,ids:[b]}):console.error("Snippet ID is required"):console.error("Project ref is required");(0,o.useEffect)(()=>{R&&L.current&&setTimeout(()=>{var e;null===(e=L.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})},0)});let Z=async()=>{if(b)try{return _.shareSnippet(b,"project"),Promise.resolve()}catch(e){c.ZP.error("Failed to share query: ".concat(e.message))}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(eS.zs,{openDelay:200,children:[(0,i.jsx)(eS.Yi,{asChild:!0,children:(0,i.jsxs)(G.DS,{title:w||N,ref:R?L:null,href:"/project/".concat(j,"/sql/").concat(b),className:"flex gap-3 items-center",forceHoverState:l,isActive:R,children:["user"===E&&(0,i.jsx)(eC.X,{className:(0,C.cn)("transition absolute left-2.5 border-strong",s?"":"opacity-0 group-hover:opacity-100"),checked:n,onCheckedChange:r}),(0,i.jsx)("span",{className:(0,C.cn)("transition-all","w-full overflow-hidden truncate",s&&"user"===E?"ml-5":"user"===E?"group-hover:ml-5":"","text-ellipsis truncate"),children:N}),!s&&(0,i.jsx)(eA,{tabInfo:t,open:l,setOpen:d,onSelectDeleteQuery:()=>x(!0),onSelectRenameQuery:()=>p(!0),onSelectShareQuery:()=>f(!0),onSelectDownloadQuery:()=>v(!0)})]},b)}),!k&&(0,i.jsx)(eS.bZ,{side:"right",align:"center",className:"w-96",animate:"slide-in",children:(0,i.jsxs)(i.Fragment,{children:[S.sql.trim()?(0,i.jsx)(eN.Z,{showCopy:!1,className:"sql",parentClassName:"!p-0 [&>div>span]:text-xs [&>div>span]:tracking-tighter",children:S.sql.replaceAll("\n"," ").replaceAll(/\s+/g," ").slice(0,43)+"".concat(S.sql.length>43?"...":"")}):(0,i.jsx)("p",{className:"text-xs text-foreground-lighter",children:"This query is empty"}),S.sql.trim()&&(0,i.jsx)(ew.Z,{iconOnly:!0,type:"default",className:"px-1 absolute top-1.5 right-1.5",text:S.sql})]})})]}),(0,i.jsx)(eb,{snippet:t,visible:u,onCancel:()=>p(!1),onComplete:()=>p(!1)}),(0,i.jsx)(q.Z,{title:"Confirm to delete query",confirmLabel:"Delete query",confirmLabelLoading:"Deleting query",size:"medium",loading:A,visible:h,variant:"destructive",onCancel:()=>x(!1),onConfirm:I,alert:"project"===E?{title:"This SQL snippet will be lost forever",description:"Deleting this query will remove it for all members of the project team."}:void 0,children:(0,i.jsxs)("p",{className:"text-sm",children:["Are you sure you want to delete '",N,"'?"]})}),(0,i.jsx)(q.Z,{title:"Confirm sharing query",size:"medium",confirmLabel:"Share query",confirmLabelLoading:"Sharing query",visible:m,onCancel:()=>f(!1),onConfirm:Z,alert:{title:"This SQL query will become public to all team members",description:"Anyone with access to the project can view it"},children:(0,i.jsxs)("ul",{className:"text-sm text-foreground-light space-y-5",children:[(0,i.jsxs)("li",{className:"flex gap-3",children:[(0,i.jsx)(en.Z,{}),(0,i.jsx)("span",{children:"Project members will have read-only access to this query."})]}),(0,i.jsxs)("li",{className:"flex gap-3",children:[(0,i.jsx)(ei.Z,{}),(0,i.jsx)("span",{children:"Anyone will be able to duplicate it to their personal snippets."})]})]})}),(0,i.jsx)(em,{id:b,visible:g,onCancel:()=>v(!1)})]})},eZ=n(75652),eT=n.n(eZ);let eF=(e,t,n)=>{let i=t.findIndex(e=>e.id===n[n.length-1]),s=t.findIndex(t=>t.id===e),r=t.slice(Math.min(s,i),Math.max(s,i)+1);if(s<i&&r.reverse(),!n.includes(e))return eT()(n.concat(r.map(e=>e.id)));{let t=r.map(e=>e.id);return n.filter(n=>n===e||!t.includes(n))}},eD=e=>{let{searchText:t,selectedQueries:n,handleNewQuery:s,setSearchText:r,setSelectedQueries:a,setShowDeleteModal:l}=e,c=t.trim(),u=(0,T.useRouter)(),{ref:p,id:m}=(0,F.UO)(),f=(0,M.P)("sqlFolderOrganization"),h=(0,Q.Fy)(p),x=(0,Q.W2)(),{isLoading:g,isSuccess:v,isError:j,error:y}=J(p,{enabled:!f,refetchOnWindowFocus:!1,staleTime:300,onSuccess(e){p&&x.setRemoteSnippets(e.snippets,p)}}),_=e=>{var t;l(!1),a([]),e.length>0&&e.forEach(e=>x.removeSnippet(e));let n=(null!==(t=x.orders[p])&&void 0!==t?t:[]).filter(t=>!e.includes(t));0===n.length?u.push("/project/".concat(p,"/sql/new")):e.includes(m)&&u.push("/project/".concat(p,"/sql/").concat(n[0]))},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0!==e){if(t){let[t,i]=H()(n,e=>{var t;return null===(t=h.find(t=>t.id===e))||void 0===t?void 0:t.content.favorite}),s=h.find(t=>t.id===e);(null==s?void 0:s.content.favorite)?t.length>0?a(eF(e,L,t).concat(i)):N(e):i.length>0?a(eF(e,q,i).concat(t)):N(e)}else N(e)}},N=e=>{n.includes(e)?a(n.filter(t=>t!==e)):a(n.concat([e]))},S=(0,o.useMemo)(()=>h.filter(e=>"project"===e.visibility),[h]),C=(0,o.useMemo)(()=>c.length>0?S.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())):S,[S,c]),q=(0,o.useMemo)(()=>{let e=h.filter(e=>"user"===e.visibility&&!e.content.favorite);return c.length>0?e.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())):e},[c,h]),R=(0,o.useMemo)(()=>h.filter(e=>e.content.favorite),[h]),L=(0,o.useMemo)(()=>c.length>0?R.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())):R,[R,c]);return(0,i.jsxs)(i.Fragment,{children:[g&&(0,i.jsx)(G.HJ,{}),j&&(0,i.jsx)("div",{className:"px-4",children:(0,i.jsx)(d.Z,{error:y,subject:"Failed to load SQL snippets"})}),v&&(0,i.jsxs)(i.Fragment,{children:[h.length>0&&(0,i.jsx)(G.nM,{className:"mx-2",children:(0,i.jsx)(G.nn,{name:"search-queries",placeholder:"Search queries...",onChange:e=>r(e.target.value),value:t,"aria-labelledby":"Search queries"})}),c.length>0&&0===q.length&&0===C.length&&0===L.length&&0===C.length&&(0,i.jsx)(G.Cf,{className:"mx-4",title:"No project queries found",description:"Click the New query button to create a new query",actions:(0,i.jsx)(w.z,{type:"default",onClick:()=>s(),children:"New query"})}),C.length>0&&(0,i.jsxs)(G.GZ,{className:"editor-product-menu",defaultOpen:!0,children:[(0,i.jsx)(G.Qn,{title:"Project queries"}),(0,i.jsx)(G.rt,{children:(0,i.jsx)(i.Fragment,{children:C.map(e=>(0,i.jsx)(eI,{tabInfo:e,onDeleteQuery:_,hasQueriesSelected:n.length>0},e.id))})})]}),n.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G.qs,{}),(0,i.jsxs)("div",{className:"px-4 flex items-center gap-x-2 py-2",children:[(0,i.jsxs)(w.z,{block:!0,type:"danger",onClick:()=>l(!0),children:["Delete ",n.length.toLocaleString()," quer",n.length>1?"ies":"y"]}),(0,i.jsxs)(E.u,{delayDuration:100,children:[(0,i.jsx)(E.aJ,{asChild:!0,children:(0,i.jsx)(w.z,{type:"default",onClick:()=>a([]),children:"Cancel"})}),(0,i.jsx)(E._v,{side:"bottom",children:"Clear selection"})]})]})]}),L.length>0&&(0,i.jsxs)(G.GZ,{className:"editor-product-menu",defaultOpen:!0,children:[(0,i.jsx)(G.Qn,{title:"Favorites"}),(0,i.jsx)(G.rt,{children:(0,i.jsx)(i.Fragment,{children:L.map(e=>(0,i.jsx)(eI,{tabInfo:e,isSelected:n.includes(e.id),hasQueriesSelected:n.length>0,onSelectQuery:t=>b(e.id,t),onDeleteQuery:_},e.id))})})]}),q.length>0&&(0,i.jsxs)(G.GZ,{className:"editor-product-menu",defaultOpen:!0,children:[(0,i.jsx)(G.Qn,{title:"Your queries"}),(0,i.jsx)(G.rt,{className:"editor-product-menu",children:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"space-y-0.5",children:q.map(e=>(0,i.jsx)(eI,{tabInfo:e,isSelected:n.includes(e.id),hasQueriesSelected:n.length>0,onSelectQuery:t=>b(e.id,t),onDeleteQuery:_},e.id))})})})]})]})]})};var eO=n(91179),eP=n(76541),eU=n(31634),eM=n(88883),eV=n(30339),eW=n(76141),eQ=n(63955),eB=n(30195),eK=n(18519),eG=n(69795),eY=n(41909),eH=n(22574),e$=n(6112),eX=n(61786),eJ=n(90504),e0=n(19869),e1=n(42070);let e2=e=>{var t;let{visible:n,snippets:s=[],onClose:r}=e,{ref:a}=(0,F.UO)(),l=(0,B.B0)(),[d,u]=(0,o.useState)(!1),[p,m]=(0,o.useState)(),{mutateAsync:f,isLoading:h}=(0,eG.P)(),{mutate:x,mutateAsync:g,isLoading:v}=(0,eK.L)({onError:e=>{c.ZP.error("Failed to move query: ".concat(e.message))}}),j=eB.Ry({name:eB.Z_()}),y=(0,eQ.cI)({mode:"onSubmit",reValidateMode:"onSubmit",resolver:(0,eM.F)(j),defaultValues:{name:""}}),_=Object.values(l.folders).map(e=>e.folder),b="root"===p?"Root of the editor":"new-folder"===p?"Create a new folder":null===(t=_.find(e=>e.id===p))||void 0===t?void 0:t.name,N=1===s.length&&(!s[0].folder_id&&"root"===p||s[0].folder_id===p),S=1===s.length&&(!s[0].folder_id&&"root"===p||s[0].folder_id===p),C=async e=>{if(!a)return console.error("Project ref is required");try{let t=p;if("new-folder"===p){let{id:n}=await f({projectRef:a,name:e.name});t=n}await Promise.all(s.map(async e=>{let n=null==e?void 0:e.content;if(void 0===n){let{content:t}=await (0,e_.A)({projectRef:a,id:e.id});n=t}if(void 0===n)return c.ZP.error("Failed to save snippet: Unable to retrieve snippet contents");g({projectRef:a,payload:{id:e.id,type:"sql",name:e.name,description:e.description,visibility:e.visibility,project_id:e.project_id,owner_id:e.owner_id,folder_id:"root"===p?null:t,content:n}})})),c.ZP.success("Successfully moved ".concat(1===s.length?'"'.concat(s[0].name,'"'):"".concat(s.length," snippets")," to ").concat("root"===p?"the root of the editor":b)),s.forEach(e=>{l.updateSnippet({id:e.id,snippet:{...e,folder_id:"root"===p?null:p},skipSave:!0})}),r()}catch(e){c.ZP.error("Failed to create new folder: ".concat(e.message))}};return(0,o.useEffect)(()=>{if(n&&void 0!==s){if(1===s.length){var e;m(null!==(e=s[0].folder_id)&&void 0!==e?e:"root")}else m("root");y.reset({name:""})}},[n,s]),(0,i.jsx)(eY.Vq,{open:n,onOpenChange:()=>r(),children:(0,i.jsx)(eY.cZ,{children:(0,i.jsx)(eH.l0,{...y,children:(0,i.jsxs)("form",{id:"move-snippet",onSubmit:y.handleSubmit(C),children:[(0,i.jsxs)(eY.fK,{children:[(0,i.jsxs)(eY.$N,{children:["Move ",1===s.length?'"'.concat(s[0].name,'"'):"".concat(s.length)," to a folder"]}),(0,i.jsxs)(eY.Be,{children:["Select which folder to move your quer",s.length>1?"ies":"y"," to"]})]}),(0,i.jsx)(eY.P3,{}),(0,i.jsxs)(eY.VO,{className:"py-5 flex flex-col gap-y-4",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,i.jsx)(e$._,{className:"text-foreground-light",children:"Select a folder"}),(0,i.jsxs)(eX.J2,{open:d,onOpenChange:u,modal:!1,children:[(0,i.jsx)(eX.xo,{asChild:!0,children:(0,i.jsx)(w.z,{block:!0,size:"small",type:"default",className:"pr-2 justify-between",iconRight:(0,i.jsx)(eV.Z,{className:"text-foreground-light rotate-90",strokeWidth:2,size:12}),children:(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[b,N&&" (Current)"]})})}),(0,i.jsx)(eX.yk,{className:"p-0 w-80",side:"bottom",align:"start",children:(0,i.jsxs)(eJ.mY,{children:[(0,i.jsx)(eJ.sZ,{placeholder:"Find folder..."}),(0,i.jsxs)(eJ.e8,{children:[(0,i.jsx)(eJ.rb,{children:"No folders found"}),(0,i.jsx)(eJ.fu,{children:(0,i.jsxs)(e0.x,{className:(_||[]).length>6?"h-[210px]":"",children:[(0,i.jsxs)(eJ.di,{value:"root",className:"cursor-pointer w-full justify-between",onSelect:()=>{u(!1),m("root")},onClick:()=>{u(!1),m("root")},children:[(0,i.jsxs)("span",{children:["Root of the editor",1===s.length&&null===s[0].folder_id&&" (Current)"]}),"root"===p&&(0,i.jsx)(eW.Z,{size:14})]},"root"),null==_?void 0:_.map(e=>(0,i.jsxs)(eJ.di,{value:e.id,className:"cursor-pointer w-full justify-between",onSelect:()=>{u(!1),m(e.id)},onClick:()=>{u(!1),m(e.id)},children:[(0,i.jsxs)("span",{children:[e.name,1===s.length&&s[0].folder_id===e.id&&" (Current)"]}),e.id===p&&(0,i.jsx)(eW.Z,{size:14})]},e.id))]})}),(0,i.jsx)(eJ.zz,{}),(0,i.jsx)(eJ.fu,{children:(0,i.jsxs)(eJ.di,{className:"cursor-pointer w-full justify-start gap-x-2",onSelect:e=>{u(!1),m("new-folder")},onClick:()=>{u(!1),m("new-folder")},children:[(0,i.jsx)(A.Z,{size:14,strokeWidth:1.5}),(0,i.jsx)("p",{children:"New folder"})]})})]})]})})]})]}),"new-folder"===p&&(0,i.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,i.jsx)(eH.Wi,{name:"name",control:y.control,render:e=>{let{field:t}=e;return(0,i.jsxs)(eH.xJ,{className:"flex flex-col gap-y-2",children:[(0,i.jsx)(eH.lX,{children:"Provide a name for your new folder"}),(0,i.jsx)(eH.NI,{children:(0,i.jsx)(e1.I,{autoFocus:!0,...t,autoComplete:"off",disabled:v||h})}),(0,i.jsx)(eH.zG,{})]})}})})]}),(0,i.jsxs)(eY.cN,{children:[(0,i.jsx)(w.z,{type:"default",disabled:v||h,onClick:()=>r(),children:"Cancel"}),(0,i.jsx)(w.z,{type:"primary",htmlType:"submit",disabled:S,loading:v||h,children:"Move file"})]})]})})})})};var e4=n(31696),e3=n(65467);async function e5(e,t){let{projectRef:n,ids:i}=e,{data:s,error:r}=await (0,e4.IV)("/platform/projects/{ref}/content/folders",{params:{path:{ref:n},query:{ids:i}},signal:t});if(r)throw(0,e4.S3)(r);return s}let e8=function(){let{onError:e,onSuccess:t,invalidateQueriesOnSuccess:n=!0,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,p.NL)();return(0,m.D)(e=>e5(e),{async onSuccess(e,i,r){let{projectRef:a}=i;n&&await s.invalidateQueries(e3.$.folders(a)),await (null==t?void 0:t(e,i,r))},async onError(t,n,i){void 0===e?c.ZP.error("Failed to delete folder: ".concat(t.message)):e(t,n,i)},...i})};var e9=n(36492);async function e6(e,t){let{projectRef:n,folderId:i}=e;if(void 0===n)throw Error("projectRef is required");if(i){let{data:e,error:s}=await (0,e4.U2)("/platform/projects/{ref}/content/folders/{id}",{params:{path:{ref:n,id:i}},signal:t});if(s)throw(0,e4.S3)(s);return e.data}{let{data:e,error:i}=await (0,e4.U2)("/platform/projects/{ref}/content/folders",{params:{path:{ref:n},query:{type:"sql"}},signal:t});if(i)throw(0,e4.S3)(i);return e.data}}let e7=function(e){let{projectRef:t,folderId:n}=e,{enabled:i=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,e9.a)(e3.$.folders(t,n),e=>{let{signal:i}=e;return e6({projectRef:t,folderId:n},i)},{enabled:i&&void 0!==t,...s})};var te=n(23770),tt=n(26250),tn=n(95392),ti=n(55283),ts=n(95492),tr=n(46252),ta=n(73018),tl=n(72181);let to=n(87425).ZP,tc=(0,o.forwardRef)((e,t)=>{let{level:n=1,levelPadding:s=56,isExpanded:r=!1,isBranch:a=!1,isSelected:l=!1,isLoading:c=!1,xPadding:d=16,name:u="",icon:p,isEditing:m=!1,onEditSubmit:f,...h}=e,[x,g]=(0,o.useState)(u),v=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let e=e=>{v.current&&!v.current.contains(e.target)&&(null==f||f(x))};return m&&document.addEventListener("mousedown",e),()=>{m&&document.removeEventListener("mousedown",e)}},[m]),(0,o.useEffect)(()=>{if(m){var e;null===(e=v.current)||void 0===e||e.focus()}},[m]),(0,i.jsxs)("div",{ref:t,"aria-selected":l,"aria-expanded":!m&&r,...h,className:(0,C.cn)("group relative","transition-colors","h-[28px]","flex items-center gap-3","text-sm","cursor-pointer select-none","text-foreground-light","hover:bg-control","aria-expanded:bg-control",l?"text-foreground":"",l?"!bg-selection":"","data-[state=open]:bg-control"),style:{paddingLeft:1!==n||a?n?s*(n-1)+d+0:s:d,...h.style},"data-treeview-is-branch":a,"data-treeview-level":n,children:[n&&n>1&&(0,i.jsx)("div",{style:{left:(s/2+4)*(n-1)+d},className:"absolute h-full w-px group-data-[treeview-is-branch=false]:bg-border-strong"}),l&&(0,i.jsx)("div",{className:"absolute left-0 h-full w-0.5 bg-foreground"}),a?(0,i.jsxs)(i.Fragment,{children:[c?(0,i.jsx)(tr.Z,{className:(0,C.cn)("text-foreground-muted animate-spin"),size:14}):(0,i.jsx)(eO.Z,{className:(0,C.cn)("text-foreground-muted","group-aria-selected:text-foreground-light","group-aria-expanded:text-foreground-light","transition-transform duration-200","group-aria-expanded:rotate-90"),size:14}),(0,i.jsx)(tu,{className:(0,C.cn)("transition-colors"," text-foreground-muted","group-aria-selected:text-foreground-light","group-aria-expanded:text-foreground-light"),isOpen:r,size:16,strokeWidth:1.5})]}):p||(0,i.jsx)(td,{className:(0,C.cn)("transition-colors","fill-foreground-muted","group-aria-selected:fill-foreground","w-5 h-5","-ml-0.5"),size:16,strokeWidth:1.5}),(0,i.jsx)("span",{className:(0,C.cn)(m&&"hidden","truncate text-sm"),title:u,children:u}),(0,i.jsx)("form",{autoFocus:!0,onSubmit:e=>{e.preventDefault(),null==f||f(x)},className:(0,C.cn)(!m&&"hidden"),children:(0,i.jsx)(e1.I,{ref:v,onChange:e=>{g(e.target.value)},onKeyDownCapture:e=>{"Enter"===e.key?null==f||f(x):"Escape"===e.key?(g(u),null==f||f(u)):e.stopPropagation()},className:"block w-full text-sm px-2 py-1 h-7 w",value:x})})]})}),td=(0,o.forwardRef)((e,t)=>(0,i.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_1018_49117)",children:[(0,i.jsx)("path",{d:"M20.8457 14.4531V15.6348H17.8916V14.4531H20.8457ZM18.3311 8.52539V15.6348H16.9004V8.52539H18.3311Z"}),(0,i.jsx)("path",{d:"M13.6865 14.5508L15.3857 16.084L14.4873 16.9092L12.8271 15.376L13.6865 14.5508ZM15.3564 11.5283V12.6318C15.3564 13.1429 15.2962 13.5938 15.1758 13.9844C15.0553 14.3717 14.8812 14.6956 14.6533 14.9561C14.4255 15.2132 14.1553 15.4069 13.8428 15.5371C13.5303 15.6673 13.1836 15.7324 12.8027 15.7324C12.4219 15.7324 12.0736 15.6673 11.7578 15.5371C11.4453 15.4069 11.1751 15.2132 10.9473 14.9561C10.7227 14.6956 10.5469 14.3717 10.4199 13.9844C10.2962 13.5938 10.2344 13.1429 10.2344 12.6318V11.5283C10.2344 11.0173 10.2962 10.568 10.4199 10.1807C10.5436 9.79329 10.7178 9.47103 10.9424 9.21387C11.1702 8.95345 11.4404 8.75814 11.7529 8.62793C12.0654 8.49447 12.4121 8.42773 12.793 8.42773C13.1771 8.42773 13.5254 8.49447 13.8379 8.62793C14.1504 8.75814 14.4206 8.95345 14.6484 9.21387C14.8796 9.47103 15.0553 9.79329 15.1758 10.1807C15.2962 10.568 15.3564 11.0173 15.3564 11.5283ZM13.9307 12.6318V11.5186C13.9307 11.1833 13.9062 10.8952 13.8574 10.6543C13.8086 10.4134 13.7354 10.2165 13.6377 10.0635C13.5433 9.91048 13.4245 9.79818 13.2812 9.72656C13.1413 9.65495 12.9785 9.61914 12.793 9.61914C12.6107 9.61914 12.4479 9.65495 12.3047 9.72656C12.1647 9.79818 12.0475 9.91048 11.9531 10.0635C11.8587 10.2165 11.7855 10.4134 11.7334 10.6543C11.6846 10.8952 11.6602 11.1833 11.6602 11.5186V12.6318C11.6602 12.9704 11.6846 13.2601 11.7334 13.501C11.7822 13.7419 11.8538 13.9404 11.9482 14.0967C12.0459 14.2497 12.1647 14.3636 12.3047 14.4385C12.4479 14.5101 12.6139 14.5459 12.8027 14.5459C12.985 14.5459 13.1462 14.5101 13.2861 14.4385C13.4294 14.3636 13.5482 14.2497 13.6426 14.0967C13.7402 13.9437 13.8118 13.7467 13.8574 13.5059C13.9062 13.2617 13.9307 12.9704 13.9307 12.6318Z"}),(0,i.jsx)("path",{d:"M7.47266 13.7646C7.47266 13.6377 7.46126 13.5221 7.43848 13.418C7.41569 13.3138 7.36686 13.2178 7.29199 13.1299C7.22038 13.042 7.11458 12.9541 6.97461 12.8662C6.83789 12.7783 6.65885 12.6872 6.4375 12.5928C6.17383 12.4821 5.91829 12.3649 5.6709 12.2412C5.4235 12.1143 5.20052 11.9678 5.00195 11.8018C4.80339 11.6357 4.64551 11.4404 4.52832 11.2158C4.41439 10.988 4.35742 10.721 4.35742 10.415C4.35742 10.1156 4.41113 9.84375 4.51855 9.59961C4.62923 9.35547 4.78548 9.14714 4.9873 8.97461C5.18913 8.79883 5.42513 8.66374 5.69531 8.56934C5.96875 8.47493 6.27311 8.42773 6.6084 8.42773C7.06413 8.42773 7.45801 8.52214 7.79004 8.71094C8.12533 8.89974 8.38411 9.15853 8.56641 9.4873C8.75195 9.81608 8.84473 10.1937 8.84473 10.6201H7.41895C7.41895 10.4183 7.38965 10.2409 7.33105 10.0879C7.27572 9.93164 7.1862 9.80957 7.0625 9.72168C6.9388 9.63379 6.7793 9.58984 6.58398 9.58984C6.40169 9.58984 6.25033 9.62728 6.12988 9.70215C6.0127 9.77376 5.9248 9.87305 5.86621 10C5.81087 10.1237 5.7832 10.2637 5.7832 10.4199C5.7832 10.5371 5.81087 10.6429 5.86621 10.7373C5.9248 10.8285 6.00456 10.9115 6.10547 10.9863C6.20638 11.0579 6.3252 11.1279 6.46191 11.1963C6.60189 11.2646 6.75488 11.3314 6.9209 11.3965C7.24316 11.5234 7.52799 11.6634 7.77539 11.8164C8.02279 11.9661 8.22949 12.1354 8.39551 12.3242C8.56152 12.5098 8.68685 12.7197 8.77148 12.9541C8.85612 13.1885 8.89844 13.4554 8.89844 13.7549C8.89844 14.0511 8.84635 14.3213 8.74219 14.5654C8.64128 14.8063 8.49316 15.0146 8.29785 15.1904C8.10254 15.363 7.86654 15.4964 7.58984 15.5908C7.31641 15.6852 7.01042 15.7324 6.67188 15.7324C6.3431 15.7324 6.03223 15.6868 5.73926 15.5957C5.44629 15.5013 5.1875 15.3597 4.96289 15.1709C4.74154 14.9788 4.56738 14.7363 4.44043 14.4434C4.31348 14.1471 4.25 13.7972 4.25 13.3936H5.68066C5.68066 13.6084 5.70182 13.7923 5.74414 13.9453C5.78646 14.0951 5.85156 14.2155 5.93945 14.3066C6.02734 14.3945 6.13477 14.4613 6.26172 14.5068C6.39193 14.5492 6.54004 14.5703 6.70605 14.5703C6.89486 14.5703 7.0446 14.5345 7.15527 14.4629C7.26921 14.3913 7.35059 14.2952 7.39941 14.1748C7.44824 14.0544 7.47266 13.9176 7.47266 13.7646Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 5.73438H4.5C3.11929 5.73438 2 6.85366 2 8.23438V16.5039C2 17.8846 3.11929 19.0039 4.5 19.0039H20.5C21.8807 19.0039 23 17.8846 23 16.5039V8.23438C23 6.85366 21.8807 5.73438 20.5 5.73438ZM4.5 4.23438C2.29086 4.23438 0.5 6.02524 0.5 8.23438V16.5039C0.5 18.713 2.29086 20.5039 4.5 20.5039H20.5C22.7091 20.5039 24.5 18.713 24.5 16.5039V8.23438C24.5 6.02524 22.7091 4.23438 20.5 4.23438H4.5Z"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_1018_49117",children:(0,i.jsx)("rect",{width:"24",height:"24",transform:"translate(0.5 0.269531)"})})})]})),tu=(0,o.forwardRef)((e,t)=>{let{isOpen:n,...s}=e,r=n?ta.Z:tl.Z;return(0,i.jsx)(r,{ref:t,...s})});var tp=n(81384);let tm={id:0,name:"",parent:null,children:[]},tf=e=>{var t,n;if(void 0===e)return[tm];let{folders:i,contents:s}=e,r=(null==i?void 0:i.map(e=>{var t;let{id:n,name:i}=e;return{id:n,name:i,parent:0,isBranch:!0,children:null!==(t=null==s?void 0:s.filter(e=>e.folder_id===n).map(e=>e.id))&&void 0!==t?t:[],metadata:e}}))||[],a=(null==s?void 0:s.map(e=>{let{id:t,name:n,folder_id:i}=e;return{id:t,name:n,parent:null!=i?i:0,children:[],metadata:e}}))||[];return[{id:0,name:"",parent:null,children:[...null===(t=i||[])||void 0===t?void 0:t.map(e=>e.id),...null===(n=(s||[]).filter(e=>!e.folder_id))||void 0===n?void 0:n.map(e=>e.id)]},...r,...a]};var th=n(86503),tx=n(16826),tg=n(93885),tv=n(7601),tj=n(7968);let ty=tv.fC,t_=tv.xz;tv.ZA,tv.Uv,tv.Tr,tv.Ee,o.forwardRef((e,t)=>{let{className:n,inset:s,children:r,...a}=e;return(0,i.jsxs)(tv.fF,{ref:t,className:(0,C.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-xs outline-none focus:bg-selection focus:text-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",s&&"pl-8",n),...a,children:[r,(0,i.jsx)(eO.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=tv.fF.displayName,o.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,i.jsx)(tv.tu,{ref:t,className:(0,C.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-overlay p-1 text-foreground-light shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...s})}).displayName=tv.tu.displayName;let tb=o.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,i.jsx)(tv.Uv,{children:(0,i.jsx)(tv.VY,{ref:t,className:(0,C.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-overlay p-1 text-foreground-light shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...s})})});tb.displayName=tv.VY.displayName;let tN=o.forwardRef((e,t)=>{let{className:n,inset:s,...r}=e;return(0,i.jsx)(tv.ck,{ref:t,className:(0,C.cn)("relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-xs outline-none focus:bg-selection focus:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",n),...r})});tN.displayName=tv.ck.displayName,o.forwardRef((e,t)=>{let{className:n,children:s,checked:r,...a}=e;return(0,i.jsxs)(tv.oC,{ref:t,className:(0,C.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-xs outline-none focus:bg-selection focus:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:r,...a,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(tv.wU,{children:(0,i.jsx)(eW.Z,{className:"h-4 w-4"})})}),s]})}).displayName=tv.oC.displayName,o.forwardRef((e,t)=>{let{className:n,children:s,...r}=e;return(0,i.jsxs)(tv.Rk,{ref:t,className:(0,C.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-xs outline-none focus:bg-selection focus:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...r,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(tv.wU,{children:(0,i.jsx)(tj.Z,{className:"h-2 w-2 fill-current"})})}),s]})}).displayName=tv.Rk.displayName,o.forwardRef((e,t)=>{let{className:n,inset:s,...r}=e;return(0,i.jsx)(tv.__,{ref:t,className:(0,C.cn)("px-2 py-1.5 text-xs text-foreground-light",s&&"pl-8",n),...r})}).displayName=tv.__.displayName;let tw=o.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,i.jsx)(tv.Z0,{ref:t,className:(0,C.cn)("-mx-1 my-1 h-px bg-border",n),...s})});tw.displayName=tv.Z0.displayName;let tS=e=>{let{element:t,isBranch:n,isExpanded:s,level:r,status:a,isSelected:l,isMultiSelected:d,getNodeProps:u,onSelectCreate:p,onSelectDelete:m,onSelectRename:f,onSelectMove:h,onSelectShare:x,onSelectUnshare:g,onSelectDownload:v,onSelectCopyPersonal:j,onEditSave:y,onMultiSelect:_}=e,b=(0,T.useRouter)(),{id:N,ref:w}=(0,tg.U)(),{profile:S}=(0,W.Un)(),{className:C,onClick:E}=u(),q=(0,B.B0)(),[R,L]=(0,o.useState)(!1),k=(null==S?void 0:S.id)===(null==t?void 0:t.metadata.owner_id),I="project"===t.metadata.visibility,Z=(0,U.Xo)(z.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==S?void 0:S.id},subject:{id:null==S?void 0:S.id}}),D=async e=>{if(!w)return console.error("Project ref is required");try{L(!0);let{contents:t}=await e6({projectRef:w,folderId:e});null==t||t.forEach(e=>{q.addSnippet({projectRef:w,snippet:e})})}catch(e){c.ZP.error("Failed to retrieve folder contents: ".concat(e.message))}finally{L(!1)}};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(ty,{modal:!1,children:[(0,i.jsx)(t_,{asChild:!0,children:(0,i.jsx)(tc,{level:r,xPadding:16,name:t.name,className:C,isExpanded:s,isBranch:n,isSelected:l||N===t.id,isEditing:"editing"===a,isLoading:R||"saving"===a,onEditSubmit:e=>{void 0!==y&&y(e)},onClick:e=>{n?(E(e),s||D(t.id)):e.shiftKey&&"new"!==N?null==_||_(t.id):b.push("/project/".concat(w,"/sql/").concat(t.id))}})}),(0,i.jsx)(tb,{onCloseAutoFocus:e=>e.stopPropagation(),children:n?(0,i.jsxs)(i.Fragment,{children:[void 0!==p&&(0,i.jsxs)(tN,{className:"gap-x-2",onSelect:()=>p(),onFocusCapture:e=>e.stopPropagation(),children:[(0,i.jsx)(A.Z,{size:14}),"Create new snippet"]}),void 0!==f&&k&&(0,i.jsxs)(tN,{className:"gap-x-2",onSelect:()=>f(),onFocusCapture:e=>e.stopPropagation(),children:[(0,i.jsx)(eq.Z,{size:14}),"Rename folder"]}),void 0!==m&&k&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tw,{}),(0,i.jsxs)(tN,{className:"gap-x-2",onSelect:()=>m(),onFocusCapture:e=>e.stopPropagation(),children:[(0,i.jsx)(ez.Z,{size:14}),"Delete folder"]})]})]}):d?(0,i.jsxs)(i.Fragment,{children:[void 0!==h&&(0,i.jsxs)(tN,{className:"gap-x-2",onSelect:()=>h(),onFocusCapture:e=>e.stopPropagation(),children:[(0,i.jsx)(th.Z,{size:14}),"Move selected queries"]}),(0,i.jsx)(tw,{}),void 0!==m&&(0,i.jsxs)(tN,{className:"gap-x-2",onSelect:()=>m(),onFocusCapture:e=>e.stopPropagation(),children:[(0,i.jsx)(ez.Z,{size:14}),"Delete selected queries"]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tN,{asChild:!0,className:"gap-x-2",onSelect:()=>{},onFocusCapture:e=>e.stopPropagation(),children:(0,i.jsxs)(eo(),{href:"/project/".concat(w,"/sql/").concat(t.id),target:"_blank",rel:"noreferrer",children:[(0,i.jsx)(ea.Z,{size:14}),"Open in new tab"]})}),(0,i.jsx)(tw,{}),void 0!==f&&k&&(0,i.jsxs)(tN,{className:"gap-x-2",onSelect:()=>f(),onFocusCapture:e=>e.stopPropagation(),children:[(0,i.jsx)(eq.Z,{size:14}),"Rename query"]}),void 0!==h&&k&&(0,i.jsxs)(tN,{className:"gap-x-2",onSelect:()=>h(),onFocusCapture:e=>e.stopPropagation(),children:[(0,i.jsx)(th.Z,{size:14}),"Move query"]}),void 0!==x&&!I&&Z&&(0,i.jsxs)(tN,{className:"gap-x-2",onSelect:()=>x(),onFocusCapture:e=>e.stopPropagation(),children:[(0,i.jsx)(eR.Z,{size:14}),"Share query with team"]}),void 0!==g&&I&&k&&(0,i.jsxs)(tN,{className:"gap-x-2",onSelect:()=>g(),onFocusCapture:e=>e.stopPropagation(),children:[(0,i.jsx)(tx.Z,{size:14}),"Unshare query with team"]}),void 0!==j&&I&&!k&&Z&&(0,i.jsxs)(tN,{className:"gap-x-2",onSelect:()=>j(),onFocusCapture:e=>e.stopPropagation(),children:[(0,i.jsx)(eL.Z,{size:14}),"Duplicate personal copy"]}),void 0!==v&&F.Qy&&(0,i.jsxs)(tN,{className:"gap-x-2",onSelect:()=>v(),onFocusCapture:e=>e.stopPropagation(),children:[(0,i.jsx)(ek.Z,{size:14}),"Download as migration file"]}),void 0!==m&&k&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tw,{}),(0,i.jsxs)(tN,{className:"gap-x-2",onSelect:()=>m(),children:[(0,i.jsx)(ez.Z,{size:14}),"Delete query"]})]})]})})]})})},tC=e=>{var t,n,s;let{searchText:r}=e,a=r.trim(),l=(0,T.useRouter)(),{profile:d}=(0,W.Un)(),u=(0,y.V)(),{ref:p,id:m}=(0,F.UO)(),f=(0,B.B0)(),[h]=(0,te._)("sql-editor-sort","inserted_at"),[x,g]=(0,o.useState)(!1),[v,j]=(0,o.useState)(!1),[_,b]=(0,o.useState)(!1),[N,w]=(0,o.useState)(!1),[S,C]=(0,o.useState)(!1),[E,R]=(0,o.useState)(!0),[L,k]=(0,o.useState)([]),[z,A]=(0,o.useState)(),[I,Z]=(0,o.useState)(),[U,M]=(0,o.useState)(),[V,Q]=(0,o.useState)(),[K,G]=(0,o.useState)(),Y="flex items-center gap-x-2 px-4 [&[data-state=open]>svg]:!rotate-90",H="text-foreground-light transition-transform duration-200",$="text-foreground-light font-mono text-sm uppercase",X=Object.values(f.folders).map(e=>e.folder),ee=f.sortedSnippets.filter(e=>!(a.length>0)||e.name.toLowerCase().includes(a.toLowerCase())),et=ee.filter(e=>"user"===e.visibility),es=Object.keys(f.snippets).length,er=0===X.length&&0===es?[tm]:tf({folders:X,contents:et}),ea=f.sortedFavoriteSnippets,el=ea.length,eo=0===el?[tm]:tf({contents:ea}),ec=ee.filter(e=>"project"===e.visibility),ed=ec.length,eu=0===ed?[tm]:tf({contents:ec});e7({projectRef:p},{refetchOnWindowFocus:!1,staleTime:3e5,onSuccess:e=>{void 0!==p&&f.initializeRemoteSnippets({projectRef:p,data:e,sort:h})}}),J(p,{onSuccess(e){if(void 0!==p){let t=e.snippets.filter(e=>e.content.favorite);f.initializeFavoriteSnippets({projectRef:p,snippets:t})}}});let{mutate:ep,isLoading:ef}=(0,P.z)({onError:(e,t)=>{e.message.includes("Contents not found")?eg(t.ids):c.ZP.error("Failed to delete query: ".concat(e.message))}}),{mutate:eh,isLoading:ex}=e8({onSuccess:(e,t)=>{c.ZP.success("Successfully deleted folder");let{ids:n}=t;f.removeFolder(n[0]),G(void 0)}}),eg=e=>{j(!1),k([]);let t=Object.keys(f.snippets).filter(t=>!e.includes(t));0===t.length?l.push("/project/".concat(p,"/sql/new")):e.includes(m)&&l.push("/project/".concat(p,"/sql/").concat(t[0])),e.length>0&&e.forEach(e=>f.removeSnippet(e))},ev=async e=>{if(!d)return console.error("Profile is required");if(!u)return console.error("Project is required");if(!p)return console.error("Project ref is required");if(!m)return console.error("Snippet ID is required");let t="";if("content"in e)t=e.content.sql;else{let{content:n}=await (0,e_.A)({projectRef:p,id:e.id});t=n.sql}let n=(0,O.wI)({id:(0,tt.Z)(),name:e.name,sql:t,owner_id:null==d?void 0:d.id,project_id:null==u?void 0:u.id});f.addSnippet({projectRef:p,snippet:n}),f.addNeedsSaving(n.id),l.push("/project/".concat(p,"/sql/").concat(n.id))},ej=async()=>{if(!p)return console.error("Project ref is required");if(void 0===K)return console.error("No folder is selected");let e=ee.filter(e=>e.folder_id===K.id);if(e.length>0){let t=e.map(e=>e.id);ep({projectRef:p,ids:t},{onSuccess:()=>{t.forEach(e=>f.removeSnippet(e)),eg(t),eh({projectRef:p,ids:[null==K?void 0:K.id]})}})}else eh({projectRef:p,ids:[null==K?void 0:K.id]})},ey=e=>{let t=ee.map(e=>e.id),n=t.indexOf(m),i=t.indexOf(e),s=Math.min(n,i),r=Math.max(n,i),a=[],l=ee[s].folder_id===ee[r].folder_id;for(let e=s;e<=r;e++)l&&ee[e].folder_id===ee[s].folder_id&&a.push(ee[e]);k(a)};return(0,o.useEffect)(()=>{void 0!==m&&f.loaded&&void 0!==f.snippets[m]&&"project"===f.snippets[m].snippet.visibility&&C(!0)},[m,f.loaded]),(0,o.useEffect)(()=>{k([])},[m]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tn.Z,{}),(0===el&&0===a.length||el>0)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ti.zF,{open:N,onOpenChange:w,children:[(0,i.jsxs)(ti.wy,{className:Y,children:[(0,i.jsx)(eO.Z,{size:16,className:H}),(0,i.jsxs)("span",{className:$,children:["Favorites",el>0&&" (".concat(el,")")]})]}),(0,i.jsx)(ti.Fw,{className:"pt-2",children:0===el?(0,i.jsx)("div",{className:"mx-4",children:(0,i.jsxs)(ts.bZ,{className:"p-3",children:[(0,i.jsx)(ts.Cd,{className:"text-xs",children:"No favorite queries"}),(0,i.jsxs)(ts.X,{className:"text-xs ",children:["Save a query to favorites for easy accessbility by clicking the"," ",(0,i.jsx)(eP.Z,{size:12,className:"inline-block relative align-center -top-[1px]"})," ","icon."]})]})}):(0,i.jsx)(to,{data:eo,"aria-label":"favorite-snippets",nodeRenderer:e=>{let{element:t,...n}=e;return(0,i.jsx)(tS,{...n,element:t,onSelectDelete:()=>{j(!0),k([t.metadata])},onSelectRename:()=>{b(!0),M(t.metadata)},onSelectDownload:()=>{Q(t.metadata)},onSelectCopyPersonal:()=>{ev(t.metadata)},onSelectUnshare:()=>{Z(t.metadata)}})}})})]}),(0,i.jsx)(tn.Z,{})]}),(0===ed&&0===a.length||ed>0)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(ti.zF,{open:S,onOpenChange:C,children:[(0,i.jsxs)(ti.wy,{className:Y,children:[(0,i.jsx)(eO.Z,{size:16,className:H}),(0,i.jsxs)("span",{className:$,children:["Shared",ed>0&&" (".concat(ed,")")]})]}),(0,i.jsx)(ti.Fw,{className:"pt-2",children:0===ed?(0,i.jsx)("div",{className:"mx-4",children:(0,i.jsxs)(ts.bZ,{className:"p-3",children:[(0,i.jsx)(ts.Cd,{className:"text-xs",children:"No shared queries"}),(0,i.jsx)(ts.X,{className:"text-xs ",children:"Share queries with your team by right-clicking on the query."})]})}):(0,i.jsx)(to,{data:eu,"aria-label":"project-level-snippets",nodeRenderer:e=>{let{element:t,...n}=e;return(0,i.jsx)(tS,{...n,element:t,onSelectDelete:()=>{j(!0),k([t.metadata])},onSelectRename:()=>{b(!0),M(t.metadata)},onSelectDownload:()=>{Q(t.metadata)},onSelectCopyPersonal:()=>{ev(t.metadata)},onSelectUnshare:()=>{Z(t.metadata)}})}})})]}),(0,i.jsx)(tn.Z,{})]}),(0,i.jsxs)(ti.zF,{open:E,onOpenChange:R,children:[(0,i.jsxs)(ti.wy,{className:Y,children:[(0,i.jsx)(eO.Z,{size:16,className:H}),(0,i.jsxs)("span",{className:$,children:["PRIVATE",es>0&&" (".concat(es,")")]})]}),(0,i.jsx)(ti.Fw,{className:"pt-2",children:f.loaded[p]?0===X.length&&0===es?(0,i.jsx)("div",{className:"mx-4",children:(0,i.jsxs)(ts.bZ,{className:"p-3",children:[(0,i.jsx)(ts.Cd,{className:"text-xs",children:"No queries created yet"}),(0,i.jsx)(ts.X,{className:"text-xs",children:"Queries will be automatically saved once you start writing in the editor."})]})}):(0,i.jsx)(to,{multiSelect:!0,togglableSelect:!0,clickAction:"EXCLUSIVE_SELECT",data:er,selectedIds:L.map(e=>e.id),"aria-label":"private-snippets",nodeRenderer:e=>{let{element:t,...n}=e;return(0,i.jsx)(tS,{...n,element:t,isMultiSelected:L.length>1,status:n.isBranch?f.folders[t.id].status:"idle",onMultiSelect:ey,onSelectCreate:()=>{if(d&&u){let e=(0,O.wI)({id:(0,tt.Z)(),name:D.$C,owner_id:null==d?void 0:d.id,project_id:null==u?void 0:u.id,folder_id:t.id,sql:""});f.addSnippet({projectRef:u.ref,snippet:e}),l.push("/project/".concat(p,"/sql/").concat(e.id))}},onSelectDelete:()=>{n.isBranch?G(t.metadata):(j(!0),0===L.length&&k([t.metadata]))},onSelectRename:()=>{n.isBranch?f.editFolder(t.id):(b(!0),M(t.metadata))},onSelectMove:()=>{g(!0),0===L.length&&k([t.metadata])},onSelectDownload:()=>Q(t.metadata),onSelectShare:()=>A(t.metadata),onEditSave:e=>{0===e.length?f.removeFolder(t.id):f.saveFolder({id:t.id,name:e})}})}}):(0,i.jsx)("div",{className:"px-4",children:(0,i.jsx)(tp.A,{})})})]}),(0,i.jsx)(tn.Z,{}),(0,i.jsx)(eb,{snippet:U,visible:_,onCancel:()=>b(!1),onComplete:()=>b(!1)}),(0,i.jsx)(e2,{snippets:L,visible:x,onClose:()=>{g(!1),k([])}}),(0,i.jsx)(em,{id:null!==(s=null==V?void 0:V.id)&&void 0!==s?s:"",visible:void 0!==V,onCancel:()=>Q(void 0)}),(0,i.jsx)(q.Z,{size:"medium",title:"Confirm to share query: ".concat(null==z?void 0:z.name),confirmLabel:"Share query",confirmLabelLoading:"Sharing query",visible:void 0!==z,onCancel:()=>A(void 0),onConfirm:()=>{if(!z)return console.error("Snippet ID is required");f.shareSnippet(z.id,"project"),A(void 0),C(!0)},alert:{title:"This SQL query will become public to all team members",description:"Anyone with access to the project can view it"},children:(0,i.jsxs)("ul",{className:"text-sm text-foreground-light space-y-5",children:[(0,i.jsxs)("li",{className:"flex gap-3",children:[(0,i.jsx)(en.Z,{}),(0,i.jsx)("span",{children:"Project members will have read-only access to this query."})]}),(0,i.jsxs)("li",{className:"flex gap-3",children:[(0,i.jsx)(ei.Z,{}),(0,i.jsx)("span",{children:"Anyone will be able to duplicate it to their personal snippets."})]})]})}),(0,i.jsx)(q.Z,{size:"medium",title:"Confirm to unshare query: ".concat(null==I?void 0:I.name),confirmLabel:"Unshare query",confirmLabelLoading:"Unsharing query",visible:void 0!==I,onCancel:()=>Z(void 0),onConfirm:()=>{if(!I)return console.error("Snippet ID is required");f.shareSnippet(I.id,"user"),Z(void 0),R(!0)},alert:{title:"This SQL query will no longer be public to all team members",description:"Only you will have access to this query"},children:(0,i.jsx)("ul",{className:"text-sm text-foreground-light space-y-5",children:(0,i.jsxs)("li",{className:"flex gap-3",children:[(0,i.jsx)(eU.Z,{}),(0,i.jsx)("span",{children:"Project members will no longer be able to view this query."})]})})}),(0,i.jsx)(q.Z,{size:"small",title:"Confirm to delete ".concat(1===L.length?"query":"".concat(L.length.toLocaleString()," quer").concat(L.length>1?"ies":"y")),confirmLabel:"Delete ".concat(L.length.toLocaleString()," quer").concat(L.length>1?"ies":"y"),confirmLabelLoading:"Deleting query",loading:ef,visible:v,variant:"destructive",onCancel:()=>{j(!1),k([])},onConfirm:()=>{if(!p)return console.error("Project ref is required");ep({projectRef:p,ids:L.map(e=>e.id)},{onSuccess:e=>{c.ZP.success("Successfully deleted ".concat(L.length.toLocaleString()," quer").concat(L.length>1?"ies":"y")),eg(e)}})},alert:(null===(t=L[0])||void 0===t?void 0:t.visibility)==="project"?{title:"This SQL snippet will be lost forever",description:"Deleting this query will remove it for all members of the project team."}:void 0,children:(0,i.jsxs)("p",{className:"text-sm",children:["This action cannot be undone."," ",1===L.length?"Are you sure you want to delete '".concat(null===(n=L[0])||void 0===n?void 0:n.name,"'?"):"Are you sure you want to delete the selected ".concat(L.length," quer").concat(L.length>1?"ies":"y","?")]})}),(0,i.jsx)(q.Z,{size:"small",title:"Confirm to delete folder",confirmLabel:"Delete folder",confirmLabelLoading:"Deleting folder",loading:ex,visible:void 0!==K,variant:"destructive",onCancel:()=>G(void 0),onConfirm:ej,alert:{title:"This action cannot be undone",description:"All SQL snippets within the folder will be permanently removed, and cannot be recovered."},children:(0,i.jsxs)("p",{className:"text-sm",children:["Are you sure you want to delete the folder '",null==K?void 0:K.name,"'?"]})})]})},tE=e=>{let{onViewOngoingQueries:t}=e,n=(0,T.useRouter)(),{profile:s}=(0,W.Un)(),r=(0,y.V)(),{ref:a,id:l}=(0,F.UO)(),[d,u]=(0,o.useState)(""),[p,m]=(0,o.useState)(!1),[f,h]=(0,o.useState)([]),x=(0,Q.W2)(),g=(0,B.B0)(),v=(0,M.P)("sqlFolderOrganization"),{mutate:j,isLoading:_}=(0,P.z)({onSuccess:e=>b(e),onError:(e,t)=>{404===e.code&&e.message.includes("Content not found")?b(t.ids):c.ZP.error("Failed to delete queries: ".concat(e.message))}}),b=e=>{var t;m(!1),h([]),e.length>0&&e.forEach(e=>x.removeSnippet(e));let i=(null!==(t=x.orders[a])&&void 0!==t?t:[]).filter(t=>!e.includes(t));0===i.length?n.push("/project/".concat(a,"/sql/new")):e.includes(l)&&n.push("/project/".concat(a,"/sql/").concat(i[0]))},N=(0,U.Xo)(z.KA.CREATE,"user_content",{resource:{type:"sql",owner_id:null==s?void 0:s.id},subject:{id:null==s?void 0:s.id}}),S=()=>{if(!a)return console.error("Project ref is required");g.addNewFolder({projectRef:a})},C=async()=>{if(!a)return console.error("Project ref is required");if(!r)return console.error("Project is required");if(!s)return console.error("Profile is required");if(!N)return(0,c.ZP)("Your queries will not be saved as you do not have sufficient permissions");try{if(v){let e=(0,O.wI)({id:(0,V.k$)(),name:D.$C,owner_id:s.id,project_id:r.id,sql:""});g.addSnippet({projectRef:a,snippet:e}),n.push("/project/".concat(a,"/sql/").concat(e.id)),u("")}else{let e=(0,O.UA)({id:(0,V.k$)(),name:D.$C,owner_id:null==s?void 0:s.id,project_id:null==r?void 0:r.id});x.addSnippet(e,a),n.push("/project/".concat(a,"/sql/").concat(e.id)),u("")}}catch(e){c.ZP.error("Failed to create new query: ".concat(e.message))}},E=async()=>{if(!a)return console.error("Project ref is required");j({projectRef:a,ids:f})};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"h-full flex flex-col justify-between",children:[(0,i.jsxs)("div",{className:"mt-4 mb-2 flex flex-col gap-y-4",children:[(0,i.jsx)("div",{className:"mx-4 flex items-center justify-between gap-x-2",children:v?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G.nM,{className:"w-full p-0 gap-0",children:(0,i.jsx)(G.nn,{name:"search-queries",placeholder:"Search queries...","aria-labelledby":"Search queries",value:d,onChange:e=>u(e.target.value),children:(0,i.jsxs)(G.ZY,{value:g.order,onValueChange:e=>g.setOrder(e),children:[(0,i.jsx)(G.IR,{value:"name",children:"Alphabetical"},"name"),(0,i.jsx)(G.IR,{value:"inserted_at",children:"Created At"},"inserted_at")]})})}),(0,i.jsxs)(K.h_,{children:[(0,i.jsx)(K.$F,{asChild:!0,children:(0,i.jsx)(w.z,{type:"default",icon:(0,i.jsx)(A.Z,{className:"text-foreground"}),className:"w-[26px]"})}),(0,i.jsxs)(K.AW,{align:"end",side:"bottom",className:"w-48",children:[(0,i.jsxs)(K.Xi,{className:"gap-x-2",onClick:()=>C(),children:[(0,i.jsx)(I.Z,{size:14}),"Create a new snippet"]}),(0,i.jsxs)(K.Xi,{className:"gap-x-2",onClick:()=>S(),children:[(0,i.jsx)(Z.Z,{size:14}),"Create a new folder"]})]})]})]}):(0,i.jsx)(w.z,{block:!0,type:"default",className:"justify-start",onClick:()=>C(),icon:(0,i.jsx)(A.Z,{className:"text-foreground-muted",strokeWidth:1,size:14}),children:"New query"})}),(0,i.jsxs)("div",{className:"px-2",children:[(0,i.jsx)(G.DS,{title:"Templates",isActive:n.asPath==="/project/".concat(a,"/sql/templates"),href:"/project/".concat(a,"/sql/templates"),children:"Templates"}),(0,i.jsx)(G.DS,{title:"Quickstarts",isActive:n.asPath==="/project/".concat(a,"/sql/quickstarts"),href:"/project/".concat(a,"/sql/quickstarts"),children:"Quickstarts"})]}),v?(0,i.jsx)(tC,{searchText:d}):(0,i.jsx)(eD,{searchText:d,setSearchText:u,selectedQueries:f,handleNewQuery:C,setSelectedQueries:h,setShowDeleteModal:m})]}),(0,i.jsx)("div",{className:"p-4 border-t sticky bottom-0 bg-studio",children:(0,i.jsx)(w.z,{block:!0,type:"default",onClick:t,children:"View running queries"})})]}),(0,i.jsx)(q.Z,{title:"Confirm to delete query",confirmLabel:"Delete ".concat(f.length.toLocaleString()," quer").concat(f.length>1?"ies":"y"),confirmLabelLoading:"Deleting query",size:"medium",loading:_,visible:p,onConfirm:E,onCancel:()=>m(!1),variant:"destructive",alert:{title:"This action cannot be undone",description:"The selected SQL snippets cannot be recovered once deleted"},children:(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:["Are you sure you want to delete the selected ",f.length," quer",f.length>1?"ies":"y","?"]})})]})};var tq=(0,L.Q)(e=>{let{title:t,children:n}=e,[s,r]=(0,o.useState)(!1),a=(0,o.useMemo)(()=>(0,i.jsx)(tE,{onViewOngoingQueries:()=>r(!0)},"sql-editor-menu"),[]);return(0,i.jsxs)(k.Z,{title:t||"SQL",product:"SQL Editor",productMenu:a,isBlocking:!1,resizableSidebar:!0,children:[n,(0,i.jsx)(R,{visible:s,onClose:()=>r(!1)})]})})},79735:function(e,t,n){"use strict";var i=n(52322),s=n(2784),r=n(28879),a=n.n(r),l=n(17699),o=n(52576),c=n(83039),d=n(504),u=n(27118),p=n(52406),m=n(8159),f=n(98578),h=n(32854),x=n(51428),g=n(74244),v=n(27029);t.Z=e=>{var t,n,r;let{data:j,yAxisKey:y,xAxisKey:_,format:b,customDateFormat:N=h.EE.FULL,title:w,highlightedValue:S,highlightedLabel:C,displayDateInUtc:E,minimalHeader:q,valuePrecision:R,className:L="",size:k="normal",emptyStateMessage:z,onBarClick:A,showLegend:I=!1,xAxisIsDate:Z=!0,XAxisProps:T,YAxisProps:F,showGrid:D=!1}=e,{Container:O}=(0,g.D3)(k),[P,U]=(0,s.useState)(null),M=T||{interval:j.length-2,angle:0,tick:!1},V=F||{tickFormatter:e=>(0,g.V2)(e,R),tick:!1,width:0},W=e=>E?a()(e).utc():a()(e),Q=function(){if(!Z){var e;return P?null===(e=j[P])||void 0===e?void 0:e[_]:C}return null!==P&&j&&void 0!==j[P]&&W(j[P][_]).format(N)||C}(),B=null!==P?null===(t=j[P])||void 0===t?void 0:t[y]:S;return 0===j.length?(0,i.jsx)(v.Z,{message:z,description:"It may take up to 24 hours for data to show",size:k,className:L,attribute:w,format:b}):(0,i.jsxs)("div",{className:["flex flex-col gap-y-3",L].join(" "),children:[(0,i.jsx)(x.Z,{title:w,format:b,customDateFormat:N,highlightedValue:"number"==typeof B?(0,g.V2)(B,R):B,highlightedLabel:Q,minimalHeader:q}),(0,i.jsx)(O,{children:(0,i.jsxs)(l.v,{data:j,className:"overflow-visible",onMouseMove:e=>{e.activeTooltipIndex!==P&&U(e.activeTooltipIndex)},onMouseLeave:()=>U(null),onClick:e=>{var t,n;let i=null==e?void 0:null===(n=e.activePayload)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.payload;A&&A(i,e)},children:[I&&(0,i.jsx)(o.D,{}),D&&(0,i.jsx)(c.q,{stroke:h.ZE.AXIS}),(0,s.createElement)(d.B,{...V,axisLine:{stroke:h.ZE.AXIS},tickLine:{stroke:h.ZE.AXIS},key:y}),(0,s.createElement)(u.K,{...M,axisLine:{stroke:h.ZE.AXIS},tickLine:{stroke:h.ZE.AXIS},key:_}),(0,i.jsx)(p.u,{content:()=>null}),(0,i.jsx)(m.$,{dataKey:y,fill:h.ZE.GREEN_1,animationDuration:300,maxBarSize:48,children:null==j?void 0:j.map((e,t)=>(0,i.jsx)(f.b,{className:"transition-all duration-300 ".concat(A?"cursor-pointer":""),fill:P===t||null===P?h.ZE.GREEN_1:h.ZE.GREEN_2,enableBackground:12},"cell-".concat(t)))})]})}),j&&(0,i.jsxs)("div",{className:"text-foreground-lighter -mt-9 flex items-center justify-between text-xs",children:[(0,i.jsx)("span",{children:Z?W(j[0][_]).format(N):j[0][_]}),(0,i.jsx)("span",{children:Z?W(null===(n=j[(null==j?void 0:j.length)-1])||void 0===n?void 0:n[_]).format(N):null===(r=j[(null==j?void 0:j.length)-1])||void 0===r?void 0:r[_]})]})]})}},51428:function(e,t,n){"use strict";var i=n(52322);t.Z=e=>{let{format:t,highlightedValue:n,highlightedLabel:s,title:r,minimalHeader:a=!1}=e,l=(0,i.jsx)("h3",{className:"text-foreground-lighter "+(a?"text-xs":"text-sm"),children:r}),o=(0,i.jsxs)("h5",{className:"text-foreground text-xl font-normal ".concat(a?"text-base":"text-2xl"),children:[void 0!==n&&String(n),"seconds"===t?" ":"",(0,i.jsx)("span",{className:"text-lg",children:"function"==typeof t?t(n):t})]}),c=(0,i.jsx)("h5",{className:"text-foreground-lighter text-xs",children:s});return a?(0,i.jsxs)("div",{className:"flex flex-row items-center gap-x-4",style:{minHeight:"1.8rem"},children:[r&&l,(0,i.jsxs)("div",{className:"flex flex-row items-baseline gap-x-2",children:[void 0!==n&&o,c]})]}):(0,i.jsxs)("div",{className:"h-16",children:[r&&l,void 0!==n&&o,c]})}},32854:function(e,t,n){"use strict";var i,s;n.d(t,{EE:function(){return i},FK:function(){return a},Ki:function(){return l},ZE:function(){return r}});let r={TICK:"hsl(var(--background-overlay-hover))",AXIS:"hsl(var(--background-overlay-hover))",GREEN_1:"hsl(var(--brand-default))",GREEN_2:"hsl(var(--brand-500))"},a=e=>e.map(e=>{var t;let n=null!==(t=({slate:11})[e])&&void 0!==t?t:9;return{lighter:"var(--colors-".concat(e).concat(n-1,")"),base:"var(--colors-".concat(e).concat(n,")"),darker:"var(--colors-".concat(e).concat(n+1,")")}}),l=["brand","slate","blue","yellow","indigo"];(s=i||(i={})).FULL="MMM D, YYYY, hh:mma",s.DATE_ONLY="MMM D, YYYY"},74244:function(e,t,n){"use strict";n.d(t,{Bh:function(){return m},D3:function(){return h},Hx:function(){return f},V2:function(){return u},ww:function(){return x}});var i=n(52322),s=n(28879),r=n.n(s),a=n(10264),l=n.n(a),o=n(2784),c=n(80604),d=n(32854);r().extend(l());let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return p(e)?m(e,t):e.toLocaleString()},p=e=>String(e).includes("."),m=(e,t)=>{if(!p(e))return e.toLocaleString()+"."+"0".repeat(t);{let[n,i]=String(e).split(".");return Number(n).toLocaleString()+"."+i.slice(0,t)}},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.EE.FULL,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?r().utc(e).format(t):r()(e).format(t)},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tiny:76,small:96,normal:160,large:280},n=t[e];return{Container:(0,o.useMemo)(()=>e=>{let{children:t}=e;return(0,i.jsx)(c.h,{height:n,minHeight:n,width:"100%",children:t})},[e]),minHeight:n}},x=e=>{let{data:t,xAxisKey:n,yAxisKey:i,stackKey:s,variant:r="values"}=e,a=(0,o.useMemo)(()=>t?Object.entries(t.reduce((e,t)=>{let r=t[n],a=t[i],l=t[s];return e[r]||(e[r]={}),e[r][l]=a,e},{})).map(e=>{let[t,i]=e;return{...i,[n]:Number.isNaN(Number(t))?t:Number(t)}}):[],[JSON.stringify(t)]),l=(0,o.useMemo)(()=>Object.keys(a[0]||{}).filter(e=>e!==n&&e!==i).sort(),[JSON.stringify(a[0]||{})]),c=(0,o.useMemo)(()=>{if("percentages"===r)return a.map(e=>{let t=Object.entries(e),n=t.filter(e=>{let[t,n]=e;return l.includes(t)}).reduce((e,t)=>{let[n,i]=t;return e+i},0);return t.reduce((e,t)=>{let[i,s]=t;return l.includes(i)?{...e,[i]:0!==s?s/n:0}:{...e,[i]:s}},{})})},[JSON.stringify(a)]);return{dataKeys:l,stackedData:a,percentagesStackedData:c}}},27029:function(e,t,n){"use strict";var i=n(52322),s=n(59647),r=n(54383),a=n(51428),l=n(74244);t.Z=e=>{let{attribute:t,message:n="No data to show",description:o,format:c,className:d="",size:u}=e,{minHeight:p}=(0,l.D3)(u);return(0,i.jsxs)("div",{children:[void 0!==t&&(0,i.jsx)(a.Z,{title:t,format:c,highlightedValue:0}),(0,i.jsxs)("div",{className:(0,r.cn)("border-control flex flex-grow w-full flex-col items-center justify-center space-y-2 border border-dashed text-center",d),style:{minHeight:p+20},children:[(0,i.jsx)(s.Z,{size:20,className:"text-border-stronger"}),(0,i.jsxs)("div",{className:"px-1",children:[(0,i.jsx)("p",{className:"text-foreground-light text-xs",children:n}),o&&(0,i.jsx)("p",{className:"text-foreground-lighter text-xs",children:o})]})]})]})}},57663:function(e,t,n){"use strict";var i=n(87612);class s{hasNext(){return this.lineNumber>=0||this.offset>=0}isFowardDQuote(){return!!this.hasForward()&&34===this.peekForward()}isNextDQuote(){return!!this.hasNext()&&34===this.peekNext()}isNextPeriod(){return!!this.hasNext()&&46===this.peekNext()}peekNext(){return this.offset<0?this.lineNumber>0?10:0:this._line.charCodeAt(this.offset)}hasForward(){return this.lineNumber<this._lines.length||this.offset<this._line.length}peekForward(){return this.offset===this._line.length?this.lineNumber===this._lines.length?0:10:this._line.charCodeAt(this.offset+1)}next(){if(this.offset<0)return this.lineNumber>0?(this.lineNumber--,this._line=this._lines[this.lineNumber],this.offset=this._line.length-1,10):(this.lineNumber=-1,0);let e=this._line.charCodeAt(this.offset);return this.offset--,e}readArguments(){let e=0,t=0,n=0,i=0;for(;this.hasNext();){let s=this.next();switch(s){case 40:if(--e<0)return i;break;case 41:e++;break;case 123:n--;break;case 125:n++;break;case 91:t--;break;case 93:t++;break;case 34:case 39:for(;this.hasNext()&&s!==this.next(););break;case 44:!e&&!t&&!n&&i++}}return -1}readIdent(){let e=!1,t=!1,n="";for(;this.hasNext();){let i=this.peekNext();if(e&&!t&&!this._isIdentPart(i))break;if(i=this.next(),!e&&t&&34===i){e=!0;continue}if(e||32!==i&&9!==i&&10!=i){if(!e&&(34===i||this._isIdentPart(i)))e=!0,t=34===i,n=String.fromCharCode(i)+n;else if(e){if(t){if(0===i||(n=String.fromCharCode(i)+n,34===i))break}else n=String.fromCharCode(i)+n}}}return n}readIdents(e){let t=[];for(;e>0;){e--;let n=this.readIdent();if(!n||(t.push(n),!this.isNextPeriod()))break}return t.reverse()}_isIdentPart(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57}constructor(e,t,n){(0,i._)(this,"_line",void 0),(0,i._)(this,"_text",void 0),(0,i._)(this,"_lines",void 0),(0,i._)(this,"model",void 0),(0,i._)(this,"offset",void 0),(0,i._)(this,"lineNumber",void 0),this.model=e,this.offset=t,this.lineNumber=n,this._text=e.getValue(),this._lines=this._text.split(/\r?\n/g),this._line=this._lines[n]}}t.Z=s},15998:function(e,t,n){"use strict";var i=n(52322),s=n(82955),r=n(76141),a=n(7774),l=n(2784),o=n(32079);t.Z=e=>{let{text:t,iconOnly:n=!1,children:c,onClick:d,copyLabel:u="Copy",copiedLabel:p="Copied",...m}=e,[f,h]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(!f)return;let e=setTimeout(()=>h(!1),2e3);return()=>clearTimeout(e)},[f]),(0,i.jsx)(o.z,{onClick:e=>{h(!0),(0,s.vQ)(t),null==d||d(e)},icon:f?(0,i.jsx)(r.Z,{size:14,strokeWidth:2,className:"text-brand"}):(0,i.jsx)(a.Z,{size:14}),...m,children:!n&&(0,i.jsx)(i.Fragment,{children:null!=c?c:f?p:u})})}},37962:function(e,t,n){"use strict";var i=n(52322),s=n(99959),r=n(34291),a=n.n(r),l=n(46252),o=n(78232),c=n(76141),d=n(89404),u=n(39097),p=n.n(u),m=n(5632),f=n(2784),h=n(61786),x=n(32079),g=n(54383),v=n(90504),j=n(19869),y=n(2322),_=n(80435),b=n(75951),N=n(92575),w=n(89523),S=n(9109);t.Z=e=>{var t;let{variant:n="regular",additionalOptions:r=[],onSelectId:u=a()}=e,C=(0,m.useRouter)(),{ref:E}=(0,s.UO)(),[q,R]=(0,f.useState)(!1),L=(0,S.TF)(),k=L.selectedDatabaseId,{data:z,isLoading:A,isSuccess:I}=(0,N.b)({projectRef:E}),Z=null!=z?z:[],T=Z.sort((e,t)=>e.inserted_at>t.inserted_at?1:0).sort(e=>e.identifier===E?-1:0),F=Z.find(e=>e.identifier===k),D=(0,w.f)(null!==(t=null==F?void 0:F.region)&&void 0!==t?t:""),O=(0,w.U)(null!=k?k:""),P=r.find(e=>e.id===k);return(0,i.jsxs)(h.J2,{open:q,onOpenChange:R,modal:!1,children:[(0,i.jsx)(h.xo,{asChild:!0,children:(0,i.jsx)("div",{className:"flex items-center space-x-2 cursor-pointer",children:(0,i.jsxs)(x.z,{type:"default",className:(0,g.cn)("pr-2","connected-on-right"===n&&"rounded-r-none","connected-on-left"===n&&"rounded-l-none border-l-0","connected-on-both"===n&&"rounded-none border-x-0"),icon:A&&(0,i.jsx)(l.Z,{className:"animate-spin"}),iconRight:(0,i.jsx)(o.Z,{className:"text-foreground-light",strokeWidth:2,size:12}),children:["Source:"," ",P?(0,i.jsx)("span",{children:P.name}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"capitalize",children:A||(null==F?void 0:F.identifier)===E?"Primary database":"Read replica"})," ",I&&(null==F?void 0:F.identifier)!==E&&(0,i.jsxs)("span",{children:["(",D," - ",O,")"]})]})]})})}),(0,i.jsx)(h.yk,{className:"p-0 w-64",side:"bottom",align:"end",children:(0,i.jsx)(v.mY,{children:(0,i.jsxs)(v.e8,{children:[r.length>0&&(0,i.jsx)(v.fu,{className:"border-b",children:r.map(e=>(0,i.jsx)(v.di,{value:e.id,className:"cursor-pointer w-full",onSelect:()=>{L.setSelectedDatabaseId(e.id),R(!1),u(e.id)},onClick:()=>{L.setSelectedDatabaseId(e.id),R(!1),u(e.id)},children:(0,i.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,i.jsx)("p",{children:e.name}),e.id===k&&(0,i.jsx)(c.Z,{size:14})]})},e.id))}),(0,i.jsx)(v.fu,{children:(0,i.jsx)(j.x,{className:(Z||[]).length>7?"h-[210px]":"",children:null==T?void 0:T.map(e=>{let t=(0,w.f)(e.region),n=(0,w.U)(e.identifier);if("ACTIVE_HEALTHY"!==e.status){let s=[b.hk.INIT_READ_REPLICA,b.hk.COMING_UP].includes(e.status)?"coming up":"not healthy";return(0,i.jsxs)(y.u,{children:[(0,i.jsx)(y.aJ,{asChild:!0,children:(0,i.jsx)("div",{className:"px-2 py-1.5 w-full flex items-center justify-between",children:(0,i.jsxs)("p",{className:"text-xs text-foreground-lighter",children:["Read replica (",t," - ",n,")"]})})}),(0,i.jsx)(y._v,{side:"right",className:"w-80",children:(0,i.jsx)(_.U,{className:"text-xs text-foreground",content:"Replica unable to accept requests as its ".concat(s,". [View infrastructure settings](/project/").concat(E,"/settings/infrastructure) for more information.")})})]},e.identifier)}return(0,i.jsx)(v.di,{value:e.identifier,className:"cursor-pointer w-full",onSelect:()=>{L.setSelectedDatabaseId(e.identifier),R(!1),u(e.identifier)},onClick:()=>{L.setSelectedDatabaseId(e.identifier),R(!1),u(e.identifier)},children:(0,i.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,i.jsx)("p",{children:e.identifier===E?"Primary database":"Read replica (".concat(t," - ").concat(n,")")}),e.identifier===k&&(0,i.jsx)(c.Z,{size:16})]})},e.identifier)})})}),(0,i.jsx)(v.fu,{className:"border-t",children:(0,i.jsx)(v.di,{className:"cursor-pointer w-full",onSelect:()=>{R(!1),C.push("/project/".concat(E,"/settings/infrastructure"))},onClick:()=>R(!1),children:(0,i.jsxs)(p(),{href:"/project/".concat(E,"/settings/infrastructure"),onClick:()=>R(!1),className:"w-full flex items-center gap-2",children:[(0,i.jsx)(d.Z,{size:14,strokeWidth:1.5}),(0,i.jsx)("p",{children:"Create a new read replica"})]})})})]})})})]})}},55600:function(e,t,n){"use strict";n.d(t,{x:function(){return r}});var i=n(52322),s=n(54383);let r=e=>{let{children:t,className:n}=e;return(0,i.jsx)("div",{className:(0,s.cn)("flex min-h-9 overflow-hidden items-center px-2 w-full border-t",n),children:t})}},38264:function(e,t,n){"use strict";var i=n(52322),s=n(6277);t.Z=e=>{let{options:t,width:n=50,activeOption:r,onClickOption:a,borderOverride:l="border-stronger"}=e,o=e=>"absolute top-0 z-1 text-xs inline-flex h-full items-center justify-center font-medium\n    ".concat(e?"hover:text-foreground-light hover:text-foreground":"hover:text-foreground"," hover:text-foreground focus:z-10 focus:outline-none focus:border-blue-300 focus:ring-blue\n    transition ease-in-out duration-150");return(0,i.jsxs)("div",{className:"relative border ".concat(l," rounded-md h-7"),style:{padding:1,width:(n+1)*2},children:[(0,i.jsx)("span",{style:{width:n,translate:r===t[1]?"0px":"".concat(n-2,"px")},"aria-hidden":"true",className:(0,s.default)("z-0 inline-block rounded h-full bg-overlay-hover shadow transform","transition-all ease-in-out border border-strong")}),t.map((e,t)=>(0,i.jsx)("span",{style:{width:n+1},className:"\n              ".concat(r===e?"text-foreground":"text-foreground-light","\n              ").concat(0===t?"right-0":"left-0","\n              ").concat(o(r===e),"\n              cursor-pointer\n            "),onClick:()=>a(e),children:(0,i.jsx)("span",{className:(0,s.default)("capitalize hover:text-foreground",r===e?"text-foreground":"text-foreground-light"),children:e})},"toggle_".concat(t)))]})}},8334:function(e,t,n){"use strict";n.d(t,{V:function(){return o}});var i=n(48228),s=n(62202),r=n(88354),a=n(99248);async function l(e){let{errorMessage:t,sql:n,entityDefinitions:i}=e,s=await (0,r.v_)(a.GW+"/api/ai/sql/debug",{errorMessage:t,sql:n,entityDefinitions:i});if(!(0,r.d8)(s))throw s.error;return s}let o=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.D)(e=>l(e),{async onSuccess(t,n,i){await (null==e?void 0:e(t,n,i))},async onError(e,n,i){void 0===t?s.ZP.error("Failed to debug SQL: ".concat(e.message)):t(e,n,i)},...n})}},99430:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var i=n(48228),s=n(62202),r=n(88354),a=n(99248);async function l(e){let{sql:t}=e,n=await (0,r.v_)(a.GW+"/api/ai/sql/title",{sql:t});if(!(0,r.d8)(n))throw n.error;return n}let o=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.D)(e=>l(e),{async onSuccess(t,n,i){await (null==e?void 0:e(t,n,i))},async onError(e,n,i){void 0===t?s.ZP.error("Failed to generate title: ".concat(e.message)):t(e,n,i)},...n})}},2160:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var i=n(85945),s=n(48228),r=n(62202),a=n(31696),l=n(65467);async function o(e,t){let{projectRef:n,ids:i}=e,{data:s,error:r}=await (0,a.IV)("/platform/projects/{ref}/content",{headers:{Version:"2"},params:{path:{ref:n},query:{ids:i}},signal:t});return r&&(0,a.S3)(r),s.map(e=>e.id)}let c=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,i.NL)();return(0,s.D)(e=>o(e),{async onSuccess(t,n,i){let{projectRef:s}=n;await a.invalidateQueries(l.$.list(s)),await (null==e?void 0:e(t,n,i))},async onError(e,n,i){void 0===t?r.ZP.error("Failed to delete contents: ".concat(e.message)):t(e,n,i)},...n})}},18734:function(e,t,n){"use strict";n.d(t,{A:function(){return a},N:function(){return l}});var i=n(36492),s=n(31696),r=n(65467);async function a(e,t){let{projectRef:n,id:i}=e;if(void 0===n)throw Error("projectRef is required");if(void 0===i)throw Error("Content ID is required");let{data:r,error:a}=await (0,s.U2)("/platform/projects/{ref}/content/item/{id}",{params:{path:{ref:n,id:i}},signal:t});if(a)throw(0,s.S3)(a);return r}let l=function(e){let{projectRef:t,id:n}=e,{enabled:s=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.a)(r.$.resource(t,n),e=>{let{signal:i}=e;return a({projectRef:t,id:n},i)},{enabled:s&&void 0!==t&&void 0!==n,...l})}},31442:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var i=n(36492),s=n(88354),r=n(99248),a=n(65467);async function l(e,t){if(void 0===e)throw Error("projectRef is required for getContent");let n=await (0,s.U2)("".concat(r.T5,"/projects/").concat(e,"/content"),{signal:t});if(n.error)throw n.error;if(!n)throw Error("Content not found");return{content:n.data}}let o=function(e){let{enabled:t=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.a)(a.$.list(e),t=>{let{signal:n}=t;return l(e,n)},{enabled:t&&void 0!==e,...n})}},18519:function(e,t,n){"use strict";n.d(t,{L:function(){return c},T:function(){return o}});var i=n(85945),s=n(48228),r=n(62202),a=n(31696),l=n(65467);async function o(e,t){let{projectRef:n,payload:i}=e,{data:s,error:r}=await (0,a.gz)("/platform/projects/{ref}/content",{params:{path:{ref:n}},body:i,headers:{Version:"2"},signal:t});return r&&(0,a.S3)(r),s}let c=function(){let{onError:e,onSuccess:t,invalidateQueriesOnSuccess:n=!0,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(0,i.NL)();return(0,s.D)(e=>o(e),{async onSuccess(e,i,s){let{projectRef:r}=i;n&&await c.invalidateQueries(l.$.list(r)),await (null==t?void 0:t(e,i,s))},async onError(t,n,i){void 0===e?r.ZP.error("Failed to insert content: ".concat(t.message)):e(t,n,i)},...a})}},69795:function(e,t,n){"use strict";n.d(t,{P:function(){return c},b:function(){return o}});var i=n(85945),s=n(48228),r=n(62202),a=n(31696),l=n(65467);async function o(e,t){let{projectRef:n,name:i,parentId:s}=e,r={name:i};s&&(r.parentId=s);let{data:l,error:o}=await (0,a.v_)("/platform/projects/{ref}/content/folders",{params:{path:{ref:n}},body:r,signal:t});if(o)throw(0,a.S3)(o);return l}let c=function(){let{onError:e,onSuccess:t,invalidateQueriesOnSuccess:n=!0,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(0,i.NL)();return(0,s.D)(e=>o(e),{async onSuccess(e,i,s){let{projectRef:r}=i;n&&await c.invalidateQueries(l.$.folders(r)),await (null==t?void 0:t(e,i,s))},async onError(t,n,i){void 0===e?r.ZP.error("Failed to create folder: ".concat(t.message)):e(t,n,i)},...a})}},7509:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});var i=n(98402),s=n(18592);let r=i.Z.functions.list(),a=function(e){let{projectRef:t,connectionString:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.cp)({projectRef:t,connectionString:n,sql:r.sql,queryKey:["functions-list"]},{select(e){var t;return null!==(t=null==e?void 0:e.result)&&void 0!==t?t:[]},...i})}},49650:function(e,t,n){"use strict";n.d(t,{Q:function(){return l},X:function(){return o}});var i=n(98402),s=n(18592),r=n(18545);let a=i.Z.schemas.list(),l=function(e){let{projectRef:t,connectionString:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.cp)({projectRef:t,connectionString:n,sql:a.sql,queryKey:["schemas","list"]},{select:e=>e.result,...i})};function o(e,t){return e.invalidateQueries(r.M.query(t,["schemas","list"]))}},39338:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});var i=n(18592);let s=(e,t)=>{let n=[];e&&n.push("tablename = '".concat(e,"'")),t&&n.push("schemaname = '".concat(t,"'"));let i=n.length>0?"WHERE ".concat(n.join(" AND ")):"";return"\n  \n  SELECT\n    tbl.schemaname,\n    tbl.tablename,\n    tbl.quoted_name,\n    tbl.is_table,\n    json_agg(a) as columns\n  FROM\n    (\n      SELECT\n        n.nspname as schemaname,\n        c.relname as tablename,\n        (quote_ident(n.nspname) || '.' || quote_ident(c.relname)) as quoted_name,\n        true as is_table\n      FROM\n        pg_catalog.pg_class c\n        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE\n        c.relkind = 'r'\n        AND n.nspname not in ('information_schema', 'pg_catalog', 'pg_toast')\n        AND n.nspname not like 'pg_temp_%'\n        AND n.nspname not like 'pg_toast_temp_%'\n        AND has_schema_privilege(n.oid, 'USAGE') = true\n        AND has_table_privilege(quote_ident(n.nspname) || '.' || quote_ident(c.relname), 'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER') = true\n      union all\n      SELECT\n        n.nspname as schemaname,\n        c.relname as tablename,\n        (quote_ident(n.nspname) || '.' || quote_ident(c.relname)) as quoted_name,\n        false as is_table\n      FROM\n        pg_catalog.pg_class c\n        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE\n        c.relkind in ('v', 'm')\n        AND n.nspname not in ('information_schema', 'pg_catalog', 'pg_toast')\n        AND n.nspname not like 'pg_temp_%'\n        AND n.nspname not like 'pg_toast_temp_%'\n        AND has_schema_privilege(n.oid, 'USAGE') = true\n        AND has_table_privilege(quote_ident(n.nspname) || '.' || quote_ident(c.relname), 'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER') = true\n    ) as tbl\n    LEFT JOIN (\n      SELECT\n        attrelid,\n        attname,\n        format_type(atttypid, atttypmod) as data_type,\n        attnum,\n        attisdropped\n      FROM\n        pg_attribute\n    ) as a ON (\n      a.attrelid = tbl.quoted_name::regclass\n      AND a.attnum > 0\n      AND NOT a.attisdropped\n      AND has_column_privilege(tbl.quoted_name, a.attname, 'SELECT, INSERT, UPDATE, REFERENCES')\n    )\n  ".concat(i,"\n  GROUP BY schemaname, tablename, quoted_name, is_table;\n").trim()},r=function(e){let{projectRef:t,connectionString:n,table:r,schema:a}=e,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.cp)({projectRef:t,connectionString:n,sql:s(r,a),queryKey:["table-columns",a,r]},l)}},56302:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});let i={list:e=>["project",e,"replicas"],statuses:e=>["project",e,"replicas-statuses"],loadBalancers:e=>["project",e,"load-balancers"]}},92575:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var i=n(36492),s=n(99959),r=n(31696),a=n(56302);async function l(e,t){let{projectRef:n}=e;if(!n)throw Error("Project ref is required");let{data:i,error:s}=await (0,r.U2)("/platform/projects/{ref}/databases",{params:{path:{ref:n}},signal:t});return s&&(0,r.S3)(s),i}let o=function(e){let{projectRef:t}=e,{enabled:n=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.a)(a.Z.list(t),e=>{let{signal:n}=e;return l({projectRef:t},n)},{enabled:n&&s.Qy&&void 0!==t,...r})}},89523:function(e,t,n){"use strict";n.d(t,{U:function(){return a},f:function(){return l}});var i=n(75951),s=n(56974),r=n.n(s);let a=e=>{var t;return r()(null!==(t=e.split("-"))&&void 0!==t?t:[])},l=e=>{var t,n;return null===(t=r()(null===(n=i.q_.find(t=>t.region===e))||void 0===n?void 0:n.name.split("(")))||void 0===t?void 0:t.split(")")[0]}},30120:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var i=n(62202),s=n(48228),r=n(18592);let a=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.D)(e=>(0,r.Rj)(e),{async onSuccess(t,n,i){await (null==e?void 0:e(t,n,i))},async onError(e,n,s){void 0===t?i.Am.error("Failed to execute SQL: ".concat(e.message)):t(e,n,s)},...n})}},49574:function(e,t,n){"use strict";n.d(t,{X:function(){return l},x:function(){return a}});var i=n(48228),s=n(88354),r=n(99248);async function a(e,t){let{projectRef:n,connectionString:i,sql:a}=e,l=new Headers;i&&l.set("x-connection-encrypted",i);let o=await (0,s.v_)("".concat(r.T5,"/pg-meta/").concat(n,"/query/format"),{query:a},{headers:Object.fromEntries(l),signal:t});if(o.error)throw o.error;return{result:o}}let l=function(){let{onSuccess:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.D)(e=>a(e),{async onSuccess(t,n,i){await (null==e?void 0:e(t,n,i))},...t})}},84602:function(e,t,n){"use strict";n.d(t,{aL:function(){return a},D9:function(){return l}});var i=n(2784),s=n(11886),r=n.n(s);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],[s,a]=(0,i.useState)(),l=i=>{if(!e||r()(t,i.target.nodeName)||r()(n,i.target.className))return;let s=i.metaKey&&i.shiftKey?"Command+Shift+".concat(i.key):i.metaKey?"Command+".concat(i.key):i.shiftKey&&"Enter"===i.key?"Shift+".concat(i.key):i.ctrlKey&&i.key?"Control+".concat(i.key):i.key;e[s]&&(s.includes("+")?(i.preventDefault(),e[s](i),a(null)):(a(i.key),i.preventDefault()))},o=t=>{e&&e[t.key]&&s===t.key&&(t.preventDefault(),e[t.key](t),a(null))};(0,i.useEffect)(()=>(document.body.addEventListener("keydown",l),document.body.addEventListener("keyup",o),()=>{document.body.removeEventListener("keydown",l),document.body.removeEventListener("keyup",o)}))}function l(e){let t=(0,i.useRef)();return(0,i.useEffect)(()=>{t.current=e}),t.current}n(52322),n(48090),n(82955)},38292:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return tC}});var i=n(52322),s=n(79534),r=n(5632),a=n(2784),l=n(93885),o=n(27533),c=n(47788),d=n(25237),u=n.n(d),p=n(62202),m=n(99959),f=n(8334),h=n(99430),x=n(17055),g=n(92575),v=n(30120),j=n(49574),y=n(93463),_=n(23770),b=n(89823),N=n(26211),w=n(75939),S=n(99248),C=n(82955),E=n(74067),q=n(35432),R=n(28020),L=n(82784),k=n(16289),z=n(9109),A=n(83537),I=n(2670),Z=n(24413),T=n(79983),F=n(54383),D=n(54849),O=n(73831),P=n(34750),U=n(13844),M=n(84605),V=n(32079),W=e=>{var t,n;let{children:s,delay:r=300,onClickSettings:l}=e,o=(0,b.l)(),d=null!==(n=null==o?void 0:null===(t=o.opt_in_tags)||void 0===t?void 0:t.includes(S.PV.AI_SQL))&&void 0!==n&&n,[u]=(0,_.l)("supabase_sql-editor-ai-schema",!0),[p,m]=(0,a.useState)(!1),[f]=(0,_.l)("supabase_sql-editor-ai-query-count",0),h=(d||!S.Qy)&&u,[x,g]=(0,_.l)("supabase_sql-editor-ai-schema-suggestion-dismissed",!1);return(0,a.useEffect)(()=>{let e=window.setTimeout(()=>{m(!0)},r);return()=>window.clearTimeout(e)}),(0,i.jsxs)(U.fC,{open:p&&!h&&f>=3&&!x,children:[(0,i.jsx)(U.ee,{asChild:!0,children:s}),(0,i.jsx)(U.h_,{children:(0,i.jsx)(U.VY,{side:"bottom",sideOffset:5,children:(0,i.jsxs)(c.E.div,{variants:{visible:{opacity:1,y:0},hidden:{opacity:0,y:-10}},initial:"hidden",animate:"visible",children:[(0,i.jsx)(U.Eh,{className:"fill-background-surface-300"}),(0,i.jsxs)("div",{className:"flex flex-col gap-2 border border-default rounded-md p-4 bg-surface-100 shadow-xl",children:[(0,i.jsxs)("div",{className:"flex flex-row items-center gap-4 max-w-md",children:[(0,i.jsx)(M.Z,{className:"w-6 h-6"}),(0,i.jsx)("p",{className:"text-sm",children:"Generate more relevant queries by including database metadata in your requests."})]}),(0,i.jsxs)("div",{className:"flex flex-row gap-2 justify-end",children:[(0,i.jsx)(V.z,{type:"default",onClick:()=>{g(!0)},children:"Dismiss"}),(0,i.jsx)(V.z,{onClick:()=>{g(!0),null==l||l()},children:"Open settings"})]})]})]})})})]})},Q=n(88883),B=n(60417),K=n.n(B),G=n(56974),Y=n.n(G),H=n(46252),$=n(63955),X=n(30195),J=n(22574),ee=n(91316);let et=(0,a.forwardRef)((e,t)=>{let{className:n,value:s,...r}=e,l=(0,a.useRef)(null);return(0,a.useImperativeHandle)(t,()=>l.current),(0,a.useEffect)(()=>{if(l){if(!s&&l&&l.current)l.current.style.height="40px";else if(l&&l.current){let e=l.current.scrollHeight+"px";l.current.style.height=e}}},[s,l]),(0,i.jsx)(ee.K,{ref:l,rows:1,"aria-expanded":!1,className:(0,F.cn)("transition-all resize-none leading-6 box-border",n),value:s,...r})});et.displayName="ExpandingTextArea";var en=n(7803),ei=n(28879),es=n.n(ei),er=n(34291),ea=n.n(er),el=n(96577),eo=n.n(el),ec=n(14048),ed=n(12188),eu=n(81076),ep=n(73071),em=n(18094),ef=n(76141),eh=n(94299),ex=n(58898),eg=n(2322),ev=n(14706);let ej=e=>{let{onDiff:t,children:n,className:s}=e,[l,o]=(0,a.useState)(!1),c=(0,r.useRouter)(),d=(0,m.Mk)();(0,a.useEffect)(()=>{if(!l)return;let e=setTimeout(()=>o(!1),2e3);return()=>clearTimeout(e)},[l]);let u=(n||[""])[0];try{u=(0,L.WU)(u,{language:"postgresql",keywordCase:"upper"})}catch(e){}return 0===u.length?null:(0,i.jsxs)("pre",{className:(0,F.cn)("rounded-md relative group",s),children:[(0,i.jsx)(ex.d,{value:u,language:"sql",className:(0,F.cn)("!bg-transparent !py-3 !px-3.5 prose dark:prose-dark","[&>code]:m-0 [&>code>span]:flex [&>code>span]:flex-wrap"),hideCopy:!0,hideLineNumbers:!0}),(0,i.jsxs)("div",{className:"absolute top-5 right-2 bg-surface-100 border-muted border rounded-lg h-[28px] hidden group-hover:block",children:[(0,i.jsxs)(eg.u,{children:[(0,i.jsx)(eg.aJ,{asChild:!0,children:(0,i.jsx)(V.z,{type:"text",size:"tiny",onClick:()=>{t(ev.U.Addition,u),R.Z.sendEvent({category:"sql_editor_ai_assistant",action:"ai_suggestion_inserted",label:"sql-editor-ai-assistant"},d,c)},children:(0,i.jsx)(em.ec,{className:"h-4 w-4 text-foreground-light",strokeWidth:1.5})})}),(0,i.jsx)(eg._v,{side:"bottom",className:"font-sans",children:"Insert code"})]}),(0,i.jsxs)(eg.u,{children:[(0,i.jsx)(eg.aJ,{asChild:!0,children:(0,i.jsx)(V.z,{type:"text",size:"tiny",onClick:()=>{t(ev.U.Modification,u),R.Z.sendEvent({category:"sql_editor_ai_assistant",action:"ai_suggestion_replaced",label:"sql-editor-ai-assistant"},d,c)},children:(0,i.jsx)(em.nY,{className:"h-4 w-4 text-foreground-light",strokeWidth:1.5})})}),(0,i.jsx)(eg._v,{side:"bottom",className:"font-sans",children:"Replace code"})]}),(0,i.jsxs)(eg.u,{children:[(0,i.jsx)(eg.aJ,{asChild:!0,children:(0,i.jsx)(V.z,{type:"text",size:"tiny",onClick:()=>{var e;e=u,navigator.clipboard.writeText(e).then(),o(!0),R.Z.sendEvent({category:"sql_editor_ai_assistant",action:"ai_suggestion_copied",label:"sql-editor-ai-assistant"},d,c)},children:l?(0,i.jsx)(ef.Z,{size:16,className:"text-brand-600"}):(0,i.jsx)(eh.Z,{size:16,className:"text-foreground-light",strokeWidth:1.5})})}),(0,i.jsx)(eg._v,{side:"bottom",className:"font-sans",children:"Copy code"})]})]})]})},ey=(0,a.memo)(function(e){let{name:t,role:n,content:s,createdAt:r,isDebug:l,isSelected:o=!1,onDiff:c=ea(),children:d,action:u=(0,i.jsx)(i.Fragment,{})}=e,{profile:p}=(0,E.Un)(),m=(0,a.useMemo)(()=>"assistant"===n?(0,i.jsx)(D.c,{loading:"Thinking..."===s,className:"[&>div>div]:border-black dark:[&>div>div]:border-white"}):(0,i.jsx)("div",{className:"relative border shadow-lg w-8 h-8 rounded-full overflow-hidden",children:(0,i.jsx)(eo(),{src:"https://github.com/".concat(null==p?void 0:p.username,".png")||0,width:30,height:30,alt:"avatar",className:"relative"})}),[s,null==p?void 0:p.username,n]);return s?(0,i.jsxs)("div",{className:"flex flex-col py-4 gap-4 border-t px-5 text-foreground-light text-sm",children:[(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[m,(0,i.jsx)("span",{className:"text-sm",children:"assistant"===n?"Assistant":t||"You"}),r&&(0,i.jsx)("span",{className:"text-xs text-foreground-muted",children:es()(r).fromNow()}),l&&(0,i.jsx)(eu.C,{variant:"warning",children:"Debug request"})]})," ",u]}),(0,i.jsx)(ec.D,{className:"gap-2.5 flex flex-col [&>*>code]:text-xs [&>*>*>code]:text-xs",remarkPlugins:[ed.Z],components:{...ep.t,pre:e=>(0,i.jsx)(ej,{onDiff:c,className:(0,F.cn)("transition",o?"[&>div>pre]:!border-stronger [&>div>pre]:!bg-surface-200":""),children:e.children[0].props.children})},children:s}),d]}):null}),e_=e=>{var t,n,s;let{messages:l,selectedMessage:o,loading:c,onSubmit:d,onDiff:u,onClearHistory:p,onClose:f}=e,h=(0,r.useRouter)(),{profile:x}=(0,E.Un)(),g=(0,k.WZ)(),v=(0,b.l)(),j=(0,a.useRef)(null),y=(0,m.Mk)(),N=null!==(s=null==v?void 0:null===(t=v.opt_in_tags)||void 0===t?void 0:t.includes(S.PV.AI_SQL))&&void 0!==s&&s,[w]=(0,_.l)(S.dA.SQL_EDITOR_AI_SCHEMA,!0),C=(N||!S.Qy)&&w,q=K()([null==x?void 0:x.first_name,null==x?void 0:x.last_name]).join(" "),L=X.Ry({chat:X.Z_()}),z=(0,$.cI)({mode:"onBlur",reValidateMode:"onBlur",resolver:(0,Q.F)(L),defaultValues:{chat:""}}),A=c&&(null===(n=Y()(l))||void 0===n?void 0:n.role)==="user";(0,a.useEffect)(()=>{c&&j.current&&setTimeout(()=>{var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},500)}),(0,a.useEffect)(()=>{c||(z.setValue("chat",""),z.setFocus("chat"))},[c]);let I=(0,a.useRef)(null);return(0,i.jsxs)("div",{className:"flex flex-col h-full min-w-[400px] w-[400px] border-l border-control",children:[(0,i.jsxs)("div",{className:(0,F.cn)("overflow-auto flex-1",0===l.length?"flex flex-col justify-between":""),children:[(0,i.jsx)(ey,{role:"assistant",content:"Hi".concat(q?" "+q:"",", how can I help you? I'm powered by AI, so surprises and mistakes are possible.\n        Make sure to verify any generated code or suggestions, and share feedback so that we can\n        learn and improve."),action:(0,i.jsx)(V.z,{type:"default",onClick:f,children:"Close Assistant"}),children:(0,i.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,i.jsxs)(V.z,{type:"default",className:"w-min",icon:(0,i.jsx)("div",{className:(0,F.cn)("w-2 h-2 rounded-full",C?"bg-brand":"border border-stronger")}),onClick:()=>g.setShowAiSettingsModal(!0),children:[C?"Include":"Exclude"," database metadata in queries"]}),(0,i.jsx)(V.z,{type:"warning",onClick:()=>p(),children:"Clear history"})]})},"zero"),l.map(e=>(0,i.jsx)(ey,{name:e.name,role:e.role,content:e.content,createdAt:new Date(e.createdAt||new Date).getTime(),isDebug:e.isDebug,isSelected:o===e.id,onDiff:(t,n)=>u({id:e.id,diffType:t,sql:n})},"message-".concat(e.id))),A&&(0,i.jsx)(ey,{role:"assistant",content:"Thinking..."},"thinking"),(0,i.jsx)("div",{ref:j,className:"h-1"})]}),(0,i.jsx)(J.l0,{...z,children:(0,i.jsx)("form",{ref:I,className:"sticky p-5 flex-0 border-t",onSubmit:z.handleSubmit(e=>{d(e.chat),R.Z.sendEvent({category:"sql_editor_ai_assistant",action:"ai_suggestion_asked",label:"sql-editor-ai-assistant"},y,h)}),children:(0,i.jsx)(J.Wi,{control:z.control,name:"chat",render:e=>{let{field:t}=e;return(0,i.jsx)(J.xJ,{asChild:!0,children:(0,i.jsx)(J.NI,{children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(en.p,{className:"absolute top-2 left-3 [&>div>div]:border-black dark:[&>div>div]:border-white"}),(0,i.jsx)(et,{...t,autoComplete:"off",disabled:c,autoFocus:!0,spellCheck:!1,className:"pl-12 text-sm rounded-[18px] max-h-96",onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey){var t;e.preventDefault(),null==I||null===(t=I.current)||void 0===t||t.requestSubmit()}},placeholder:"Ask a question about your SQL query"}),c&&(0,i.jsx)(H.Z,{className:"absolute top-2 right-3 animate-spin"})]})})})}})})})]})};var eb=n(34503),eN=n(82401),ew=n(78232),eS=n(30789);let eC=e=>{let{loading:t,selectedDiffType:n,onChangeDiffType:s,onAccept:r,onCancel:a}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(V.z,{className:"rounded-r-none",type:"primary",size:"tiny",icon:t&&(0,i.jsx)(H.Z,{className:"animate-spin"}),iconRight:(0,i.jsx)(eN.Z,{size:12,strokeWidth:1.5}),onClick:r,children:(0,eS.re)(n)}),(0,i.jsxs)(eb.h_,{children:[(0,i.jsx)(eb.$F,{asChild:!0,children:(0,i.jsx)(V.z,{type:"primary",className:"rounded-l-none border-l-0 px-[4px] py-[5px] flex",icon:(0,i.jsx)(ew.Z,{})})}),(0,i.jsx)(eb.AW,{align:"end",side:"bottom",children:Object.values(ev.U).filter(e=>e!==n).map(e=>(0,i.jsx)(eb.Xi,{onClick:()=>s(e),children:(0,i.jsx)("p",{children:(0,eS.IT)(e)})},e))})]})]}),(0,i.jsx)(V.z,{type:"alternative",size:"tiny",className:"bg-brand-300 hover:bg-brand-400 dark:bg-brand-400 dark:hover:bg-brand-500 text-brand-600 group",iconRight:(0,i.jsx)("span",{className:"dark:text-brand-500 group-hover:text-brand-600",children:"ESC"}),onClick:a,children:"Discard"})]})};var eE=n(56902),eq=n(85945),eR=n(13800),eL=n(65467),ek=n(89828),ez=n(79735),eA=n(27029),eI=n(47433),eZ=n(62949),eT=n(6112),eF=n(71640);let eD=(e,t)=>{var n;return(null==e?void 0:null===(n=e.rows)||void 0===n?void 0:n.length)?e.rows.reduce((e,n)=>{let i=e[e.length-1]||{};return[...e,{...n,[t.yKey]:(i[t.yKey]||0)+n[t.yKey]}]},[]):[]},eO=["number","string","date"];function eP(e){let{results:t={rows:[]},config:n,onConfigChange:s}=e,r=(0,a.useMemo)(()=>Object.keys(t.rows[0]||{}).filter(e=>{let n=typeof t.rows[0][e];return eO.includes(n)}),[t]),l=(0,a.useMemo)(()=>eD(t,n),[t,n]),o=n.cumulative?l:t.rows;if(!r.length)return(0,i.jsx)("div",{className:"p-2",children:(0,i.jsx)(eA.Z,{size:"normal",description:"Execute a query and configure the chart options."})});let c=(e=>{let t=o[0][e];return"number"==typeof t?"number":es()(t).isValid()?"date":"string"})(n.xKey);return(0,i.jsx)(T.pO,{direction:"horizontal",className:"flex-grow h-full",children:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T.ee,{className:"p-4 h-full",defaultSize:75,children:"bar"===n.type&&(0,i.jsx)(ez.Z,{showLegend:!0,size:"normal",xAxisIsDate:"date"===c,data:o,xAxisKey:n.xKey,yAxisKey:n.yKey,emptyStateMessage:"Execute a query and configure the chart options",showGrid:n.showGrid,XAxisProps:{angle:0,interval:0,hide:!n.showLabels,tickFormatter:e=>{let t=o[+e][n.xKey];return"date"===c?es()(t).format("MMM D YYYY"):t}},YAxisProps:{tickFormatter:e=>e.toLocaleString(),label:(0,i.jsx)(i.Fragment,{}),hide:!n.showLabels}})}),(0,i.jsx)(T.Dp,{withHandle:!0}),(0,i.jsx)(T.ee,{defaultSize:25,minSize:15,className:"px-3 py-3 space-y-4",children:(0,i.jsxs)("form",{className:"grid gap-4",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center h-5",children:[(0,i.jsx)("h2",{className:"text-sm text-foreground-lighter",children:"Chart options"}),n.xKey&&n.yKey&&(0,i.jsx)(V.z,{type:"text",onClick:()=>{let e=n.xKey,t=n.yKey;s({...n,xKey:t,yKey:e})},title:"Swap X and Y axis",icon:(0,i.jsx)(eI.Z,{size:"15",className:"text-foreground-lighter"}),children:"Flip"})]}),(0,i.jsxs)(eZ.Ph,{value:n.xKey,onValueChange:e=>{s({...n,xKey:e})},children:[(0,i.jsxs)(eZ.i4,{children:["X Axis ",n.xKey&&"- ".concat(n.xKey)]}),(0,i.jsx)(eZ.Bw,{children:(0,i.jsx)(eZ.DI,{children:r.map(e=>(0,i.jsx)(eZ.Ql,{value:e,children:e},e))})})]}),(0,i.jsxs)(eZ.Ph,{value:n.yKey,onValueChange:e=>{s({...n,yKey:e})},children:[(0,i.jsxs)(eZ.i4,{children:["Y Axis ",n.yKey&&"- ".concat(n.yKey)]}),(0,i.jsx)(eZ.Bw,{children:(0,i.jsx)(eZ.DI,{children:r.map(e=>(0,i.jsx)(eZ.Ql,{value:e,children:e},e))})})]}),(0,i.jsxs)("div",{className:"*:flex *:gap-2 *:items-center grid gap-2 *:text-foreground-light *:p-1.5 *:pl-0",children:[(0,i.jsxs)(eT._,{className:"",htmlFor:"cumulative",children:[(0,i.jsx)(eF.X,{id:"cumulative",name:"cumulative",checked:n.cumulative,onClick:()=>s({...n,cumulative:!n.cumulative})}),"Cumulative"]}),(0,i.jsxs)(eT._,{htmlFor:"showLabels",children:[(0,i.jsx)(eF.X,{id:"showLabels",name:"showLabels",checked:n.showLabels,onClick:()=>s({...n,showLabels:!n.showLabels})}),"Show labels"]}),(0,i.jsxs)(eT._,{htmlFor:"showGrid",children:[(0,i.jsx)(eF.X,{id:"showGrid",name:"showGrid",checked:n.showGrid,onClick:()=>s({...n,showGrid:!n.showGrid})}),"Show grid"]})]})]})})]})})}var eU=n(29259),eM=n.n(eU),eV=n(85505),eW=n.n(eV),eQ=n(16760),eB=n.n(eQ),eK=n(66142),eG=n(83606),eY=n(27570),eH=n(17913),e$=n(7774),eX=e=>{var t,n,s,l,o,c,d;let{id:u}=e,{project:f}=(0,eY.d2)(),h=(0,m.Mk)(),x=(0,I.W2)(),g=(0,Z.B0)(),v=(0,w.P)("sqlFolderOrganization"),j=v?null===(n=g.results)||void 0===n?void 0:null===(t=n[u])||void 0===t?void 0:t[0]:null!==(d=null===(l=x.results)||void 0===l?void 0:null===(s=l[u])||void 0===s?void 0:s[0])&&void 0!==d?d:void 0,y=(0,a.useRef)(null),_=(0,r.useRouter)(),b=(0,a.useMemo)(()=>{if(null==j?void 0:j.rows){let e=Array.from(j.rows||[]).map(e=>eB()(e,(e,t)=>eW()(e)?e.replaceAll(/\n/g,"\\n").replaceAll(/"/g,'""'):eM()(e)?JSON.stringify(e).replaceAll(/\"/g,'""'):e));return K()(e)}return""},[j]),N=(0,a.useMemo)(()=>{if(null==j?void 0:j.rows){let e=Array.from(j.rows||[])[0];if(e)return Object.keys(e)}},[j]);return(0,i.jsxs)(eb.h_,{children:[(0,i.jsx)(eb.$F,{asChild:!0,children:(0,i.jsx)(V.z,{type:"text",iconRight:(0,i.jsx)(ew.Z,{size:14}),children:"Export"})}),(0,i.jsx)(eG.CSVLink,{ref:y,className:"hidden",headers:N,data:b,filename:v?"supabase_".concat(null==f?void 0:f.ref,"_").concat(null===(o=g.snippets[u])||void 0===o?void 0:o.snippet.name,".csv"):"supabase_".concat(null==f?void 0:f.ref,"_").concat(null===(c=x.snippets[u])||void 0===c?void 0:c.snippet.name,".csv")}),(0,i.jsxs)(eb.AW,{side:"bottom",align:"start",children:[(0,i.jsxs)(eb.Xi,{onClick:function(){var e;null===(e=y.current)||void 0===e||e.link.click(),R.Z.sendEvent({category:"sql_editor",action:"sql_download_csv",label:""},h,_)},className:"space-x-2",children:[(0,i.jsx)(eH.Z,{size:14}),(0,i.jsx)("p",{children:"Download CSV"})]}),(0,i.jsxs)(eb.Xi,{onClick:function(){if(navigator){if(!j||!j.rows)return"results is empty";if(j.rows.constructor!==Array&&j.error)return j.error;if(0==j.rows.length)return"results is empty";let e=Object.keys(j.rows[0]),t=j.rows.map(t=>{let n=[];return e.forEach(e=>n.push(t[e])),n}),n=[e].concat(t),i=(0,eK.x)(n);(0,C.vQ)(i,()=>{p.ZP.success("Copied results to clipboard"),R.Z.sendEvent({category:"sql_editor",action:"sql_copy_as_markdown",label:""},h,_)})}},className:"space-x-2",children:[(0,i.jsx)(e$.Z,{size:14}),(0,i.jsx)("p",{children:"Copy as markdown"})]}),(0,i.jsxs)(eb.Xi,{onClick:function(){if(navigator){if(!j||!j.rows)return"results is empty";if(j.rows.constructor!==Array&&j.error)return j.error;if(0==j.rows.length)return"results is empty";(0,C.vQ)(JSON.stringify(j.rows,null,2),()=>{p.ZP.success("Copied results to clipboard"),R.Z.sendEvent({category:"sql_editor",action:"sql_copy_as_json",label:""},h,_)})}},className:"space-x-2",children:[(0,i.jsx)(e$.Z,{size:14}),(0,i.jsx)("p",{children:"Copy as JSON"})]})]})]})},eJ=n(42679),e0=n(99336),e1=n(76541),e2=n(28507),e4=n(62046),e3=n(3696),e5=n(37962),e8=n(1073),e9=n(98611),e6=n(84602),e7=e=>{var t,n,s;let{id:r}=e,a=(0,m.aF)(),l=(0,I.W2)().snippets[r],o=(null==a?void 0:null===(t=a.user_metadata)||void 0===t?void 0:t.user_name)===(null==l?void 0:null===(s=l.snippet)||void 0===s?void 0:null===(n=s.owner)||void 0===n?void 0:n.username);return(0,i.jsx)(i.Fragment,{children:o?null:(0,i.jsx)(eu.C,{children:"Read-only"})})},te=e=>{let{id:t}=e,{profile:n}=(0,E.Un)(),s=(0,I.W2)(),r=(0,Z.B0)(),l=(0,w.P)("sqlFolderOrganization"),o=l?r.savingStates[t]:s.savingStates[t],c=(0,e6.D9)(o),[d,u]=(0,a.useState)(!1),p=l?r.snippets[t]:s.snippets[t],m=(null==n?void 0:n.id)===(null==p?void 0:p.snippet.owner_id);return(0,a.useEffect)(()=>{let e=!1;return"UPDATING"===c&&"IDLE"===o&&(u(!0),setTimeout(()=>{e||u(!1)},5e3)),()=>{e=!0}},[o]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"mx-2 flex items-center gap-2",children:[m&&"UPDATING_FAILED"===o&&(0,i.jsx)(V.z,{type:"text",size:"tiny",icon:(0,i.jsx)(e8.Z,{className:"text-gray-1100",size:"tiny",strokeWidth:2}),onClick:()=>l?r.addNeedsSaving(t):s.addNeedsSaving(t),children:"Retry"}),d?(0,i.jsxs)(eg.u,{children:[(0,i.jsx)(eg.aJ,{children:(0,i.jsx)(ef.Z,{className:"text-brand",size:14,strokeWidth:3})}),(0,i.jsx)(eg._v,{side:"bottom",children:"All changes saved"})]}):"UPDATING"===o?(0,i.jsxs)(eg.u,{children:[(0,i.jsx)(eg.aJ,{children:(0,i.jsx)(H.Z,{className:"animate-spin",size:14,strokeWidth:2})}),(0,i.jsx)(eg._v,{children:"Saving changes..."})]}):"UPDATING_FAILED"===o?m?(0,i.jsxs)(eg.u,{children:[(0,i.jsx)(eg.aJ,{children:(0,i.jsx)(e9.Z,{className:"text-red-900",size:14,strokeWidth:2})}),(0,i.jsx)(eg._v,{children:"Failed to save changes"})]}):(0,i.jsx)(e7,{id:t}):null]})})};let tt=[{value:-1,label:"No limit"},{value:100,label:"100 rows"},{value:500,label:"500 rows"},{value:1e3,label:"1,000 rows"}];var tn=e=>{var t;let{id:n,isExecuting:s=!1,isDisabled:r=!1,hasSelection:a,prettifyQuery:l,executeQuery:o}=e,c=(0,C.fV)(),d=(0,eq.NL)(),{project:u}=(0,eY.d2)(),m=(0,I.W2)(),f=(0,Z.B0)(),h=(0,w.P)("sqlFolderOrganization"),[x]=(0,_.l)(S.dA.SQL_EDITOR_AI_OPEN,!0),[g,v]=(0,_.l)(S.dA.SQL_EDITOR_INTELLISENSE,!0),j=h?f.snippets[n]:m.snippets[n],y=void 0!==j&&(h?j.snippet.favorite:j.snippet.content.favorite),b=()=>{v(!g),p.ZP.success("Successfully ".concat(g?"disabled":"enabled"," intellisense. ").concat(g?"Please refresh your browser for changes to take place.":""))},N=async()=>{h?f.addFavorite(n):m.addFavorite(n),d.setQueryData(eL.$.list(null==u?void 0:u.ref),e=>{if(e)return{...e,content:e.content.map(e=>"sql"===e.type&&e.id===n?{...e,content:{...e.content,favorite:!0}}:e)}})},E=async()=>{h?f.removeFavorite(n):m.removeFavorite(n),d.setQueryData(eL.$.list(null==u?void 0:u.ref),e=>{if(e)return{...e,content:e.content.map(e=>"sql"===e.type&&e.id===n?{...e,content:{...e.content,favorite:!1}}:e)}})};return(0,i.jsxs)("div",{className:"inline-flex items-center justify-end gap-x-2",children:[S.Qy&&(0,i.jsx)(te,{id:n}),(0,i.jsxs)(eb.h_,{children:[(0,i.jsx)(eb.$F,{asChild:!0,children:(0,i.jsx)(V.z,{type:"default",className:(0,F.cn)("px-1",x?"block 2xl:hidden":"hidden"),icon:(0,i.jsx)(eJ.Z,{size:14,className:"text-foreground-light"})})}),(0,i.jsxs)(eb.AW,{className:"w-48",children:[(0,i.jsxs)(eb.Xi,{className:"justify-between",onClick:b,children:[(0,i.jsxs)("span",{className:"flex items-center gap-x-2",children:[(0,i.jsx)(e0.Z,{size:14,className:"text-foreground-light"}),"Intellisense enabled"]}),g&&(0,i.jsx)(ef.Z,{className:"text-brand",size:16})]}),(0,i.jsx)(eb.VD,{}),(0,i.jsxs)(eb.Xi,{className:"gap-x-2",onClick:()=>{y?E():N()},children:[(0,i.jsx)(e1.Z,{size:14,strokeWidth:2,className:y?"fill-brand stroke-none":"fill-none stroke-foreground-light"}),y?"Remove from":"Add to"," favorites"]}),(0,i.jsxs)(eb.Xi,{className:"gap-x-2",onClick:l,children:[(0,i.jsx)(e2.Z,{size:14,strokeWidth:2}),"Prettify SQL"]})]})]}),(0,i.jsxs)("div",{className:(0,F.cn)("items-center gap-x-2",x?"hidden 2xl:flex":"flex"),children:[(0,i.jsxs)(eb.h_,{children:[(0,i.jsx)(eb.$F,{asChild:!0,children:(0,i.jsx)(V.z,{type:"text",className:"px-1",icon:(0,i.jsx)(e0.Z,{size:14,className:"text-foreground-light"})})}),(0,i.jsx)(eb.AW,{className:"w-48",children:(0,i.jsxs)(eb.Xi,{className:"justify-between",onClick:b,children:["Intellisense enabled",g&&(0,i.jsx)(ef.Z,{className:"text-brand",size:16})]})})]}),S.Qy&&(0,i.jsxs)(eg.u,{children:[(0,i.jsx)(eg.aJ,{asChild:!0,children:y?(0,i.jsx)(V.z,{type:"text",size:"tiny",onClick:E,className:"px-1",icon:(0,i.jsx)(e1.Z,{className:"fill-brand stroke-none"})}):(0,i.jsx)(V.z,{type:"text",size:"tiny",onClick:N,className:"px-1",icon:(0,i.jsx)(e1.Z,{className:"fill-none stroke-foreground-light"})})}),(0,i.jsxs)(eg._v,{side:"bottom",children:[y?"Remove from":"Add to"," favorites"]})]}),(0,i.jsxs)(eg.u,{children:[(0,i.jsx)(eg.aJ,{asChild:!0,children:(0,i.jsx)(V.z,{type:"text",onClick:l,className:"px-1",icon:(0,i.jsx)(e2.Z,{strokeWidth:2})})}),(0,i.jsx)(eg._v,{side:"bottom",children:"Prettify SQL"})]})]}),(0,i.jsxs)(eb.h_,{children:[(0,i.jsx)(eb.$F,{asChild:!0,children:(0,i.jsx)(V.z,{type:"default",iconRight:(0,i.jsx)(ew.Z,{size:14}),children:null===(t=tt.find(e=>e.value===(h?f.limit:m.limit)))||void 0===t?void 0:t.label})}),(0,i.jsx)(eb.AW,{className:"w-42",children:(0,i.jsx)(eb._x,{value:h?f.limit.toString():m.limit.toString(),onValueChange:e=>{h?f.setLimit(Number(e)):m.setLimit(Number(e))},children:tt.map(e=>(0,i.jsx)(eb.qB,{value:e.value.toString(),children:e.label},e.label))})})]}),(0,i.jsx)("div",{className:"flex items-center justify-between gap-x-2",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(e5.Z,{variant:"connected-on-right",onSelectId:()=>{h?f.resetResult(n):m.resetResult(n)}}),(0,i.jsx)(e3.Q,{serviceRoleLabel:"postgres",variant:"connected-on-both"}),(0,i.jsx)(V.z,{onClick:()=>o(),disabled:r||s,type:"primary",size:"tiny",iconRight:s?(0,i.jsx)(H.Z,{className:"animate-spin",size:10,strokeWidth:1.5}):(0,i.jsxs)("div",{className:"flex items-center space-x-1",children:["macos"===c?(0,i.jsx)(e4.Z,{size:10,strokeWidth:1.5}):(0,i.jsx)("p",{className:"text-xs text-foreground-light",children:"CTRL"}),(0,i.jsx)(eN.Z,{size:10,strokeWidth:1.5})]}),className:"rounded-l-none",children:a?"Run selected":"Run"})]})})]})},ti=n(71623),ts=n(47370),tr=n(28316),ta=n(55600),tl=e=>{var t,n,s;let{id:r,rows:l}=e,o="sql-context-menu-"+r,c=(0,w.P)("sqlFolderOrganization"),[d,u]=(0,a.useState)(void 0),p=(0,I.W2)(),m=(0,Z.B0)(),f=c?null===(t=m.results[r])||void 0===t?void 0:t[0]:null===(n=p.results[r])||void 0===n?void 0:n[0],h=()=>{if(d){var e,t,n;let{rowIdx:i,column:s}=d,r=s.key,a=null===(n=null!==(t=null===(e=l[i])||void 0===e?void 0:e[r])&&void 0!==t?t:"")?"":"object"==typeof n||Array.isArray(n)?JSON.stringify(n):n;(0,C.vQ)(a)}};(0,e6.aL)({"Command+c":e=>{e.stopPropagation(),h()},"Control+c":e=>{e.stopPropagation(),h()}},["INPUT","TEXTAREA"]);let{show:x}=(0,ti.av)(),g=(e,t)=>(0,i.jsx)("span",{className:"font-mono text-xs w-full whitespace-pre",onContextMenu:e=>x(e,{id:o}),children:JSON.stringify(t[e])}),v=e=>(0,i.jsx)("div",{className:"flex h-full items-center justify-center font-mono text-xs",children:e}),j=Object.keys(null!==(s=null==l?void 0:l[0])&&void 0!==s?s:[]).map((e,t)=>{let n=l.map(t=>String(t[e]).length).reduce((e,t)=>Math.max(e,t),0);return{idx:t,key:e,name:e,resizable:!0,parent:void 0,level:0,width:Math.max(Math.min(8.25*n,500),100),minWidth:100,maxWidth:void 0,draggable:!1,frozen:!1,sortable:!1,isLastFrozenColumn:!1,renderCell:t=>{let{row:n}=t;return g(e,n)},renderHeaderCell:()=>v(e)}});return l.length<=0?(0,i.jsx)("div",{className:"bg-table-header-light [[data-theme*=dark]_&]:bg-table-header-dark",children:(0,i.jsx)("p",{className:"m-0 border-0 px-6 py-4 font-mono text-sm",children:"Success. No rows returned"})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ts.ZP,{columns:j,rows:l,className:"flex-grow border-t-0",rowClass:()=>"[&>.rdg-cell]:items-center",onSelectedCellChange:function(e){u(e)}}),(0,tr.createPortal)((0,i.jsx)(ti.v2,{id:o,animation:!1,children:(0,i.jsxs)(ti.ck,{onClick:h,children:[(0,i.jsx)(e$.Z,{size:14}),(0,i.jsx)("span",{className:"ml-2 text-xs",children:"Copy cell content"})]})}),document.body),(0,i.jsx)(ta.x,{className:"flex items-center justify-center",children:(0,i.jsxs)("p",{className:"text-xs text-foreground-light",children:[l.length," row",l.length>1?"s":"",void 0!==f.autoLimit&&" (auto limit ".concat(f.autoLimit," rows)")]})})]})},to=e=>{var t,n,s,r,a,l,o,c,d,u;let{id:p,isExecuting:f,isDisabled:h,isDebugging:x,onDebug:g}=e,{ref:v}=(0,m.UO)(),j=(0,z.TF)(),_=(0,b.l)(),N=(0,I.W2)(),S=(0,Z.B0)(),C=(0,w.P)("sqlFolderOrganization")?null===(t=S.results[p])||void 0===t?void 0:t[0]:null===(n=N.results[p])||void 0===n?void 0:n[0],{data:E}=(0,y.G)({orgSlug:null==_?void 0:_.slug}),q=(0,P.$w)(E),R=(null==C?void 0:null===(r=C.error)||void 0===r?void 0:null===(s=r.message)||void 0===s?void 0:s.includes("canceling statement due to statement timeout"))||(null==C?void 0:null===(l=C.error)||void 0===l?void 0:null===(a=l.message)||void 0===a?void 0:a.includes("upstream request timeout"));if(f)return(0,i.jsxs)("div",{className:"flex items-center gap-x-4 px-6 py-4 bg-table-header-light [[data-theme*=dark]_&]:bg-table-header-dark",children:[(0,i.jsx)(H.Z,{size:14,className:"animate-spin"}),(0,i.jsx)("p",{className:"m-0 border-0 font-mono text-sm",children:"Running..."})]});if(null==C?void 0:C.error){let e=(null!==(u=null===(c=C.error)||void 0===c?void 0:null===(o=c.formattedError)||void 0===o?void 0:o.split("\n"))&&void 0!==u?u:[]).filter(e=>e.length>0),t=j.selectedDatabaseId!==v&&C.error.message.includes("in a read-only transaction");return(0,i.jsx)("div",{className:"bg-table-header-light [[data-theme*=dark]_&]:bg-table-header-dark",children:(0,i.jsxs)("div",{className:"flex flex-row justify-between items-start py-4 px-6 gap-x-4",children:[R?(0,i.jsxs)("div",{className:"flex flex-col gap-y-1",children:[(0,i.jsx)("p",{className:"font-mono text-sm",children:"SQL query ran into an upstream timeout"}),(0,i.jsxs)("p",{className:"font-mono text-sm text-foreground-light",children:["You can either"," ",(0,i.jsx)("a",{target:"_blank",rel:"noreferrer",className:"underline transition hover:text-foreground",href:"https://supabase.com/docs/guides/platform/performance#examining-query-performance",children:"optimize your query"}),", or"," ",(0,i.jsx)("a",{target:"_blank",rel:"noreferrer",className:"underline transition hover:text-foreground",href:"https://supabase.com/docs/guides/database/timeouts",children:"increase the statement timeout"}),"."]})]}):(0,i.jsxs)("div",{className:"",children:[e.length>0?e.map((e,t)=>(0,i.jsx)("pre",{className:"font-mono text-sm text-wrap",children:e},"error-".concat(t))):(0,i.jsxs)("p",{className:"font-mono text-sm",children:["Error: ",null===(d=C.error)||void 0===d?void 0:d.message]}),C.autoLimit&&(0,i.jsxs)("p",{className:"text-sm text-foreground-light",children:["Note: A limit of ",C.autoLimit,' was applied to your query. If this was the cause of a syntax error, try selecting "No limit" instead and re-run the query.']}),t&&(0,i.jsx)("p",{className:"text-sm text-foreground-light",children:"Note: Read replicas are for read only queries. Run write queries on the primary database instead."})]}),(0,i.jsxs)("div",{className:"flex items-center gap-x-2",children:[t&&(0,i.jsx)(V.z,{className:"py-2",type:"default",onClick:()=>{j.setSelectedDatabaseId(v),N.resetResult(p)},children:"Switch to primary database"}),!q&&(0,i.jsx)(V.z,{icon:(0,i.jsx)(D.c,{className:"scale-75 w-3 h-3",loading:x}),disabled:!!h||x,onClick:g,children:"Debug with Supabase AI"})]})]})})}return C?(0,i.jsx)("div",{className:"h-full flex flex-col",children:(0,i.jsx)(tl,{id:p,rows:C.rows})}):(0,i.jsx)("div",{className:"bg-table-header-light [[data-theme*=dark]_&]:bg-table-header-dark",children:(0,i.jsxs)("p",{className:"m-0 border-0 px-6 py-4 text-sm text-foreground-light",children:["Click ",(0,i.jsx)("code",{children:"Run"})," to execute your query."]})})};let tc={type:"bar",cumulative:!1,xKey:"",yKey:"",showLabels:!1,showGrid:!1};var td=e=>{var t,n,s;let{id:r,isExecuting:a,isDebugging:l,isDisabled:o,hasSelection:c,prettifyQuery:d,executeQuery:u,onDebug:f}=e,{ref:h}=(0,m.UO)(),x=(0,eq.NL)(),g=(0,I.W2)(),v=(0,Z.B0)(),j=(0,w.P)("sqlFolderOrganization"),y=null===(t=g.snippets[r])||void 0===t?void 0:t.snippet,_=eL.$.list(h),b=j?null===(n=v.results[r])||void 0===n?void 0:n[0]:null===(s=g.results[r])||void 0===s?void 0:s[0],{mutate:N}=(0,eR.R)({invalidateQueriesOnSuccess:!1,onMutate:async e=>{let{payload:t}=e;if("sql"!==t.type||!("chart"in t.content))return;await x.cancelQueries(_);let n={...y,content:{...y.content,chart:t.content.chart}};j?v.updateSnippet({id:r,snippet:n}):g.updateSnippet(r,n)},onError:async(e,t,n)=>{p.ZP.error("Failed to update chart. Please try again.")}}),S=y&&"sql"===y.type&&y.content.chart?y.content.chart:tc;return(0,i.jsxs)(ek.mQ,{defaultValue:"results",className:"w-full h-full flex flex-col",children:[(0,i.jsxs)(ek.dr,{className:"flex justify-between gap-2 pl-6 pr-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)(ek.SP,{className:"py-3 text-xs",value:"results",children:(0,i.jsx)("span",{className:"translate-y-[1px]",children:"Results"})}),(0,i.jsx)(ek.SP,{className:"py-3 text-xs",value:"chart",children:(0,i.jsx)("span",{className:"translate-y-[1px]",children:"Chart"})}),(null==b?void 0:b.rows)&&(0,i.jsx)(eX,{id:r})]}),(0,i.jsx)(tn,{id:r,isExecuting:a,isDisabled:o,hasSelection:c,prettifyQuery:d,executeQuery:u})]}),(0,i.jsx)(ek.nU,{className:"mt-0 h-full",value:"results",children:(0,i.jsx)(to,{id:r,isExecuting:a,isDisabled:o,onDebug:f,isDebugging:l})}),(0,i.jsx)(ek.nU,{className:"mt-0 h-full",value:"chart",children:(0,i.jsx)(eP,{results:b,config:S,onConfigChange:function(e){h&&(null==y?void 0:y.id)&&N({projectRef:h,payload:{...y,id:y.id,description:y.description||"",project_id:y.project_id||0,content:{...y.content,content_id:r,chart:e}}})}})})]})};let tu=u()(()=>n.e(8845).then(n.bind(n,68845)),{loadableGenerated:{webpack:()=>[68845]},ssr:!1}),tp=u()(()=>Promise.resolve().then(n.bind(n,79534)).then(e=>{let{DiffEditor:t}=e;return t}),{loadableGenerated:{webpack:()=>[79534]},ssr:!1});var tm=()=>{var e,t,n;let{ref:s,id:l}=(0,m.UO)(),d=(0,r.useRouter)(),u=(0,m.Mk)(),U=(0,a.useMemo)(()=>(0,C.k$)(),[l]),M=l&&"new"!==l?l:U,{profile:V}=(0,E.Un)(),Q=(0,N.V)(),B=(0,b.l)(),K=(0,k.WZ)(),G=(0,I.W2)(),Y=(0,Z.B0)(),$=(0,A.z6)(),X=(0,z.TF)(),J=(0,w.P)("sqlFolderOrganization"),{mutate:ee}=(0,j.X)(),{mutateAsync:et}=(0,h.g)(),{mutateAsync:en,isLoading:ei}=(0,f.V)(),[es,er]=(0,a.useState)(),[ea,el]=(0,a.useState)(),[eo,ec]=(0,a.useState)(),[ed,eu]=(0,a.useState)(),[ep,em]=(0,a.useState)(!1),ef=(0,a.useRef)(null),eh=(0,a.useRef)(null),ex=(0,a.useRef)(null),{data:eg}=(0,y.G)({orgSlug:null==B?void 0:B.slug}),{data:ej,isSuccess:ey}=(0,g.b)({projectRef:s}),eb=(0,P.$w)(eg),[eN,ew]=(0,_.l)(S.dA.SQL_EDITOR_AI_OPEN,!0),[eq,eR]=(0,a.useState)(!1),eL=(0,b.l)(),ek=null!==(n=null==eL?void 0:null===(e=eL.opt_in_tags)||void 0===e?void 0:e.includes(S.PV.AI_SQL))&&void 0!==n&&n,[ez]=(0,_.l)(S.dA.SQL_EDITOR_AI_SCHEMA,!0),eA=(ek||!S.Qy)&&ez,[eI,eZ]=(0,a.useState)(!1),[,eT]=(0,_.l)("supabase_sql-editor-ai-query-count",0),[eF,eD]=(0,a.useState)((0,C.k$)()),[eO,eP]=(0,a.useState)(void 0),[eU,eM]=(0,a.useState)(!0),[eV,eW]=(0,a.useState)([]),{data:eQ,refetch:eB}=(0,x.u)({projectRef:null==Q?void 0:Q.ref,connectionString:null==Q?void 0:Q.connectionString},{enabled:eA}),eK=eA?null==eQ?void 0:eQ.map(e=>e.sql.trim()):void 0,eG=!!eo,eY=J?!(M in Y.snippets&&void 0!==Y.snippets[M].snippet.content):!(M&&s&&G.loaded[s]),eH="new"!==l&&eY,{messages:e$,append:eX,isLoading:eJ}=(0,o.RJ)({id:eF,api:"".concat(S.GW,"/api/ai/sql/generate-v2"),body:{existingSql:null===(t=ef.current)||void 0===t?void 0:t.getValue(),entityDefinitions:ek?eK:void 0}}),e0=(0,a.useMemo)(()=>[...e$.map(e=>({...e,isDebug:!1}))].sort((e,t)=>{var n,i,s,r;return(null!==(s=null===(n=e.createdAt)||void 0===n?void 0:n.getTime())&&void 0!==s?s:0)-(null!==(r=null===(i=t.createdAt)||void 0===i?void 0:i.getTime())&&void 0!==r?r:0)||e.role.localeCompare(t.role)}),[e$]),{mutate:e1,isLoading:e2}=(0,v.r)({onSuccess(e,t){M&&(J?Y.addResult(M,e.result,t.autoLimit):G.addResult(M,e.result,t.autoLimit)),eB()},onError(e,t){if(M){if(e.position&&eh.current){var n,i,s;let t=ef.current,r=eh.current,a=ep&&null!==(i=null==t?void 0:null===(n=t.getSelection())||void 0===n?void 0:n.startLineNumber)&&void 0!==i?i:0,l=null!==(s=e.formattedError)&&void 0!==s?s:"",o=l.slice(l.indexOf("LINE")),c=a+Number(o.slice(0,o.indexOf(":")).split(" ")[1]);if(!isNaN(c)){let e=null==t?void 0:t.deltaDecorations([],[{range:new r.Range(c,1,c,20),options:{isWholeLine:!0,inlineClassName:"bg-warning-400"}}]);e&&(null==t||t.revealLineInCenter(c),eW(e))}}J?Y.addResultError(M,e,t.autoLimit):G.addResultError(M,e,t.autoLimit)}}}),e4=(0,a.useCallback)(async(e,t)=>{try{let{title:n}=await et({sql:t});J?Y.renameSnippet({id:e,name:n}):G.renameSnippet(e,n)}catch(e){}},[et,G]),e3=(0,a.useCallback)(async()=>{if(eG)return;let e=(J?(0,Z.pB)():(0,I.X8)()).snippets[M];if(ef.current&&Q){var t,n,i,s;let r=ef.current,a=r.getSelection(),l=a?null===(t=r.getModel())||void 0===t?void 0:t.getValueInRange(a):void 0,o=e?null!==(s=l||(null===(n=ef.current)||void 0===n?void 0:n.getValue()))&&void 0!==s?s:e.snippet.content.sql:l||(null===(i=ef.current)||void 0===i?void 0:i.getValue());ee({projectRef:Q.ref,connectionString:Q.connectionString,sql:o},{onSuccess:e=>{var t;let n=null==ef?void 0:null===(t=ef.current)||void 0===t?void 0:t.getModel();ef.current&&n&&(ef.current.executeEdits("apply-prettify-edit",[{text:e.result,range:n.getFullModelRange()}]),G.setSql(M,e.result))}})}},[ee,M,eG,Q,G]),e5=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(eG)return;let t=(J?(0,Z.pB)():(0,I.X8)()).snippets[M];if(null!==ef.current&&!e2&&void 0!==Q){var n,i,s,r,a;let l=ef.current,o=l.getSelection(),c=o?null===(n=l.getModel())||void 0===n?void 0:n.getValueInRange(o):void 0,d=t?null!==(a=c||(null===(i=ef.current)||void 0===i?void 0:i.getValue()))&&void 0!==a?a:t.snippet.content.sql:c||(null===(s=ef.current)||void 0===s?void 0:s.getValue()),u=(0,eS.mw)(d);if(!e&&u){eR(!0);return}eb||(null==t?void 0:t.snippet.name)!==eE.$C||e4(M,d),eV.length>0&&(null==l||l.deltaDecorations(eV,[]),eW([]));let m=$(),f=null==ej?void 0:null===(r=ej.find(e=>e.identifier===X.selectedDatabaseId))||void 0===r?void 0:r.connectionString;if(S.Qy&&!f)return p.ZP.error("Unable to run query: Connection string is missing");let{appendAutoLimit:h}=(0,eS.c6)(d,G.limit),x=(0,eS.se)(d,G.limit);e1({projectRef:Q.ref,connectionString:f,sql:(0,q.Jh)(x,{projectRef:Q.ref,role:m}),autoLimit:h?G.limit:void 0,isRoleImpersonationEnabled:(0,A.Gm)(m),handleError:e=>{throw e}})}},[eG,M,e2,Q,eb,e1,$,e4,X.selectedDatabaseId,ej]),e8=(0,a.useCallback)(async(e,t)=>{if(!s)return console.error("Project ref is required");try{let n=(0,eS.UA)({id:(0,C.k$)(),name:t,sql:e,owner_id:null==V?void 0:V.id,project_id:null==Q?void 0:Q.id});G.addSnippet(n,s),G.addNeedsSaving(n.id),d.push("/project/".concat(s,"/sql/").concat(n.id))}catch(e){p.ZP.error("Failed to create new query: ".concat(e.message))}},[null==V?void 0:V.id,null==Q?void 0:Q.id,s,d,G]),e9=(0,a.useCallback)(e=>{var t,n,i,s,r;let{id:a,diffType:l,sql:o}=e,c=null===(t=ef.current)||void 0===t?void 0:t.getModel();c&&((eT(e=>e+1),0===(null!==(i=null===(n=ef.current)||void 0===n?void 0:n.getValue())&&void 0!==i?i:"").length)?null===(s=ef.current)||void 0===s||s.executeEdits("apply-ai-message",[{text:"".concat(eE.eg,"\n\n").concat(o),range:c.getFullModelRange()}]):(er(a),ec({original:(null===(r=ef.current)||void 0===r?void 0:r.getValue())||"",modified:o}),eP(l)))},[eT]),e6=(0,a.useCallback)(async()=>{var e,t;try{let n=J?Y.snippets[M]:G.snippets[M],i=J?null===(e=Y.results[M])||void 0===e?void 0:e[0]:null===(t=G.results[M])||void 0===t?void 0:t[0],{solution:s,sql:r}=await en({sql:n.snippet.content.sql.replace(eE.eg,"").trim(),errorMessage:i.error.message,entityDefinitions:eK}),a=eE.eg+"\n\n"+(0,L.WU)(r,{language:"postgresql",keywordCase:"lower"});el(s),ec({original:n.snippet.content.sql,modified:a}),eP(ev.U.Modification)}catch(e){e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message&&p.ZP.error("Sorry, the assistant failed to debug your query! Please try again with a different one.")}},[en,eK,M,G.results,G.snippets]),e7=(0,a.useCallback)(async()=>{try{if(eZ(!0),!eo||!ef.current||!ex.current)return;let e=ef.current.getModel(),t=ex.current.getModel();if(!e||!t)return;let n=t.modified.getValue();if(eO===ev.U.NewSnippet){let{title:e}=await et({sql:n});await e8(n,e)}else ef.current.executeEdits("apply-ai-edit",[{text:n,range:e.getFullModelRange()}]),ed&&G.renameSnippet(M,ed);R.Z.sendEvent({category:"sql_editor",action:"ai_suggestion_accepted",label:ea?"debug_snippet":"edit_snippet"},u,d),er(void 0),eP(ev.U.Modification),el(void 0),ec(void 0),eu(void 0)}finally{eZ(!1)}},[eo,eO,e8,et,ea,u,d,M,ed,G]),te=(0,a.useCallback)(()=>{R.Z.sendEvent({category:"sql_editor",action:"ai_suggestion_rejected",label:ea?"debug_snippet":"edit_snippet"},u,d),er(void 0),el(void 0),ec(void 0),eu(void 0)},[ea,u,d]);(0,a.useEffect)(()=>{let e=e=>{if(eG)switch(e.key){case"Enter":e7();return;case"Escape":te();return}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[eG,e7,te]),(0,a.useEffect)(()=>{var e;let t=e=>{var t;let{original:n,modified:i}=e,s=null===(t=ex.current)||void 0===t?void 0:t.getModel();s&&s.original&&s.modified&&(s.original.setValue(n),s.modified.setValue(i))},n=null===(e=ex.current)||void 0===e?void 0:e.getModel();try{if((null==n?void 0:n.original)&&n.modified&&eo)switch(eO){case ev.U.Modification:{let e=(0,eS.GS)(eo);t(e);return}case ev.U.Addition:{let e=(0,eS.EF)(eo);t(e);return}case ev.U.NewSnippet:{let e=(0,eS.BJ)(eo);t(e);return}default:throw Error("Unknown diff type '".concat(eO,"'"))}}catch(e){console.log(e)}},[eO,eo]),(0,a.useEffect)(()=>{eM(!1)},[]),(0,a.useEffect)(()=>{if(ey){let e=ej.find(e=>e.identifier===s);X.setSelectedDatabaseId(null==e?void 0:e.identifier)}},[ey,ej,s]);let tt=(0,a.useMemo)(()=>{if(!eo)return{original:"",modified:""};switch(eO){case ev.U.Modification:return(0,eS.GS)(eo);case ev.U.Addition:return(0,eS.EF)(eo);case ev.U.NewSnippet:return(0,eS.BJ)(eo);default:return{original:"",modified:""}}},[eO,eo]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(O.Z,{visible:eq,title:"Destructive operation",danger:!0,description:"We've detected a potentially destructive operation in the query. Please confirm that you would like to execute this query.",buttonLabel:"Run destructive query",onSelectCancel:()=>{eR(!1),setTimeout(()=>{var e;return null===(e=ef.current)||void 0===e?void 0:e.focus()},100)},onSelectConfirm:()=>{eR(!1),e5(!0)}}),(0,i.jsxs)("div",{className:"flex h-full",children:[(0,i.jsxs)(T.pO,{className:"h-full relative",direction:"vertical",autoSaveId:S.dA.SQL_EDITOR_SPLIT_SIZE,children:[(eN||eG)&&!eb&&(0,i.jsx)(W,{onClickSettings:()=>{K.setShowAiSettingsModal(!0)},children:eG?(0,i.jsxs)(c.E.div,{layoutId:"ask-ai-input-container",variants:{visible:{borderRadius:0,x:0},hidden:{x:100}},initial:eU?"visible":"hidden",animate:"visible",className:(0,F.cn)("flex flex-row items-center gap-3 justify-end px-2 py-2 w-full z-10","bg-brand-200 border-b border-brand-400  !shadow-none"),children:[ea&&(0,i.jsx)("div",{className:"h-full w-full flex flex-row items-center overflow-y-hidden text-sm text-brand-600",children:ea}),(0,i.jsx)(eC,{loading:eI,selectedDiffType:eO||ev.U.Modification,onChangeDiffType:e=>eP(e),onAccept:e7,onCancel:te})]},"ask-ai-input-container"):null}),(0,i.jsx)(T.ee,{collapsible:!0,collapsedSize:10,minSize:20,children:(0,i.jsxs)("div",{className:"flex-grow overflow-y-auto border-b h-full",children:[!eN&&(0,i.jsx)(c.E.button,{layoutId:"ask-ai-input-icon",transition:{duration:.1},onClick:()=>ew(!eN),className:(0,F.cn)("group absolute z-10 rounded-lg right-[24px] top-4 transition-all duration-200 ease-out"),children:(0,i.jsx)(D.c,{loading:!1,allowHoverEffect:!0})}),eH?(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,i.jsx)(H.Z,{className:"animate-spin text-brand"})}):(0,i.jsxs)(i.Fragment,{children:[eG&&(0,i.jsx)(c.E.div,{className:"w-full h-full",variants:{visible:{opacity:1,filter:"blur(0px)"},hidden:{opacity:0,filter:"blur(10px)"}},initial:"hidden",animate:"visible",children:(0,i.jsx)(tp,{theme:"supabase",language:"pgsql",original:tt.original,modified:tt.modified,onMount:e=>{ex.current=e},options:{fontSize:13}})}),(0,i.jsx)(c.E.div,{variants:{visible:{opacity:1,filter:"blur(0px)"},hidden:{opacity:0,filter:"blur(10px)"}},initial:"hidden",animate:eG?"hidden":"visible",className:"w-full h-full",children:(0,i.jsx)(tu,{autoFocus:!0,id:M,editorRef:ef,monacoRef:eh,executeQuery:e5,onHasSelection:em})},M)]})]})}),(0,i.jsx)(T.Dp,{withHandle:!0}),(0,i.jsx)(T.ee,{collapsible:!0,collapsedSize:10,minSize:20,children:eH?(0,i.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,i.jsx)(H.Z,{className:"animate-spin text-brand"})}):(0,i.jsx)(td,{id:M,isExecuting:e2,isDisabled:eG,isDebugging:ei,hasSelection:ep,prettifyQuery:e3,executeQuery:e5,onDebug:e6})})]}),eN&&(0,i.jsx)(e_,{messages:e0,selectedMessage:es,loading:eJ,onSubmit:e=>eX({content:e,role:"user",createdAt:new Date}),onClearHistory:()=>eD((0,C.k$)()),onDiff:e9,onClose:()=>ew(!1)})]})]})},tf=n(67366),th=n(57663);function tx(e){return e.replace(/^\"/,"").replace(/\"$/,"").replace(/\"\"/,'"')}function tg(e){return e!=e.toLowerCase()?'"'.concat(e,'"'):e}var tv=n(18734),tj=n(7509),ty=n(18592);let t_=()=>"\nSELECT word FROM pg_get_keywords();\n".trim(),tb=function(e){let{projectRef:t,connectionString:n}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,ty.cp)({projectRef:t,connectionString:n,sql:t_(),queryKey:["keywords"]},{select:e=>({result:e.result.map(e=>e.word.toLocaleLowerCase())}),...i})};var tN=n(49650),tw=n(39338);let tS=()=>{let e=(0,r.useRouter)(),t=(0,s.useMonaco)(),{id:n,ref:o,content:c}=(0,l.U)(),{project:d}=(0,eY.d2)(),u=(0,k.WZ)(),p=(0,I.W2)(),m=(0,Z.B0)(),f=(0,I.Fy)(o),h=(0,w.P)("sqlFolderOrganization"),{mutateAsync:x}=(0,j.X)(),[g]=(0,_.l)(S.dA.SQL_EDITOR_INTELLISENSE,!0);async function v(e){try{if(!d)throw Error("No project");return(await x({projectRef:d.ref,connectionString:d.connectionString,sql:e})).result}catch(t){return console.error("formatPgsql error:",t),e}}(0,tv.N)({projectRef:o,id:n},{retry:!1,enabled:!!(h&&"new"!==n&&"function"==typeof m.addSnippet),onSuccess:e=>{m.addSnippet({projectRef:o,snippet:e})},onError:()=>{}});let{data:y,isSuccess:b}=tb({projectRef:null==d?void 0:d.ref,connectionString:null==d?void 0:d.connectionString},{enabled:g}),{data:N,isSuccess:C}=(0,tj.R)({projectRef:null==d?void 0:d.ref,connectionString:null==d?void 0:d.connectionString},{enabled:g}),{data:E,isSuccess:q}=(0,tN.Q)({projectRef:null==d?void 0:d.ref,connectionString:null==d?void 0:d.connectionString},{enabled:g}),{data:R,isSuccess:L}=(0,tw.K)({projectRef:null==d?void 0:d.ref,connectionString:null==d?void 0:d.connectionString},{enabled:g}),z=(0,a.useRef)(null),A=(0,a.useRef)(v);A.current=v;let T=g&&L&&q&&b&&C;return T&&(null===z.current&&(z.current={}),z.current.tableColumns=null==R?void 0:R.result,z.current.schemas=E,z.current.keywords=null==y?void 0:y.result,z.current.functions=N),(0,a.useEffect)(()=>{"new"===n&&void 0!==u.dashboardHistory.sql&&void 0===c&&void 0!==f.find(e=>e.id===u.dashboardHistory.sql)&&e.push("/project/".concat(o,"/sql/").concat(u.dashboardHistory.sql))},[n,f,c]),(0,a.useEffect)(()=>{if(t){let e=t.languages.registerDocumentFormattingEditProvider("pgsql",{async provideDocumentFormattingEdits(e){let t=e.getValue(),i=await A.current(t);return n&&p.setSql(n,i),[{range:e.getFullModelRange(),text:i}]}});return()=>e.dispose()}},[t]),(0,a.useEffect)(()=>{if(T){let e,n;return t&&T&&(e=t.languages.registerCompletionItemProvider("pgsql",{triggerCharacters:[" ",".",'"'],provideCompletionItems:function(e,n,i){try{let s=new th.Z(e,n.column-2,n.lineNumber-1);if('"'===i.triggerCharacter)return function(e,t,n){let i=[];if(!n.isFowardDQuote())return{suggestions:i};if(n.next(),n.isNextPeriod()){let s=n.readIdent(),r=!1;s.match(/^\".*?\"$/)&&(r=!0,s=tx(s));let a=t.current.tableColumns.find(e=>r&&e.tablename===s||!r&&e.tablename.toLocaleLowerCase()==s.toLocaleLowerCase());if(!a)return{suggestions:i};a.columns.forEach(t=>{i.push({label:t.attname,kind:e.languages.CompletionItemKind.Property,detail:t.data_type,insertText:t.attname})})}else t.current.tableColumns.forEach(t=>{i.push({label:t.tablename,kind:e.languages.CompletionItemKind.Class,insertText:t.tablename})});return{suggestions:i}}(t,z,s);if("."===i.triggerCharacter)return function(e,t,n){let i=[],s=n.readIdents(3).map(e=>{let t=!1;return e.match(/^\".*?\"$/)&&(t=!0,e=tx(e)),{isQuoted:t,name:e}}),r=0,a=t.current.schemas.find(e=>{var t,n;let i=s&&s.length>r?s[r]:{};return i.isQuoted&&e.name===i.name||!i.isQuoted&&(null===(t=e.name)||void 0===t?void 0:t.toLocaleLowerCase())==(null===(n=i.name)||void 0===n?void 0:n.toLocaleLowerCase())});if(a?r++:a=t.current.schemas.find(e=>"public"==e.name),s.length==r)return t.current.tableColumns.forEach(t=>{t.schemaname==a.name&&i.push({label:t.tablename,kind:e.languages.CompletionItemKind.Class,detail:"public"!==t.schemaname?t.schemaname:null,insertText:tg(t.tablename)})}),{suggestions:i};let l=t.current.tableColumns.find(e=>{var t,n;let i=s&&s.length>r?s[r]:{};return e.schemaname==a.name&&i.isQuoted&&e.tablename===i.name||!i.isQuoted&&(null===(t=e.tablename)||void 0===t?void 0:t.toLocaleLowerCase())==(null===(n=i.name)||void 0===n?void 0:n.toLocaleLowerCase())});return l&&l.columns.forEach(t=>{i.push({label:t.attname,kind:e.languages.CompletionItemKind.Property,detail:t.data_type,insertText:tg(t.attname)})}),{suggestions:i}}(t,z,s);return function(e,t){var n,i,s,r;let a=[];return(null===(n=t.current.keywords)||void 0===n?void 0:n.length)>0&&t.current.keywords.forEach(t=>{a.push({label:t,kind:e.languages.CompletionItemKind.Keyword,insertText:t})}),(null===(i=t.current.schemas)||void 0===i?void 0:i.length)>0&&t.current.schemas.forEach(t=>{a.push({label:t.name,kind:e.languages.CompletionItemKind.Keyword,insertText:t.name})}),(null===(s=t.current.tableColumns)||void 0===s?void 0:s.length)>0&&t.current.tableColumns.forEach(t=>{let n="public"==t.schemaname?t.tablename:t.schemaname+"."+t.tablename;a.push({label:t.tablename,detail:"public"!==t.schemaname?t.schemaname:null,kind:t.is_table?e.languages.CompletionItemKind.Class:e.languages.CompletionItemKind.Interface,insertText:tg(n)}),t.columns.forEach(n=>{if(!n)return;let i=a.find(t=>t.label===(null==n?void 0:n.attname)&&t.kind===e.languages.CompletionItemKind.Field&&t.detail===(null==n?void 0:n.data_type));i?(i.tables.push(t.tablename),i.tables.sort(),i.documentation=i.tables.join(", ")):a.push({label:n.attname,kind:e.languages.CompletionItemKind.Field,detail:n.data_type,documentation:t.tablename,tables:[t.tablename],insertText:tg(n.attname)})})}),(null===(r=t.current.functions)||void 0===r?void 0:r.length)>0&&t.current.functions.forEach(t=>{a.push({label:t.name,kind:e.languages.CompletionItemKind.Function,detail:t.return_type,insertText:t.name})}),{suggestions:a}}(t,z)}catch(e){return{suggestions:[]}}}}),n=t.languages.registerSignatureHelpProvider("pgsql",{signatureHelpTriggerCharacters:["(",","],provideSignatureHelp:function(e,t){let n=new th.Z(e,t.column-2,t.lineNumber-1),i=n.readArguments();if(i<0)return null;let s=n.readIdent();if(!s||s.match(/^\".*?\"$/))return null;let r=z.current.functions.find(e=>e.name.toLocaleLowerCase()===s.toLocaleLowerCase());if(!r||!r.args||r.args.length<i)return null;let a=Math.min(i,r.args.length-1),l=[];return l.push({label:"".concat(r.name,"(").concat(r.argument_types,")"),parameters:r.args.map(e=>({label:e.name}))}),{value:{signatures:l,activeSignature:0,activeParameter:a},dispose:()=>{}}}})),()=>{null==e||e.dispose(),null==n||n.dispose()}}},[T]),(0,i.jsx)("div",{className:"flex-1 overflow-auto",children:(0,i.jsx)(tm,{})})};tS.getLayout=e=>(0,i.jsx)(tf.Z,{title:"SQL",children:e});var tC=tS},24413:function(e,t,n){"use strict";n.d(t,{pB:function(){return g},B0:function(){return v}});var i=n(54073),s=n.n(i),r=n(30733),a=n.n(r),l=n(62202),o=n(9162),c=n(4741),d=n(60052),u=n(18519),p=n(69795),m=n(31696);async function f(e,t){let{projectRef:n,id:i,name:s,parentId:r}=e,a={name:s};r&&(a.parentId=r);let{data:l,error:o}=await (0,m.r$)("/platform/projects/{ref}/content/folders/{id}",{params:{path:{ref:n,id:i}},body:a,signal:t});if(o)throw(0,m.S3)(o);return l}n(65467);let h="new-folder",x=(0,o.sj)({folders:{},snippets:{},favoriteSnippets:{},results:{},loaded:{},needsSaving:(0,d.C6)([]),savingStates:{},limit:100,order:"inserted_at",get sortedSnippets(){return Object.values(x.snippets).map(e=>e.snippet).sort((e,t)=>"name"===x.order?e.name.localeCompare(t.name):new Date(t.inserted_at).valueOf()-new Date(e.inserted_at).valueOf())},get sortedFavoriteSnippets(){return Object.values(x.favoriteSnippets).map(e=>e.snippet).sort((e,t)=>{var n,i;return"name"===x.order?e.name.localeCompare(t.name):new Date(null!==(n=t.inserted_at)&&void 0!==n?n:"").valueOf()-new Date(null!==(i=e.inserted_at)&&void 0!==i?i:"").valueOf()})},initializeRemoteSnippets:e=>{let{projectRef:t,data:n,sort:i}=e,{folders:s,contents:r}=n;null==s||s.forEach(e=>{x.folders[e.id]={projectRef:t,folder:e}}),null==r||r.forEach(e=>{x.addSnippet({projectRef:t,snippet:e})}),x.loaded[t]=!0,x.order=i},initializeFavoriteSnippets:e=>{let{projectRef:t,snippets:n}=e;n.forEach(e=>{var n;e.id&&(null===(n=x.favoriteSnippets[e.id])||void 0===n?void 0:n.snippet)===void 0&&(x.favoriteSnippets[e.id]={projectRef:t,snippet:e})})},setOrder:e=>x.order=e,addSnippet:e=>{var t,n;let{projectRef:i,snippet:s}=e;s.id&&(null===(n=x.snippets[s.id])||void 0===n?void 0:null===(t=n.snippet)||void 0===t?void 0:t.content)===void 0&&(x.snippets[s.id]={projectRef:i,splitSizes:[50,50],snippet:s},x.results[s.id]=[],x.savingStates[s.id]="IDLE")},updateSnippet:e=>{let{id:t,snippet:n,skipSave:i=!1}=e;x.snippets[t]&&(x.snippets[t].snippet={...x.snippets[t].snippet,...n},i||x.needsSaving.add(t))},setSql:(e,t)=>{x.snippets[e]&&(x.snippets[e].snippet.content.sql=t,x.needsSaving.add(e))},renameSnippet:e=>{let{id:t,name:n,description:i}=e;x.snippets[t]&&(x.snippets[t]={...x.snippets[t],snippet:{...x.snippets[t].snippet,name:n,description:i}},x.needsSaving.add(t))},removeSnippet:e=>{let{[e]:t,...n}=x.snippets;x.snippets=n;let{[e]:i,...s}=x.results;x.results=s,x.needsSaving.delete(e)},addNewFolder:e=>{let{projectRef:t}=e;x.folders[h]={projectRef:t,status:"editing",folder:{id:h,name:"",owner_id:-1,project_id:-1,parent_id:null}}},editFolder:e=>{x.folders[e]={...x.folders[e],status:"editing"}},saveFolder:e=>{let{id:t,name:n}=e,i=x.folders[t].folder.name!==n;x.folders[t]={projectRef:x.folders[t].projectRef,status:i?"saving":"idle",folder:{...x.folders[t].folder,id:t,name:n}},i&&x.needsSaving.add(t)},removeFolder:e=>{let{[e]:t,...n}=x.folders;x.folders=n},setLimit:e=>x.limit=e,addNeedsSaving:e=>x.needsSaving.add(e),addFavorite:e=>{x.snippets[e]&&(x.snippets[e]={...x.snippets[e],snippet:{...x.snippets[e].snippet,favorite:!0}},x.favoriteSnippets[e]={projectRef:x.snippets[e].projectRef,snippet:{...x.snippets[e].snippet,folder_id:void 0}},x.needsSaving.add(e))},removeFavorite:e=>{if(x.snippets[e]){x.snippets[e]={...x.snippets[e],snippet:{...x.snippets[e].snippet,favorite:!1}};let{[e]:t,...n}=x.favoriteSnippets;x.favoriteSnippets=n,x.needsSaving.add(e)}},shareSnippet:(e,t)=>{x.snippets[e]&&(x.snippets[e]={...x.snippets[e],snippet:{...x.snippets[e].snippet,visibility:t,folder_id:null}},x.needsSaving.add(e))},addResult:(e,t,n)=>{x.results[e]&&x.results[e].unshift({rows:t,autoLimit:n})},addResultError:(e,t,n)=>{x.results[e]&&x.results[e].unshift({rows:[],error:t,autoLimit:n})},resetResult:e=>{x.results[e]&&(x.results[e]=[])}}),g=()=>(0,o.CO)(x),v=e=>(0,c.R)(x,e);async function j(e,t,n){try{x.savingStates[e]="UPDATING",await (0,u.T)({projectRef:t,payload:n}),x.savingStates[e]="IDLE"}catch(t){x.savingStates[e]="UPDATING_FAILED"}}let y=a()(e=>s()(j,1e3)),_=(e,t,n)=>y(e)(e,t,n);async function b(e,t,n){try{if(e===h){let e=await (0,p.b)({projectRef:t,name:n});l.ZP.success("Successfully created folder"),x.removeFolder(h),x.folders[e.id]={projectRef:t,status:"idle",folder:e}}else await f({projectRef:t,id:e,name:n}),l.ZP.success("Successfully updated folder"),x.folders[e]={...x.folders[e],status:"idle"}}catch(e){l.ZP.error("Failed to save folder: ".concat(e.message))}}(0,d.mW)(x,{name:"sqlEditorState",enabled:!0}),(0,o.Ld)(x.needsSaving,()=>{let e=g();Array.from(e.needsSaving).forEach(t=>{let n=e.snippets[t],i=e.folders[t];if(n){var s,r,a,l;_(t,n.projectRef,{id:t,type:"sql",name:null!==(s=n.snippet.name)&&void 0!==s?s:"Untitled",description:null!==(r=n.snippet.description)&&void 0!==r?r:"",visibility:null!==(a=n.snippet.visibility)&&void 0!==a?a:"user",project_id:null!==(l=n.snippet.project_id)&&void 0!==l?l:0,owner_id:n.snippet.owner_id,folder_id:n.snippet.folder_id,content:{...n.snippet.content,content_id:t,favorite:n.snippet.favorite}}),x.needsSaving.delete(t)}else i&&(b(t,i.projectRef,i.folder.name),x.needsSaving.delete(t))})})},98402:function(e,t,n){"use strict";n.d(t,{Z:function(){return q}});var i={};n.r(i),n.d(i,{create:function(){return N},list:function(){return j},pgFunctionArrayZod:function(){return g},pgFunctionCreateZod:function(){return _},pgFunctionDeleteZod:function(){return C},pgFunctionOptionalZod:function(){return v},pgFunctionUpdateZod:function(){return w},pgFunctionZod:function(){return x},remove:function(){return E},retrieve:function(){return y},update:function(){return S}});var s=n(56124);let r='\n-- Can\'t use pg_authid here since some managed Postgres providers don\'t expose it\n-- https://github.com/supabase/postgres-meta/issues/212\n\nselect\n  r.oid :: int8 as id,\n  rolname as name,\n  rolsuper as "isSuperuser",\n  rolcreatedb as "canCreateDb",\n  rolcreaterole as "canCreateRole",\n  rolinherit as "inheritRole",\n  rolcanlogin as "canLogin",\n  rolreplication as "isReplicationRole",\n  rolbypassrls as "canBypassRls",\n  (\n    select\n      count(*)\n    from\n      pg_stat_activity\n    where\n      r.rolname = pg_stat_activity.usename\n  ) as "activeConnections",\n  case when rolconnlimit = -1 then current_setting(\'max_connections\') :: int8\n       else rolconnlimit\n  end as "connectionLimit",\n  rolvaliduntil as "validUntil",\n  coalesce(r_config.role_configs, \'{}\') as config\nfrom\n  pg_roles r\n  left join (\n    select\n      oid,\n      jsonb_object_agg(param, value) filter (where param is not null) as role_configs\n    from\n      (\n        select\n          oid,\n          (string_to_array(unnest(rolconfig), \'=\'))[1] as param,\n          (string_to_array(unnest(rolconfig), \'=\'))[2] as value\n        from\n          pg_roles\n      ) as _\n    group by\n      oid\n  ) r_config on r_config.oid = r.oid\n';var a=n(30195);let l=a.z.object({id:a.z.number(),name:a.z.string(),isSuperuser:a.z.boolean(),canCreateDb:a.z.boolean(),canCreateRole:a.z.boolean(),inheritRole:a.z.boolean(),canLogin:a.z.boolean(),isReplicationRole:a.z.boolean(),canBypassRls:a.z.boolean(),activeConnections:a.z.number(),connectionLimit:a.z.number(),validUntil:a.z.union([a.z.string(),a.z.null()]),config:a.z.record(a.z.string(),a.z.string())}),o=a.z.array(l),c=a.z.optional(l),d=["information_schema","pg_catalog","pg_toast"],u="\n-- Adapted from information_schema.schemata\n\nselect\n  n.oid::int8 as id,\n  n.nspname as name,\n  u.rolname as owner\nfrom\n  pg_namespace n,\n  pg_roles u\nwhere\n  n.nspowner = u.oid\n  and (\n    pg_has_role(n.nspowner, 'USAGE')\n    or has_schema_privilege(n.oid, 'CREATE, USAGE')\n  )\n  and not pg_catalog.starts_with(n.nspname, 'pg_temp_')\n  and not pg_catalog.starts_with(n.nspname, 'pg_toast_temp_')\n",p=a.z.object({id:a.z.number(),name:a.z.string(),owner:a.z.string()}),m=a.z.array(p),f=a.z.optional(p),h="\n-- CTE with sane arg_modes, arg_names, and arg_types.\n-- All three are always of the same length.\n-- All three include all args, including OUT and TABLE args.\nwith functions as (\n  select\n    *,\n    -- proargmodes is null when all arg modes are IN\n    coalesce(\n      p.proargmodes,\n      array_fill('i'::text, array[cardinality(coalesce(p.proallargtypes, p.proargtypes))])\n    ) as arg_modes,\n    -- proargnames is null when all args are unnamed\n    coalesce(\n      p.proargnames,\n      array_fill(''::text, array[cardinality(coalesce(p.proallargtypes, p.proargtypes))])\n    ) as arg_names,\n    -- proallargtypes is null when all arg modes are IN\n    coalesce(p.proallargtypes, p.proargtypes) as arg_types,\n    array_cat(\n      array_fill(false, array[pronargs - pronargdefaults]),\n      array_fill(true, array[pronargdefaults])) as arg_has_defaults\n  from\n    pg_proc as p\n  where\n    p.prokind = 'f'\n)\nselect\n  f.oid::int8 as id,\n  n.nspname as schema,\n  f.proname as name,\n  l.lanname as language,\n  case\n    when l.lanname = 'internal' then ''\n    else f.prosrc\n  end as definition,\n  case\n    when l.lanname = 'internal' then f.prosrc\n    else pg_get_functiondef(f.oid)\n  end as complete_statement,\n  coalesce(f_args.args, '[]') as args,\n  pg_get_function_arguments(f.oid) as argument_types,\n  pg_get_function_identity_arguments(f.oid) as identity_argument_types,\n  f.prorettype::int8 as return_type_id,\n  pg_get_function_result(f.oid) as return_type,\n  nullif(rt.typrelid::int8, 0) as return_type_relation_id,\n  f.proretset as is_set_returning_function,\n  case\n    when f.provolatile = 'i' then 'IMMUTABLE'\n    when f.provolatile = 's' then 'STABLE'\n    when f.provolatile = 'v' then 'VOLATILE'\n  end as behavior,\n  f.prosecdef as security_definer,\n  f_config.config_params as config_params\nfrom\n  functions f\n  left join pg_namespace n on f.pronamespace = n.oid\n  left join pg_language l on f.prolang = l.oid\n  left join pg_type rt on rt.oid = f.prorettype\n  left join (\n    select\n      oid,\n      jsonb_object_agg(param, value) filter (where param is not null) as config_params\n    from\n      (\n        select\n          oid,\n          (string_to_array(unnest(proconfig), '='))[1] as param,\n          (string_to_array(unnest(proconfig), '='))[2] as value\n        from\n          functions\n      ) as t\n    group by\n      oid\n  ) f_config on f_config.oid = f.oid\n  left join (\n    select\n      oid,\n      jsonb_agg(jsonb_build_object(\n        'mode', t2.mode,\n        'name', name,\n        'type_id', type_id,\n        'has_default', has_default\n      )) as args\n    from\n      (\n        select\n          oid,\n          unnest(arg_modes) as mode,\n          unnest(arg_names) as name,\n          unnest(arg_types)::int8 as type_id,\n          unnest(arg_has_defaults) as has_default\n        from\n          functions\n      ) as t1,\n      lateral (\n        select\n          case\n            when t1.mode = 'i' then 'in'\n            when t1.mode = 'o' then 'out'\n            when t1.mode = 'b' then 'inout'\n            when t1.mode = 'v' then 'variadic'\n            else 'table'\n          end as mode\n      ) as t2\n    group by\n      t1.oid\n  ) f_args on f_args.oid = f.oid\n",x=a.z.object({id:a.z.number(),schema:a.z.string(),name:a.z.string(),language:a.z.string(),definition:a.z.string(),complete_statement:a.z.string(),args:a.z.array(a.z.object({mode:a.z.union([a.z.literal("in"),a.z.literal("out"),a.z.literal("inout"),a.z.literal("variadic"),a.z.literal("table")]),name:a.z.string(),type_id:a.z.number(),has_default:a.z.boolean()})),argument_types:a.z.string(),identity_argument_types:a.z.string(),return_type_id:a.z.number(),return_type:a.z.string(),return_type_relation_id:a.z.union([a.z.number(),a.z.null()]),is_set_returning_function:a.z.boolean(),behavior:a.z.union([a.z.literal("IMMUTABLE"),a.z.literal("STABLE"),a.z.literal("VOLATILE")]),security_definer:a.z.boolean(),config_params:a.z.union([a.z.record(a.z.string(),a.z.string()),a.z.null()])}),g=a.z.array(x),v=a.z.optional(x);function j(){var e,t;let{includeSystemSchemas:n=!1,includedSchemas:i,excludedSchemas:r,limit:a,offset:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o="\n    with f as (\n      ".concat(h,"\n    )\n    select\n      f.*\n    from f\n  "),c=(e=r,((t=n?void 0:d)&&(e=t.concat(null!=e?e:[])),null==i?void 0:i.length)?"IN (".concat(i.map(s.i0).join(","),")"):(null==e?void 0:e.length)?"NOT IN (".concat(e.map(s.i0).join(","),")"):"");return c&&(o+=" where schema ".concat(c)),a&&(o="".concat(o," limit ").concat(a)),l&&(o="".concat(o," offset ").concat(l)),{sql:o,zod:g}}function y(e){let{id:t,name:n,schema:i="public",args:r=[]}=e;if(t)return{sql:"\n      with f as (\n        ".concat(h,"\n      )\n      select\n        f.*\n      from f where id = ").concat((0,s.i0)(t),";"),zod:v};if(n&&i&&r)return{sql:"with f as (\n      ".concat(h,"\n    )\n    select\n      f.*\n    from f join pg_proc as p on id = p.oid where schema = ").concat((0,s.i0)(i)," and name = ").concat((0,s.i0)(n)," and p.proargtypes::text = ").concat(r.length?"(\n          select string_agg(type_oid::text, ' ') from (\n            select (\n              split_args.arr[\n                array_length(\n                  split_args.arr,\n                  1\n                )\n              ]::regtype::oid\n            ) as type_oid from (\n              select string_to_array(\n                unnest(\n                  array[".concat(r.map(s.i0),"]\n                ),\n                ' '\n              ) as arr\n            ) as split_args\n          ) args\n        )"):(0,s.i0)("")),zod:v};throw Error("Must provide either id or name and schema")}let _=a.z.object({name:a.z.string(),definition:a.z.string(),args:a.z.array(a.z.string()).optional(),behavior:a.z.enum(["IMMUTABLE","STABLE","VOLATILE"]).optional(),config_params:a.z.record(a.z.string(),a.z.string()).optional(),schema:a.z.string().optional(),language:a.z.string().optional(),return_type:a.z.string().optional(),security_definer:a.z.boolean().optional()});function b(e){let{name:t,schema:n,args:i,definition:r,return_type:a,language:l,behavior:o,security_definer:c,config_params:d}=e,{replace:u=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"\n    CREATE ".concat(u?"OR REPLACE":""," FUNCTION ").concat((0,s.yR)(n),".").concat((0,s.yR)(t),"(").concat((null==i?void 0:i.join(", "))||"",")\n    RETURNS ").concat(a,"\n    AS ").concat((0,s.i0)(r),"\n    LANGUAGE ").concat(l,"\n    ").concat(o,"\n    CALLED ON NULL INPUT\n    ").concat(c?"SECURITY DEFINER":"SECURITY INVOKER","\n    ").concat(d?Object.entries(d).map(e=>{let[t,n]=e;return"SET ".concat(t," ").concat("FROM CURRENT"===n[0]?"FROM CURRENT":"TO "+n)}).join("\n"):"",";\n  ")}function N(e){let{name:t,schema:n="public",args:i=[],definition:s,return_type:r="void",language:l="sql",behavior:o="VOLATILE",security_definer:c=!1,config_params:d={}}=e;return{sql:b({name:t,schema:n,args:i,definition:s,return_type:r,language:l,behavior:o,security_definer:c,config_params:d}),zod:a.z.void()}}let w=a.z.object({name:a.z.string().optional(),schema:a.z.string().optional(),definition:a.z.string().optional()});function S(e,t){var n;let{name:i,schema:r,definition:l}=t,o=e.argument_types.split(", "),c=e.identity_argument_types,d="string"==typeof l?b({...e,definition:l,args:o,config_params:null!==(n=e.config_params)&&void 0!==n?n:{}},{replace:!0}):"",u=i&&i!==e.name?"ALTER FUNCTION ".concat((0,s.yR)(e.schema),".").concat((0,s.yR)(e.name),"(").concat(c,") RENAME TO ").concat((0,s.yR)(i),";"):"",p=r&&r!==e.schema?"ALTER FUNCTION ".concat((0,s.yR)(e.schema),".").concat((0,s.yR)(i||e.name),"(").concat(c,")  SET SCHEMA ").concat((0,s.yR)(r),";"):"";return{sql:"\n    DO LANGUAGE plpgsql $$\n    BEGIN\n      IF ".concat("string"==typeof l?"TRUE":"FALSE"," THEN\n        ").concat(d,"\n\n        IF (\n          SELECT id\n          FROM (").concat(h,") AS f\n          WHERE f.schema = ").concat((0,s.i0)(e.schema),"\n          AND f.name = ").concat((0,s.i0)(e.name),"\n          AND f.identity_argument_types = ").concat((0,s.i0)(c),"\n        ) != ").concat(e.id," THEN\n          RAISE EXCEPTION 'Cannot find function \"").concat(e.schema,'"."').concat(e.name,'"(').concat(c,")';\n        END IF;\n      END IF;\n\n      ").concat(u,"\n\n      ").concat(p,"\n    END;\n    $$;\n  "),zod:a.z.void()}}let C=a.z.object({cascade:a.z.boolean().default(!1).optional()});function E(e){let{cascade:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{sql:"DROP FUNCTION ".concat((0,s.yR)(e.schema),".").concat((0,s.yR)(e.name),"\n  (").concat(e.identity_argument_types,")\n  ").concat(t?"CASCADE":"RESTRICT",";"),zod:a.z.void()}}var q={roles:{list:function(){let{includeDefaultRoles:e=!1,limit:t,offset:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i="\nwith\n  roles as (".concat(r,")\nselect\n  *\nfrom\n  roles\nwhere\n  true\n");return e||(i+=" and not pg_catalog.starts_with(name, 'pg_')"),t&&(i+=" limit ".concat(t)),n&&(i+=" offset ".concat(n)),{sql:i,zod:o}},retrieve:function(e){let{id:t,name:n}=e;return t?{sql:"".concat(r," where r.oid = ").concat((0,s.i0)(t),";"),zod:c}:{sql:"".concat(r," where rolname = ").concat((0,s.i0)(n),";"),zod:c}},create:function(e){let{name:t,isSuperuser:n=!1,canCreateDb:i=!1,canCreateRole:r=!1,inheritRole:a=!0,canLogin:l=!1,isReplicationRole:o=!1,canBypassRls:c=!1,connectionLimit:d=-1,password:u,validUntil:p,memberOf:m=[],members:f=[],admins:h=[],config:x={}}=e;return{sql:"\ncreate role ".concat((0,s.yR)(t),"\n  ").concat(n?"superuser":"","\n  ").concat(i?"createdb":"","\n  ").concat(r?"createrole":"","\n  ").concat(a?"":"noinherit","\n  ").concat(l?"login":"","\n  ").concat(o?"replication":"","\n  ").concat(c?"bypassrls":"","\n  connection limit ").concat(d,"\n  ").concat(void 0===u?"":"password ".concat((0,s.i0)(u)),"\n  ").concat(void 0===p?"":"valid until ".concat((0,s.i0)(p)),"\n  ").concat(0===m.length?"":"in role ".concat(m.map(s.yR).join(",")),"\n  ").concat(0===f.length?"":"role ".concat(f.map(s.yR).join(",")),"\n  ").concat(0===h.length?"":"admin ".concat(h.map(s.yR).join(",")),"\n  ;\n").concat(Object.entries(x).map(e=>{let[n,i]=e;return"alter role ".concat((0,s.yR)(t)," set ").concat((0,s.yR)(n)," = ").concat((0,s.i0)(i),";")}).join("\n"),"\n")}},update:function(e,t){let{id:n,name:i}=e,{name:r,isSuperuser:a,canCreateDb:l,canCreateRole:o,inheritRole:c,canLogin:d,isReplicationRole:u,canBypassRls:p,connectionLimit:m,password:f,validUntil:h}=t;return{sql:"\ndo $$\ndeclare\n  id oid := ".concat(void 0===n?"".concat((0,s.i0)(i),"::regrole"):(0,s.i0)(n),";\n  old record;\nbegin\n  select * into old from pg_roles where oid = id;\n  if old is null then\n    raise exception 'Cannot find role with id %', id;\n  end if;\n\n  execute(format('alter role %I\n    ").concat(void 0===a?"":a?"superuser":"nosuperuser","\n    ").concat(void 0===l?"":l?"createdb":"nocreatedb","\n    ").concat(void 0===o?"":o?"createrole":"nocreaterole","\n    ").concat(void 0===c?"":c?"inherit":"noinherit","\n    ").concat(void 0===d?"":d?"login":"nologin","\n    ").concat(void 0===u?"":u?"replication":"noreplication","\n    ").concat(void 0===p?"":p?"bypassrls":"nobypassrls","\n    ").concat(void 0===m?"":"connection limit ".concat((0,s.i0)(m)),"\n    ").concat(void 0===f?"":"password ".concat((0,s.i0)(f)),"\n    ").concat(void 0===h?"":"valid until ".concat((0,s.i0)(h)),"\n  ', old.rolname));\n\n  ").concat(void 0===r?"":"\n  -- Using the same name in the rename clause gives an error, so only do it if the new name is different.\n  if new_name != old.nspname then\n    execute(format('alter role %I rename to ".concat((0,s.yR)(r),";', old.nspname));\n  end if;\n  "),"\nend\n$$;\n")}},remove:function(e){let{id:t,name:n}=e,{ifExists:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{sql:"\ndo $$\ndeclare\n  id oid := ".concat(void 0===t?"".concat((0,s.i0)(n),"::regrole"):(0,s.i0)(t),";\n  old record;\nbegin\n  select * into old from pg_roles where oid = id;\n  if old is null then\n    raise exception 'Cannot find role with id %', id;\n  end if;\n\n  execute(format('drop role ").concat(i?"if exists":""," %I;', old.rolname));\nend\n$$;\n")}},zod:l},schemas:{list:function(){let{includeSystemSchemas:e=!1,limit:t,offset:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=u;return e||(i="".concat(i," and not (n.nspname in (").concat(d.map(s.i0).join(","),"))")),t&&(i="".concat(i," limit ").concat(t)),n&&(i="".concat(i," offset ").concat(n)),{sql:i,zod:m}},retrieve:function(e){let{id:t,name:n}=e;return t?{sql:"".concat(u," and n.oid = ").concat((0,s.i0)(t),";"),zod:f}:{sql:"".concat(u," and n.nspname = ").concat((0,s.i0)(n),";"),zod:f}},create:function(e){let{name:t,owner:n}=e;return{sql:"create schema ".concat((0,s.yR)(t),"\n  ").concat(void 0===n?"":"authorization ".concat((0,s.yR)(n)),";\n")}},update:function(e,t){let{id:n,name:i}=e,{name:r,owner:a}=t;return{sql:"\ndo $$\ndeclare\n  id oid := ".concat(void 0===n?"".concat((0,s.i0)(i),"::regnamespace"):(0,s.i0)(n),";\n  old record;\n  new_name text := ").concat(void 0===r?null:(0,s.i0)(r),";\n  new_owner text := ").concat(void 0===a?null:(0,s.i0)(a),";\nbegin\n  select * into old from pg_namespace where oid = id;\n  if old is null then\n    raise exception 'Cannot find schema with id %', id;\n  end if;\n\n  if new_owner is not null then\n    execute(format('alter schema %I owner to %I;', old.nspname, new_owner));\n  end if;\n\n  -- Using the same name in the rename clause gives an error, so only do it if the new name is different.\n  if new_name is not null and new_name != old.nspname then\n    execute(format('alter schema %I rename to %I;', old.nspname, new_name));\n  end if;\nend\n$$;\n")}},remove:function(e){let{id:t,name:n}=e,{cascade:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{sql:"\ndo $$\ndeclare\n  id oid := ".concat(void 0===t?"".concat((0,s.i0)(n),"::regnamespace"):(0,s.i0)(t),";\n  old record;\n  cascade bool := ").concat((0,s.i0)(i),";\nbegin\n  select * into old from pg_namespace where oid = id;\n  if old is null then\n    raise exception 'Cannot find schema with id %', id;\n  end if;\n\n  execute(format('drop schema %I %s;', old.nspname, case when cascade then 'cascade' else 'restrict' end));\nend\n$$;\n")}},zod:p},functions:i}},56124:function(e,t,n){"use strict";n.d(t,{WU:function(){return o},yR:function(){return a},i0:function(){return l}});let i=new Set(["AES128","AES256","ALL","ALLOWOVERWRITE","ANALYSE","ANALYZE","AND","ANY","ARRAY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BACKUP","BETWEEN","BINARY","BLANKSASNULL","BOTH","BYTEDICT","CASE","CAST","CHECK","COLLATE","COLUMN","CONSTRAINT","CREATE","CREDENTIALS","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURRENT_USER_ID","DEFAULT","DEFERRABLE","DEFLATE","DEFRAG","DELTA","DELTA32K","DESC","DISABLE","DISTINCT","DO","ELSE","EMPTYASNULL","ENABLE","ENCODE","ENCRYPT","ENCRYPTION","END","EXCEPT","EXPLICIT","FALSE","FETCH","FOR","FOREIGN","FREEZE","FROM","FULL","GLOBALDICT256","GLOBALDICT64K","GRANT","GROUP","GZIP","HAVING","IDENTITY","IGNORE","ILIKE","IN","INITIALLY","INNER","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","LUN","LUNS","LZO","LZOP","MINUS","MOSTLY13","MOSTLY32","MOSTLY8","NATURAL","NEW","NOT","NOTNULL","NULL","NULLS","OFF","OFFLINE","OFFSET","OLD","ON","ONLY","OPEN","OR","ORDER","OUTER","OVERLAPS","PARALLEL","PARTITION","PERCENT","PLACING","PRIMARY","RAW","READRATIO","RECOVER","REFERENCES","REJECTLOG","RESORT","RESTORE","RETURNING","RIGHT","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","SYSDATE","SYSTEM","TABLE","TAG","TDES","TEXT255","TEXT32K","THEN","TO","TOP","TRAILING","TRUE","TRUNCATECOLUMNS","UNION","UNIQUE","USER","USING","VARIADIC","VERBOSE","WALLET","WHEN","WHERE","WINDOW","WITH","WITHOUT"]);function s(e){return e.replace("T"," ").replace("Z","+00")}function r(e,t,n){let i="";for(let[s,r]of(i+=e?" (":"(",t.entries()))i+=(0===s?"":", ")+n(r);return i+")"}function a(e){if(null==e)throw Error("SQL identifier cannot be null or undefined");if(!1===e)return'"f"';if(!0===e)return'"t"';if(e instanceof Date)return'"'.concat(s(e.toISOString()),'"');if(Array.isArray(e)){let t=[];for(let n of e){if(!0===Array.isArray(n))throw TypeError("Nested array to grouped list conversion is not supported for SQL identifier");t.push(a(n))}return t.toString()}if(e===Object(e))throw Error("SQL identifier cannot be an object");let t=String(e).slice(0);if(!0===/^[_a-z][\d$_a-z]*$/.test(t)&&!1==!!i.has(t.toUpperCase()))return t;let n='"';for(let e of t)n+='"'===e?e+e:e;return n+'"'}function l(e){let t,n="";if(null==e)return"NULL";if("bigint"==typeof e)return BigInt(e).toString();if(e===Number.POSITIVE_INFINITY)return"'Infinity'";if(e===Number.NEGATIVE_INFINITY)return"'-Infinity'";if(Number.isNaN(e))return"'NaN'";if("number"==typeof e)return Number(e).toString();if(!1===e)return"'f'";if(!0===e)return"'t'";if(e instanceof Date)return"'".concat(s(e.toISOString()),"'");if(Array.isArray(e)){let t=[];for(let[n,i]of e.entries())!0===Array.isArray(i)?t.push(r(0!==n,i,l)):t.push(l(i));return t.toString()}e===Object(e)?(t="jsonb",n=JSON.stringify(e)):n=String(e).slice(0);let i=!1,a="'";for(let e of n)"'"===e?a+=e+e:"\\"===e?(a+=e+e,i=!0):a+=e;return a+="'",!0===i&&(a="E".concat(a)),t&&(a+="::".concat(t)),a}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function(e,t){let n=0,i="%(%|(\\d+\\$)?[",o=RegExp(i+="ILs])","g");return e.replace(o,(e,i)=>{if("%"===i)return"%";let o=n,c=i.split("$");if(c.length>1&&(o=Number.parseInt(c[0],10)-1,i=c[1]),o<0)throw Error("specified argument 0 but arguments start at 1");if(o>t.length-1)throw Error("too few arguments");return(n=o+1,"I"===i)?a(t[o]):"L"===i?l(t[o]):"s"===i?function e(t){if(null==t)return"";if(!1===t)return"f";if(!0===t)return"t";if(t instanceof Date)return s(t.toISOString());if(Array.isArray(t)){let n=[];for(let[i,s]of t.entries())null!=s&&(!0===Array.isArray(s)?n.push(r(0!==i,s,e)):n.push(e(s)));return n.toString()}return t===Object(t)?JSON.stringify(t):String(t).toString().slice(0)}(t[o]):void 0})}(e,n)}},7803:function(e,t,n){"use strict";n.d(t,{g:function(){return a},p:function(){return r}});var i=n(52322),s=n(54849);let r=e=>{let{className:t}=e;return(0,i.jsx)(s.c,{className:t,allowHoverEffect:!0})},a=e=>{let{loading:t=!1}=e;return(0,i.jsx)(s.c,{className:"ml-0.5",loading:t,allowHoverEffect:!0})}},40022:function(e,t,n){"use strict";n.d(t,{Cf:function(){return S},DS:function(){return j},GZ:function(){return h},HJ:function(){return w},IR:function(){return N},Qn:function(){return x},ZY:function(){return b},nM:function(){return y},nn:function(){return _},qs:function(){return v},rt:function(){return g}});var i=n(52322),s=n(68806),r=n(39097),a=n.n(r),l=n(2784),o=n(55283),c=n(54383),d=n(42070),u=n(34503),p=n(2322),m=n(10304),f=n(81384);let h=(0,l.forwardRef)((e,t)=>{let{...n}=e;return(0,i.jsx)(o.zF,{...n,className:(0,c.cn)("w-full px-2",n.className)})}),x=(0,l.forwardRef)((e,t)=>{let{...n}=e;return(0,i.jsx)(o.wy,{disabled:!0,ref:t,...n,className:(0,c.cn)("w-full flex gap-1 items-center group px-3 text-xs font-normal font-mono uppercase text-lighter tracking-wide",n.className),children:(0,i.jsx)("span",{className:"group-hover:not-disabled:text-foreground",children:n.title})})}),g=(0,l.forwardRef)((e,t)=>{let{...n}=e;return(0,i.jsx)(o.Fw,{...n,className:(0,c.cn)("w-full data-[state=open]:pt-1 flex flex-col gap-2",n.className)})}),v=(0,l.forwardRef)((e,t)=>(0,i.jsx)("div",{ref:t,...e,className:(0,c.cn)("h-px bg-border-muted",e.className)})),j=(0,l.forwardRef)((e,t)=>{let{className:n,isActive:s,forceHoverState:r,...l}=e;return(0,i.jsx)(a(),{ref:t,...l,"aria-current":s,className:(0,c.cn)("text-sm","h-7 pl-3 pr-2","flex items-center justify-between rounded-md group relative",s?"bg-selection":"hover:bg-surface-200",r&&"bg-surface-200",s?"text-foreground":"text-foreground-light hover:text-foreground",n)})}),y=(0,l.forwardRef)((e,t)=>(0,i.jsx)("div",{ref:t,...e,className:(0,c.cn)("flex px-2 gap-2 items-center",e.className)})),_=(0,l.forwardRef)((e,t)=>{let{children:n,...r}=e;return(0,i.jsxs)("label",{htmlFor:r.name,className:"relative w-full",children:[(0,i.jsx)("span",{className:"sr-only",children:r["aria-labelledby"]}),(0,i.jsx)(d.I,{ref:t,type:"text",className:(0,c.cn)("h-[28px] w-full","text-xs","pl-7","pr-7","w-full","rounded",r.className),...r}),n,(0,i.jsx)(s.Z,{className:"absolute left-2 top-2 text-foreground-muted",size:14,strokeWidth:1.5})]})}),b=(0,l.forwardRef)((e,t)=>{let{value:n,onValueChange:s,contentClassName:r,triggerClassName:a,...l}=e;return(0,i.jsxs)(u.h_,{modal:!1,children:[(0,i.jsxs)(p.u,{delayDuration:0,children:[(0,i.jsx)(u.$F,{asChild:!0,className:(0,c.cn)("absolute right-1 top-[.3rem]","text-foreground-muted transition-colors hover:text-foreground data-[state=open]:text-foreground",a),children:(0,i.jsx)(p.aJ,{children:(0,i.jsx)(m.Z,{size:18,strokeWidth:1})})}),(0,i.jsx)(p._v,{side:"bottom",children:"Sort By"})]}),(0,i.jsx)(u.AW,{side:"bottom",align:"end",className:(0,c.cn)("w-48",r),children:(0,i.jsx)(u._x,{value:n,onValueChange:s,children:l.children})})]})}),N=(0,l.forwardRef)((e,t)=>(0,i.jsx)(u.qB,{ref:t,...e})),w=(0,l.forwardRef)((e,t)=>(0,i.jsxs)("div",{ref:t,...e,className:(0,c.cn)("flex flex-col px-2 gap-1 pb-4",e.className),children:[(0,i.jsx)(f.Z,{className:"w-full h-7 rounded-md",delayIndex:0}),(0,i.jsx)(f.Z,{className:"w-full h-7 rounded-md",delayIndex:1}),(0,i.jsx)(f.Z,{className:"w-full h-7 rounded-md",delayIndex:2})]})),S=(0,l.forwardRef)((e,t)=>{let{illustration:n,title:s,description:r,actions:a,...l}=e;return(0,i.jsx)("div",{ref:t,...l,className:(0,c.cn)("border bg-surface-100/50 flex flex-col gap-y-3 items-center justify-center rounded-md px-3 py-4",l.className),children:(0,i.jsxs)("div",{className:"flex flex-col gap-y-1 items-center justify-center",children:[n,s&&(0,i.jsx)("p",{className:"text-xs text-foreground-light",children:s}),r&&(0,i.jsx)("p",{className:"text-xs text-foreground-lighter text-center",children:r}),a&&(0,i.jsx)("div",{className:"mt-2",children:a})]})})})},58898:function(e,t,n){"use strict";n.d(t,{d:function(){return S}});var i=n(52322),s=n(76141),r=n(94299),a=n(6659),l=n(2784),o=n(72282),c=n(90028),d=n(54383),u=n(32079);let p=e=>({hljs:{display:"block",overflowX:"auto",color:e?"#ddd":"#888"},"hljs-tag":{color:"#569cd6"},"hljs-keyword":{color:"#569cd6",fontWeight:"normal"},"hljs-selector-tag":{color:"#569cd6",fontWeight:"normal"},"hljs-literal":{color:"#569cd6",fontWeight:"normal"},"hljs-strong":{color:"#569cd6"},"hljs-name":{color:"#569cd6"},"hljs-code":{color:"#66d9ef"},"hljs-class .hljs-title":{color:"gray"},"hljs-attribute":{color:"#bf79db"},"hljs-symbol":{color:"#bf79db"},"hljs-regexp":{color:"#bf79db"},"hljs-link":{color:"#bf79db"},"hljs-string":{color:"#3ECF8E"},"hljs-bullet":{color:"#3ECF8E"},"hljs-subst":{color:"#3ECF8E"},"hljs-title":{color:"#3ECF8E",fontWeight:"normal"},"hljs-section":{color:"#3ECF8E",fontWeight:"normal"},"hljs-emphasis":{color:"#3ECF8E"},"hljs-type":{color:"#3ECF8E",fontWeight:"normal"},"hljs-built_in":{color:"#3ECF8E"},"hljs-builtin-name":{color:"#3ECF8E"},"hljs-selector-attr":{color:"#3ECF8E"},"hljs-selector-pseudo":{color:"#3ECF8E"},"hljs-addition":{color:"#3ECF8E"},"hljs-variable":{color:"#3ECF8E"},"hljs-template-tag":{color:"#3ECF8E"},"hljs-template-variable":{color:"#3ECF8E"},"hljs-comment":{color:e?"#999":"#888"},"hljs-quote":{color:"#75715e"},"hljs-deletion":{color:"#75715e"},"hljs-meta":{color:"#75715e"},"hljs-doctag":{fontWeight:"normal"},"hljs-selector-id":{fontWeight:"normal"}});var m=n(65820),f=n.n(m),h=n(27666),x=n(31806),g=n(88109),v=n(80039),j=n(86497),y=n(81303),_=n(83667),b=n(54299),N=n(14969),w=n(12463);let S=e=>{var t,n,m,S;let{title:C,language:E,linesToHighlight:q=[],highlightBorder:R,styleConfig:L,className:k,value:z,theme:A,children:I,hideCopy:Z=!1,hideLineNumbers:T=!1,renderer:F}=e,{resolvedTheme:D}=(0,a.F)(),O=null==D?void 0:D.includes("dark"),P=null!=A?A:p(O),[U,M]=(0,l.useState)(!1),V=()=>{M(!0),setTimeout(()=>{M(!1)},1e3)},W=l.Children.toArray(I),[Q]=1===W.length?W:[],B=null!==(n=null!=z?z:"string"==typeof Q?Q:void 0)&&void 0!==n?n:I,K="string"==typeof(B=null!==(m=null==B?void 0:null===(t=B.trimEnd)||void 0===t?void 0:t.call(B))&&void 0!==m?m:B)&&B.length<70?"short-inline-codeblock":"",G=E||(k?k.replace("language-",""):"js");"jsx"===G&&(G="js"),c.Z.registerLanguage("js",j.Z),c.Z.registerLanguage("ts",w.Z),c.Z.registerLanguage("py",b.Z),c.Z.registerLanguage("sql",N.Z),c.Z.registerLanguage("bash",h.Z),c.Z.registerLanguage("dart",g.Z),c.Z.registerLanguage("csharp",x.Z),c.Z.registerLanguage("json",y.Z),c.Z.registerLanguage("kotlin",_.Z),c.Z.registerLanguage("curl",f()),c.Z.registerLanguage("http",v.Z),("bash"===G||"sh"===G)&&(T=!0);let Y=!T;return(0,i.jsxs)(i.Fragment,{children:[C&&(0,i.jsx)("div",{className:"text-sm rounded-t-md bg-surface-100 py-2 px-4 border border-b-0 border-default font-sans",children:C}),k?(0,i.jsxs)("div",{className:"group relative max-w-[90vw] md:max-w-none overflow-auto",children:[(0,i.jsx)(c.Z,{language:G,wrapLines:!0,style:P,className:(0,d.cn)("code-block border border-surface p-4 w-full !my-0 !bg-surface-100","".concat(C?"!rounded-t-none !rounded-b-md":"!rounded-md"),"".concat(Y?"":"pl-6"),k),customStyle:{fontSize:13,lineHeight:1.4},showLineNumbers:Y,lineProps:e=>q.includes(e)?{style:{display:"block",backgroundColor:(null==L?void 0:L.highlightBackgroundColor)?null==L?void 0:L.highlightBackgroundColor:"hsl(var(--background-selection))",borderLeft:R?"1px solid ".concat((null==L?void 0:L.highlightBorderColor)?null==L?void 0:L.highlightBorderColor:"hsl(var(--foreground-default)",")"):null},class:"hljs-line-highlight"}:{},lineNumberContainerStyle:{paddingTop:"128px"},lineNumberStyle:{minWidth:"44px",paddingLeft:"4px",paddingRight:"4px",marginRight:"12px",color:null!==(S=null==L?void 0:L.lineNumber)&&void 0!==S?S:"#828282",textAlign:"center",fontSize:12,paddingTop:"4px",paddingBottom:"4px"},renderer:F,children:B}),!Z&&(z||I)&&k?(0,i.jsx)("div",{className:["absolute right-2 top-2","opacity-0 group-hover:opacity-100 transition","".concat(O?"dark":"")].join(" "),children:(0,i.jsx)(o,{text:z||I,children:(0,i.jsx)(u.z,{type:"default",className:"px-1.5",icon:U?(0,i.jsx)(s.Z,{}):(0,i.jsx)(r.Z,{}),onClick:()=>V(),children:U?"Copied":""})})}):null]}):(0,i.jsx)("code",{className:K,children:z||I})]})}},10304:function(e,t,n){"use strict";var i=n(52322);n(2784);var s=n(29),r=n(59073);t.Z=function(e){return(0,i.jsx)(r.Z,{icon:s.Z,...e})}},84605:function(e,t,n){"use strict";var i=n(52322);n(2784);var s=n(14809),r=n(59073);t.Z=function(e){return(0,i.jsx)(r.Z,{icon:s.Z,...e})}},9015:function(e,t,n){"use strict";var i=n(52322),s=n(64266),r=n(2784),a=n(46318);let l=e=>{var t,n,l;let{defaultActiveId:o,activeId:c,type:d="pills",size:u="tiny",block:p,onChange:m,onClick:f,scrollable:h,wrappable:x,addOnBefore:g,addOnAfter:v,listClassNames:j,baseClassNames:y,refs:_,children:b}=e,N=r.Children.toArray(b),[w,S]=(0,r.useState)(null!==(l=null!=c?c:o)&&void 0!==l?l:null==N?void 0:null===(n=N[0])||void 0===n?void 0:null===(t=n.props)||void 0===t?void 0:t.id);(0,r.useMemo)(()=>{c&&c!==w&&S(c)},[c]);let C=(0,a.Z)("tabs");function E(e){null==f||f(e),e!==w&&(null==m||m(e),S(e))}let q=[C[d].list];return h&&q.push(C.scrollable),x&&q.push(C.wrappable),j&&q.push(j),(0,i.jsxs)(s.fC,{value:w,className:[C.base,y].join(" "),ref:null==_?void 0:_.base,children:[(0,i.jsxs)(s.aV,{className:q.join(" "),ref:null==_?void 0:_.list,children:[g,N.map(e=>{let t=w===e.props.id,n=[C[d].base,C.size[u]];return t?n.push(C[d].active):n.push(C[d].inactive),p&&n.push(C.block),(0,i.jsxs)(s.xz,{onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),E(e.props.id))},onClick:()=>E(e.props.id),value:e.props.id,className:n.join(" "),children:[e.props.icon,(0,i.jsx)("span",{children:e.props.label}),e.props.iconRight]},"".concat(e.props.id,"-tab-button"))}),v]}),N]})};l.Panel=e=>{let{children:t,id:n,className:r}=e,l=(0,a.Z)("tabs");return(0,i.jsx)(s.VY,{value:n,className:[l.content,r].join(" "),children:t})},t.Z=l},59769:function(e,t,n){"use strict";n.d(t,{Yi:function(){return o},bZ:function(){return c},zs:function(){return l}});var i=n(52322),s=n(83997),r=n(2784),a=n(54383);let l=s.fC,o=s.xz,c=r.forwardRef((e,t)=>{let{className:n,align:r="center",animate:l="zoom-in",sideOffset:o=4,...c}=e;return(0,i.jsx)(s.VY,{ref:t,align:r,sideOffset:o,className:(0,a.cn)("z-50 w-64 rounded-md border bg-overlay p-4 text-popover-foreground shadow-md outline-none","zoom-in"===l?"animate-in zoom-in-[99%]":"animate-in fade-in-50 data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",n),...c})});c.displayName=s.VY.displayName},62949:function(e,t,n){"use strict";n.d(t,{Bw:function(){return j},DI:function(){return m},Ph:function(){return p},Ql:function(){return _},U$:function(){return b},i4:function(){return x},ki:function(){return f},n5:function(){return y}});var i=n(52322),s=n(38947),r=n(78232),a=n(20670),l=n(76141),o=n(2784),c=n(54383),d=n(10929),u=n(75109);let p=s.fC,m=s.ZA,f=s.B4,h=(0,d.j)("",{variants:{size:{...u.Ld}},defaultVariants:{size:u.Rc}}),x=o.forwardRef((e,t)=>{let{className:n,children:a,size:l,...o}=e;return(0,i.jsxs)(s.xz,{ref:t,className:(0,c.cn)("flex w-full items-center justify-between rounded-md border border-button bg-button text-xs ring-offset-background-control placeholder:text-foreground-muted focus:outline-none ring-border-control focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",h({size:l}),n),...o,children:[a,(0,i.jsx)(s.JO,{asChild:!0,children:(0,i.jsx)(r.Z,{className:"h-4 w-4 text-foreground-muted"})})]})});x.displayName=s.xz.displayName;let g=o.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,i.jsx)(s.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1 text-foreground-muted",n),...r,children:(0,i.jsx)(a.Z,{className:"h-4 w-4"})})});g.displayName=s.u_.displayName;let v=o.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,i.jsx)(s.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1 text-foreground-muted",n),...a,children:(0,i.jsx)(r.Z,{className:"h-4 w-4"})})});v.displayName=s.$G.displayName;let j=o.forwardRef((e,t)=>{let{className:n,children:r,position:a="popper",...l}=e;return(0,i.jsx)(s.h_,{children:(0,i.jsxs)(s.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-overlay text-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:a,...l,children:[(0,i.jsx)(g,{}),(0,i.jsx)(s.l_,{className:(0,c.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,i.jsx)(v,{})]})})});j.displayName=s.VY.displayName;let y=o.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,i.jsx)(s.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-xs text-foreground-lighter/75 uppercase tracking-wider font-mono",n),...r})});y.displayName=s.__.displayName;let _=o.forwardRef((e,t)=>{let{className:n,children:r,...a}=e;return(0,i.jsxs)(s.ck,{ref:t,className:(0,c.cn)("group","relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-xs outline-none focus:bg-overlay-hover text-foreground-light focus:text-foreground data-[state=checked]:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...a,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(s.wU,{className:"h-3.5 w-3.5 bg-foreground rounded-full flex justify-center items-center",children:(0,i.jsx)(l.Z,{className:"h-2 w-2 text-background-overlay",strokeWidth:6})})}),(0,i.jsx)(s.eT,{children:r})]})});_.displayName=s.ck.displayName;let b=o.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,i.jsx)(s.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-border-overlay",n),...r})});b.displayName=s.Z0.displayName},7117:function(e,t,n){"use strict";n.d(t,{DN:function(){return g},Ei:function(){return y},FF:function(){return v},Tu:function(){return x},bC:function(){return j},sw:function(){return d},ue:function(){return h},yo:function(){return c}});var i=n(52322),s=n(70241),r=n(10929),a=n(2784),l=n(8609),o=n(54383);let c=s.fC;s.xz;let d=s.x8,u=(0,r.j)("fixed inset-0 z-50 flex",{variants:{side:{top:"items-start",bottom:"items-end",left:"justify-start",right:"justify-end"}},defaultVariants:{side:"right"}}),p=e=>{let{side:t,children:n,...r}=e;return(0,i.jsx)(s.h_,{...r,children:(0,i.jsx)("div",{className:u({side:t}),children:n})})};p.displayName=s.h_.displayName;let m=a.forwardRef((e,t)=>{let{className:n,children:r,...a}=e;return(0,i.jsx)(s.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-alternative/90 backdrop-blur-sm transition-all duration-100 data-[state=closed]:animate-out data-[state=closed]:fade-out data-[state=open]:fade-in",n),...a,ref:t})});m.displayName=s.aV.displayName;let f=(0,r.j)("fixed z-50 scale-100 gap-4 bg-studio opacity-100 shadow-lg",{variants:{side:{top:"animate-in slide-in-from-top w-full duration-300 border-b",bottom:"animate-in slide-in-from-bottom w-full duration-300 border-t",left:"animate-in slide-in-from-left h-full duration-300 border-r",right:"animate-in slide-in-from-right h-full duration-300 border-l"},size:{content:"",default:"",sm:"",lg:"",xl:"",xxl:"",full:""}},compoundVariants:[{side:["top","bottom"],size:"content",class:"max-h-screen"},{side:["top","bottom"],size:"default",class:"h-1/3"},{side:["top","bottom"],size:"sm",class:"h-1/4"},{side:["top","bottom"],size:"lg",class:"h-1/2"},{side:["top","bottom"],size:"xl",class:"h-5/6"},{side:["top","bottom"],size:"full",class:"h-screen"},{side:["right","left"],size:"content",class:"max-w-screen"},{side:["right","left"],size:"default",class:"w-1/3"},{side:["right","left"],size:"sm",class:"w-1/4"},{side:["right","left"],size:"lg",class:"w-1/2"},{side:["right","left"],size:"xl",class:"w-4/6"},{side:["right","left"],size:"xxl",class:"w-5/6"},{side:["right","left"],size:"full",class:"w-screen"}],defaultVariants:{side:"right",size:"default"}}),h=a.forwardRef((e,t)=>{let{side:n,size:r,className:a,children:c,showClose:d=!0,...u}=e;return(0,i.jsxs)(p,{side:n,children:[(0,i.jsx)(m,{}),(0,i.jsxs)(s.VY,{ref:t,className:(0,o.cn)(f({side:n,size:r}),a),...u,children:[c,d?(0,i.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,i.jsx)(l.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]}):null]})]})});h.displayName=s.VY.displayName;let x=e=>{let{className:t,...n}=e;return(0,i.jsx)("div",{className:(0,o.cn)("px-5 py-4 text-center sm:text-left border-b",t),...n})};x.displayName="SheetHeader";let g=e=>{let{className:t,...n}=e;return(0,i.jsx)("div",{className:(0,o.cn)("px-content py-content",t),...n})};g.displayName="SheetSection";let v=e=>{let{className:t,...n}=e;return(0,i.jsx)("div",{className:(0,o.cn)("px-5 py-3 border-t w-full","flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};v.displayName="SheetFooter";let j=a.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,i.jsx)(s.Dx,{ref:t,className:(0,o.cn)("text-base text-foreground",n),...r})});j.displayName=s.Dx.displayName;let y=a.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,i.jsx)(s.dk,{ref:t,className:(0,o.cn)("text-sm text-foreground-muted",n),...r})});y.displayName=s.dk.displayName},93705:function(e,t,n){"use strict";n.d(t,{r:function(){return d}});var i=n(52322),s=n(16530),r=n(10929),a=n(2784),l=n(54383);let o=(0,r.j)("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",{variants:{size:{small:"h-[16px] w-[28px]",medium:"h-[20px] w-[34px]",large:"h-[24px] w-[44px]"}},defaultVariants:{size:"medium"}}),c=(0,r.j)("pointer-events-none block rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform",{variants:{size:{small:"h-[12px] w-[12px] data-[state=checked]:translate-x-[13px] data-[state=unchecked]:translate-x-[1px]",medium:"h-[16px] w-[16px] data-[state=checked]:translate-x-[15px] data-[state=unchecked]:translate-x-[1px]",large:"h-[18px] w-[18px] data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]"}},defaultVariants:{size:"medium"}}),d=a.forwardRef((e,t)=>{let{className:n,size:r,...a}=e;return(0,i.jsx)(s.fC,{className:(0,l.cn)(o({size:r}),n),...a,ref:t,children:(0,i.jsx)(s.bU,{className:(0,l.cn)(c({size:r}))})})});d.displayName=s.fC.displayName},91316:function(e,t,n){"use strict";n.d(t,{K:function(){return l}});var i=n(52322),s=n(2784),r=n(54383);let a=["bg-control"],l=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,i.jsx)("textarea",{className:(0,r.cn)("flex min-h-10 w-full rounded-md border border-control bg-control px-3 py-2 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-foreground-muted","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-background-control focus-visible:ring-offset-2 focus-visible:ring-offset-foreground-muted disabled:cursor-not-allowed disabled:opacity-50",...a,n),ref:t,...s})});l.displayName="Input"},54849:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var i=n(52322),s=n(84792),r=n.n(s),a=n(2784),l=n(54383);let o=e=>{let{loading:t=!1,className:n,allowHoverEffect:s=!1}=e,[o,c]=(0,a.useState)(1),[d,u]=(0,a.useState)(1),[p,m]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=setInterval(()=>{t&&(m(!0),c(e=>e%5+1),u(e=>e%5+1))},500);return()=>clearInterval(e)},[t]),(0,a.useEffect)(()=>{!1===t&&(setTimeout(()=>{m(!1)},500),c(1))},[t]),(0,i.jsx)("div",{className:(0,l.cn)(r()["ai-icon__container"],s&&r()["ai-icon__container--allow-hover-effect"],t&&p&&r()["spin-ai-icon-container"],n),children:(0,i.jsxs)("div",{className:(0,l.cn)(r()["ai-icon__grid"]),children:[(0,i.jsx)("div",{className:(0,l.cn)(r()["ai-icon__grid__square"],t?r()["ai-icon__grid__square--step-".concat(o)]:p?r()["ai-icon__grid__square--exiting--step-".concat(d)]:r()["ai-icon__grid__square--static"])}),(0,i.jsx)("div",{className:(0,l.cn)(r()["ai-icon__grid__square"],t?r()["ai-icon__grid__square--step-".concat(o)]:p?r()["ai-icon__grid__square--exiting--step-".concat(d)]:r()["ai-icon__grid__square--static"])}),(0,i.jsx)("div",{className:(0,l.cn)(r()["ai-icon__grid__square"],t?r()["ai-icon__grid__square--step-".concat(o)]:p?r()["ai-icon__grid__square--exiting--step-".concat(d)]:r()["ai-icon__grid__square--static"])}),(0,i.jsx)("div",{className:(0,l.cn)(r()["ai-icon__grid__square"],t?r()["ai-icon__grid__square--step-".concat(o)]:p?r()["ai-icon__grid__square--exiting--step-".concat(d)]:r()["ai-icon__grid__square--static"])})]})})}},73071:function(e,t,n){"use strict";n.d(t,{t:function(){return c}});var i=n(52322),s=n(58898),r=n(96577),a=n.n(r),l=n(54383);let o=e=>(0,i.jsx)("span",{className:(0,l.cn)("next-image--dynamic-fill",e.className),children:(0,i.jsx)(a(),{...e,className:"rounded-md border",layout:"fill"})}),c={mono:e=>(0,i.jsx)("code",{className:"text-sm",children:e.children}),code:e=>(0,i.jsx)(s.d,{...e}),img:e=>o(e),Image:e=>o(e)}},84792:function(e){e.exports={"spin-ai-icon-container":"ai-icon-animation-style_spin-ai-icon-container__7sgAA",spinAiIconContainer:"ai-icon-animation-style_spinAiIconContainer__rBP6P","ai-icon__container":"ai-icon-animation-style_ai-icon__container__2aXBS","ai-icon__grid":"ai-icon-animation-style_ai-icon__grid__Qrwxf","ai-icon__grid__square":"ai-icon-animation-style_ai-icon__grid__square__YU8EZ","ai-icon__grid__square--static":"ai-icon-animation-style_ai-icon__grid__square--static__1tOM_","ai-icon__container--allow-hover-effect":"ai-icon-animation-style_ai-icon__container--allow-hover-effect__HrB86","ai-icon__grid__square--step-1":"ai-icon-animation-style_ai-icon__grid__square--step-1__KATlI",step1_square1:"ai-icon-animation-style_step1_square1__BIjL3",step1_square2:"ai-icon-animation-style_step1_square2__QzsE7",step1_square3:"ai-icon-animation-style_step1_square3__ls1SO",step1_square4:"ai-icon-animation-style_step1_square4__Kk8zi","ai-icon__grid__square--step-2":"ai-icon-animation-style_ai-icon__grid__square--step-2__9OoIG",step2_square1:"ai-icon-animation-style_step2_square1__o_hcu",step2_square2:"ai-icon-animation-style_step2_square2__HBZt7",step2_square3:"ai-icon-animation-style_step2_square3__K6E2K",step2_square4:"ai-icon-animation-style_step2_square4__oDGDL","ai-icon__grid__square--step-3":"ai-icon-animation-style_ai-icon__grid__square--step-3__RldL4",step3_square1:"ai-icon-animation-style_step3_square1__Oo6vT",step3_square2:"ai-icon-animation-style_step3_square2__36Os9",step3_square3:"ai-icon-animation-style_step3_square3__Nj5rc",step3_square4:"ai-icon-animation-style_step3_square4__OFVFh","ai-icon__grid__square--step-4":"ai-icon-animation-style_ai-icon__grid__square--step-4__7o69c",step4_square1:"ai-icon-animation-style_step4_square1__G_8pn",step4_square2:"ai-icon-animation-style_step4_square2__KHYf3",step4_square3:"ai-icon-animation-style_step4_square3__XON12",step4_square4:"ai-icon-animation-style_step4_square4__Aq8dV","ai-icon__grid__square--step-5":"ai-icon-animation-style_ai-icon__grid__square--step-5__cF2Rx",step5_square1:"ai-icon-animation-style_step5_square1__me9Ru",step5_square2:"ai-icon-animation-style_step5_square2__0Ydfw",step5_square3:"ai-icon-animation-style_step5_square3__bOHqW",step5_square4:"ai-icon-animation-style_step5_square4__m2l32","ai-icon__grid__square--exiting--step-1":"ai-icon-animation-style_ai-icon__grid__square--exiting--step-1__JYREY",exit_step1_square1:"ai-icon-animation-style_exit_step1_square1__C_GBC",exit_step1_square2:"ai-icon-animation-style_exit_step1_square2__TID0l",exit_step1_square3:"ai-icon-animation-style_exit_step1_square3__ADmUT",exit_step1_square4:"ai-icon-animation-style_exit_step1_square4__kilu_","ai-icon__grid__square--exiting--step-2":"ai-icon-animation-style_ai-icon__grid__square--exiting--step-2__kDUVt",exit_step2_square1:"ai-icon-animation-style_exit_step2_square1__vmYa5",exit_step2_square2:"ai-icon-animation-style_exit_step2_square2__zxv0q",exit_step2_square3:"ai-icon-animation-style_exit_step2_square3__Dhey5",exit_step2_square4:"ai-icon-animation-style_exit_step2_square4__P1UKx","ai-icon__grid__square--exiting--step-3":"ai-icon-animation-style_ai-icon__grid__square--exiting--step-3__h48Ts",exit_step3_square1:"ai-icon-animation-style_exit_step3_square1__l1FKu",exit_step3_square2:"ai-icon-animation-style_exit_step3_square2__4RPQL",exit_step3_square3:"ai-icon-animation-style_exit_step3_square3__s2vMz",exit_step3_square4:"ai-icon-animation-style_exit_step3_square4__Zros9","ai-icon__grid__square--exiting--step-4":"ai-icon-animation-style_ai-icon__grid__square--exiting--step-4__VEmk_",exit_step4_square1:"ai-icon-animation-style_exit_step4_square1__bG99O",exit_step4_square2:"ai-icon-animation-style_exit_step4_square2__1Fxvf",exit_step4_square3:"ai-icon-animation-style_exit_step4_square3__EWeB7",exit_step4_square4:"ai-icon-animation-style_exit_step4_square4__HC5ov","ai-icon__grid__square--exiting--step-5":"ai-icon-animation-style_ai-icon__grid__square--exiting--step-5___9jFB",exit_step5_square1:"ai-icon-animation-style_exit_step5_square1__w4ctB",exit_step5_square2:"ai-icon-animation-style_exit_step5_square2__UZdas",exit_step5_square3:"ai-icon-animation-style_exit_step5_square3__O_mvc",exit_step5_square4:"ai-icon-animation-style_exit_step5_square4__SKL7Z"}}},function(e){e.O(0,[9774,8421,538,8183,7385,6770,3844,63,8993,8395,3736,7148,2327,5700,4018,7833,7370,289,3614,2784,5111,3111,2168,7533,2472,3452,4830,9428,6640,5022,1224,2888,179],function(){return e(e.s=40936)}),_N_E=e.O()}]);