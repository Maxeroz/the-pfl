(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5885,8020,1297],{65338:function(e){e.exports=function(e,t,s,n){for(var a=-1,i=null==e?0:e.length;++a<i;){var r=e[a];t(n,r,s(r),e)}return n}},12825:function(e,t,s){var n=s(24303);e.exports=function(e,t,s,a){return n(e,function(e,n,i){t(a,e,s(e),i)}),a}},36740:function(e,t,s){var n=s(65338),a=s(12825),i=s(68286),r=s(86152);e.exports=function(e,t){return function(s,l){var o=r(s)?n:a,c=t?t():{};return o(s,e,i(l,2),c)}}},96795:function(e,t,s){var n=s(36740)(function(e,t,s){e[s?0:1].push(t)},function(){return[[],[]]});e.exports=n},50193:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/auth/policies",function(){return s(29288)}])},43899:function(e,t,s){"use strict";s.d(t,{t:function(){return e7}});var n=s(52322),a=s(88883),i=s(85945),r=s(27533),l=s(99959),o=s(18149),c=s.n(o),d=s(84636),u=s.n(d),m=s(88358),h=s(25237),x=s.n(h),p=s(5632),f=s(2784),g=s(63955),j=s(62202),v=s(22574),y=s(7117),b=s(54383),_=s(32079),N=s(71640),w=s(6112),C=s(89828),k=s(19869),S=s(30195),E=s(63910),q=s(34750),Z=s(8334),R=s(20560),L=s(11596),z=s(17055),T=s(30120),A=s(93463),P=s(89823),D=s(26211),F=s(99248),I=s(82955),V=s(28020),O=s(74138),M=s(60417),W=s.n(M),B=s(56974),U=s.n(B),H=s(46252),Q=s(23770),Y=s(74067),X=s(16289),G=s(42070),K=s(7803),$=s(28879),J=s.n($),ee=s(34291),et=s.n(ee),es=s(96577),en=s.n(es),ea=s(14048),ei=s(12188),er=s(54849),el=s(81076),eo=s(73071),ec=s(24990),ed=s(76141),eu=s(94299),em=s(82784),eh=s(58898);let ex=e=>{let{onDiff:t,children:s,className:a}=e,[i,r]=(0,f.useState)(!1),o=(0,p.useRouter)(),c=(0,l.Mk)();(0,f.useEffect)(()=>{if(!i)return;let e=setTimeout(()=>r(!1),2e3);return()=>clearTimeout(e)},[i]);let d=(s||[""])[0];try{d=(0,em.WU)(d,{language:"postgresql",keywordCase:"upper"})}catch(e){}return 0===d.length?null:(0,n.jsxs)("pre",{className:(0,b.cn)("rounded-md relative group",a),children:[(0,n.jsx)(eh.d,{value:d,language:"sql",className:(0,b.cn)("!py-3 !px-3.5 prose dark:prose-dark transition","[&>code]:m-0 [&>code>span]:flex [&>code>span]:flex-wrap"),hideCopy:!0,hideLineNumbers:!0}),(0,n.jsxs)("div",{className:(0,b.cn)("absolute","top-0 right-2","bg-surface-300","border border-strong","rounded","h-[28px]","opacity-0 group-hover:opacity-100","group-hover:top-2","transition-all"),children:[(0,n.jsxs)(ec.fC,{delayDuration:0,children:[(0,n.jsx)(ec.xz,{asChild:!0,children:(0,n.jsx)(_.z,{type:"text",size:"tiny",className:(0,b.cn)("text-foreground-lighter hover:text-foreground","transition"),onClick:()=>{t(d),V.Z.sendEvent({category:"rls_editor",action:"ai_suggestion_diffed",label:"rls-ai-assistant"},c,o)},children:(0,n.jsx)(m.Z,{className:(0,b.cn)("h-4 w-4")})})}),(0,n.jsx)(ec.h_,{children:(0,n.jsxs)(ec.VY,{side:"bottom",children:[(0,n.jsx)(ec.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"Apply changes"})})]})})]}),(0,n.jsxs)(ec.fC,{delayDuration:0,children:[(0,n.jsx)(ec.xz,{asChild:!0,children:(0,n.jsx)(_.z,{type:"text",size:"tiny",className:(0,b.cn)("text-foreground-lighter hover:text-foreground","transition"),onClick:()=>{var e;e=d,navigator.clipboard.writeText(e).then(),r(!0),V.Z.sendEvent({category:"rls_editor",action:"ai_suggestion_copied",label:"rls-ai-assistant"},c,o)},children:i?(0,n.jsx)(ed.Z,{size:16,className:"text-brand-600"}):(0,n.jsx)(eu.Z,{size:16,className:(0,b.cn)("h-4 w-4")})})}),(0,n.jsx)(ec.h_,{children:(0,n.jsxs)(ec.VY,{side:"bottom",children:[(0,n.jsx)(ec.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"Copy code"})})]})})]})]})]})},ep=(0,f.memo)(function(e){let{name:t,role:s,content:a,createdAt:i,isDebug:r,isSelected:l,onDiff:o=et(),children:c}=e,{profile:d}=(0,Y.Un)(),u=(0,f.useMemo)(()=>"assistant"===s?(0,n.jsx)("div",{className:(0,b.cn)("bg-foreground border border-foreground-light rounded-full","w-8 h-8","flex items-center justify-center"),children:(0,n.jsx)(er.c,{loading:"Thinking..."===a,className:(0,b.cn)("scale-75","[&>div>div]:border-background")})}):(0,n.jsx)("div",{className:"relative border shadow-lg w-8 h-8 rounded-full overflow-hidden",children:(0,n.jsx)(en(),{src:"https://github.com/".concat(null==d?void 0:d.username,".png")||0,width:30,height:30,alt:"avatar",className:"relative"})}),[a,null==d?void 0:d.username,s]);return a?(0,n.jsxs)("div",{className:"flex flex-col py-4 gap-4 px-5 text-foreground-light text-sm",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[u,(0,n.jsx)("span",{className:"text-foreground",children:"assistant"===s?"Assistant":t||"You"}),i&&(0,n.jsx)("span",{className:"text-xs text-foreground-muted",children:J()(i).fromNow()}),r&&(0,n.jsx)(el.C,{variant:"warning",children:"Debug request"})]}),(0,n.jsx)(ea.D,{className:"gap-2.5 flex flex-col",remarkPlugins:[ei.Z],components:{...eo.t,pre:e=>(0,n.jsx)(ex,{onDiff:o,className:(0,b.cn)("transition",l?"[&>div>pre]:!border-stronger [&>div>pre]:!bg-surface-200":""),children:e.children[0].props.children})},children:a}),c]}):null}),ef=e=>{var t,s,i;let{messages:r,selectedMessage:o,loading:c,onSubmit:d,onDiff:u,onChange:m}=e,h=(0,p.useRouter)(),{profile:x}=(0,Y.Un)(),j=(0,X.WZ)(),y=(0,P.l)(),N=(0,f.useRef)(null),w=(0,l.Mk)(),C=null!==(i=null==y?void 0:null===(t=y.opt_in_tags)||void 0===t?void 0:t.includes(F.PV.AI_SQL))&&void 0!==i&&i,[k]=(0,Q.l)(F.dA.SQL_EDITOR_AI_SCHEMA,!0),E=(C||!F.Qy)&&k,q=W()([null==x?void 0:x.first_name,null==x?void 0:x.last_name]).join(" "),Z=S.Ry({chat:S.Z_()}),R=(0,g.cI)({mode:"onBlur",reValidateMode:"onBlur",resolver:(0,a.F)(Z),defaultValues:{chat:""}}),L=R.getValues().chat,z=c&&(null===(s=U()(r))||void 0===s?void 0:s.role)==="user";return(0,f.useEffect)(()=>{c&&N.current&&setTimeout(()=>{var e;null===(e=N.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},500)}),(0,f.useEffect)(()=>{c||(R.setValue("chat",""),R.setFocus("chat"))},[c]),(0,f.useEffect)(()=>{m(0===L.length)},[L]),(0,n.jsxs)("div",{id:"ai-chat-assistant",className:"flex flex-col h-full max-w-full",children:[(0,n.jsxs)("div",{className:"overflow-auto flex-1 divide-y divide-border",children:[(0,n.jsx)(ep,{role:"assistant",content:"Hi".concat(q?" "+q:"",", I can help you to write RLS policies. I'm powered by AI, so surprises and mistakes are possible.\n        Make sure to verify any generated code or suggestions, and share feedback so that we can\n        learn and improve."),children:(0,n.jsxs)(_.z,{type:"default",className:"w-min",icon:(0,n.jsx)("div",{className:(0,b.cn)("w-2 h-2 rounded-full",E?"bg-brand":"border border-stronger")}),onClick:()=>j.setShowAiSettingsModal(!0),children:[E?"Include":"Exclude"," database metadata in queries"]})},"zero"),r.map(e=>(0,n.jsx)(ep,{name:e.name,role:e.role,content:e.content,createdAt:new Date(e.createdAt||new Date).getTime(),isDebug:e.isDebug,isSelected:e.id===o,onDiff:t=>u({id:e.id,content:t})},"message-".concat(e.id))),z&&(0,n.jsx)(ep,{role:"assistant",content:"Thinking..."},"thinking"),(0,n.jsx)("div",{ref:N,className:"h-1"})]}),(0,n.jsx)(v.l0,{...R,children:(0,n.jsx)("form",{id:"rls-chat",className:"sticky p-5 flex-0 border-t",onSubmit:R.handleSubmit(e=>{d(e.chat),V.Z.sendEvent({category:"rls_editor",action:"ai_suggestion_asked",label:"rls-ai-assistant"},w,h)}),children:(0,n.jsx)(v.Wi,{control:R.control,name:"chat",render:e=>{let{field:t}=e;return(0,n.jsx)(v.xJ,{children:(0,n.jsx)(v.NI,{children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(K.p,{className:"absolute top-2 left-3 [&>div>div]:border-black dark:[&>div>div]:border-white"}),(0,n.jsx)(G.I,{...t,autoComplete:"off",disabled:c,autoFocus:!0,className:"bg-surface-300 dark:bg-black rounded-full pl-10 ".concat(c?"pr-10":""),placeholder:"Ask for some changes to your policy"}),c&&(0,n.jsx)(H.Z,{className:"absolute top-2 right-3 animate-spin"})]})})})}})})})]})},eg=e=>{let{id:t,content:s,isDebug:n}=e;return{id:null!=t?t:(0,I.k$)(),role:"assistant",content:s,createdAt:new Date,isDebug:n}},ej=e=>{if(void 0===e)return"\n-- Press tab to use this code\n\n&nbsp;\n\nCREATE POLICY *name* ON *table_name*\n\nAS PERMISSIVE -- PERMISSIVE | RESTRICTIVE\n\nFOR ALL -- ALL | SELECT | INSERT | UPDATE | DELETE\n\nTO *role_name* -- Default: public\n\nUSING ( *using_expression* )\n\nWITH CHECK ( *check_expression* );\n".trim();{let t="";return null!==e.definition&&void 0!==e.definition&&(t+="USING ( *".concat(e.definition,"* )").concat(null===e.check||void 0===e.check?";":"","\n")),null!==e.check&&void 0!==e.check&&(t+="WITH CHECK ( *".concat(e.check,"* );\n")),'\n-- Press tab to use this code\n\n&nbsp;\n\nBEGIN;\n\n&nbsp;\n\n-- To update your policy definition\n\nALTER POLICY "'.concat(e.name,'"\n\nON "').concat(e.schema,'"."').concat(e.table,'"\n\nTO *').concat(e.roles.join(", "),"*\n\n").concat(t,'\n&nbsp;\n\n-- To rename your policy\n\nALTER POLICY "').concat(e.name,'"\n\nON "').concat(e.schema,'"."').concat(e.table,'"\n\nRENAME TO "*New Policy Name*";\n\n&nbsp;\n\nCOMMIT;\n').trim()}},ev=e=>'\nCREATE POLICY "'.concat(e.name,'" on "').concat(e.schema,'"."').concat(e.table,'"\nAS ').concat(e.action," FOR ").concat(e.command,"\nTO ").concat(e.roles.join(", "),"\n").concat(e.definition?"USING (".concat(e.definition,")"):"","\n").concat(e.check?"WITH CHECK (".concat(e.check,")"):"","\n;\n").trim(),ey=e=>{let{name:t,schema:s,table:n,behavior:a,command:i,roles:r,using:l,check:o}=e,c='create policy "'.concat(t,'" on "').concat(s,'"."').concat(n,'" as ').concat(a," for ").concat(i," to ").concat(r);return"insert"===i?"".concat(c," with check (").concat(o,");"):"".concat(c," using (").concat(l,")").concat((null!=o?o:"").length>0?"with check (".concat(o,");"):";")},eb=(e,t)=>!(("INSERT"!==e.command||e.check===t.check)&&("INSERT"===e.command||e.definition===t.definition&&e.check===t.check)&&e.name===t.name&&c()(e.roles,t.roles));var e_=s(8609),eN=s(97860),ew=s(48094),eC=s(55283),ek=s(43687),eS=s(2322);let eE=e=>{var t;let{selectedPolicy:s,assistantVisible:a,setAssistantVisible:i}=e,[r,l]=(0,f.useState)(!1),o=(0,E.bB)();return(0,n.jsxs)(y.Tu,{className:(0,b.cn)("py-3 flex flex-row justify-between items-start border-b"),children:[(0,n.jsxs)("div",{className:"flex flex-row gap-3 max-w-[75%] ".concat(o?"items-start":"items-center"),children:[(0,n.jsxs)(y.sw,{className:(0,b.cn)("text-muted hover:text ring-offset-background transition-opacity hover:opacity-100","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","transition disabled:pointer-events-none data-[state=open]:bg-secondary",o?"mt-1.5":""),children:[(0,n.jsx)(e_.Z,{className:"h-3 w-3"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]}),(0,n.jsx)("div",{className:"h-[24px] w-[1px] bg-border-overlay"}),(0,n.jsxs)("div",{children:[(0,n.jsx)(y.bC,{className:"truncate",children:void 0!==s?"Update policy: ".concat(s.name):"Create a new Row Level Security policy"}),o&&void 0!==s&&(0,n.jsxs)(eC.zF,{className:"-mt-1.5 pb-1.5",open:r,onOpenChange:l,children:[(0,n.jsx)(eC.wy,{className:"group  font-normal p-0 [&[data-state=open]>div>svg]:!-rotate-180",children:(0,n.jsxs)("div",{className:"flex items-center gap-x-2 w-full",children:[(0,n.jsx)("p",{className:"text-xs text-foreground-light group-hover:text-foreground transition",children:"View policy details"}),(0,n.jsx)(ek.Z,{className:"transition-transform duration-200",strokeWidth:1.5,size:14})]})}),(0,n.jsx)(eC.Fw,{className:"grid gap-1.5",children:(0,n.jsx)("div",{className:"flex my-2",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-xs flex items-start space-x-2 border-b py-1.5",children:[(0,n.jsx)("p",{className:"w-[110px] text-foreground-light",children:"Name:"}),(0,n.jsx)("p",{className:"pr-4",children:null==s?void 0:s.name})]}),(0,n.jsxs)("div",{className:"text-xs flex items-start space-x-2 border-b py-1.5",children:[(0,n.jsx)("p",{className:"w-[110px] text-foreground-light",children:"Action:"}),(0,n.jsx)("p",{className:"font-mono pr-4",children:null==s?void 0:s.action})]}),(0,n.jsxs)("div",{className:"text-xs flex items-start space-x-2 border-b py-1.5",children:[(0,n.jsx)("p",{className:"w-[110px] text-foreground-light",children:"Command:"}),(0,n.jsx)("p",{className:"font-mono pr-4",children:null==s?void 0:s.command})]}),(0,n.jsxs)("div",{className:"text-xs flex items-start space-x-2 border-b py-1.5",children:[(0,n.jsx)("p",{className:"w-[110px] text-foreground-light",children:"Target roles:"}),(0,n.jsx)("p",{className:"font-mono pr-4",children:null==s?void 0:s.roles.join(", ")})]}),(0,n.jsxs)("div",{className:"text-xs flex items-start space-x-2 border-b py-1.5",children:[(0,n.jsx)("p",{className:"w-[110px] text-foreground-light",children:"USING expression:"}),(0,n.jsx)("p",{className:"font-mono pr-4",children:null==s?void 0:s.definition})]}),(0,n.jsxs)("div",{className:"text-xs flex items-start space-x-2 pt-1.5",children:[(0,n.jsx)("p",{className:"w-[110px] text-foreground-light",children:"CHECK expression:"}),(0,n.jsx)("p",{className:"".concat((null==s?void 0:s.check)?"":"text-foreground-light"," font-mono pr-4"),children:null!==(t=null==s?void 0:s.check)&&void 0!==t?t:"None"})]})]})})})]})]})]}),(0,n.jsxs)(eS.u,{children:[(0,n.jsx)(eS.aJ,{asChild:!0,children:(0,n.jsx)("button",{"aria-expanded":a,"aria-controls":"ai-chat-assistant",className:(0,b.cn)(a?"text-light":"text-foreground-lighter","mt-1 hover:text-foreground transition"),onClick:()=>i(!a),children:a?(0,n.jsx)(ew.Z,{size:19,strokeWidth:1}):(0,n.jsx)(eN.Z,{size:19,strokeWidth:1})})}),(0,n.jsxs)(eS._v,{side:"left",children:[a?"Hide":"Show"," tools"]})]})]})};var eq=s(16826);let eZ=e=>{let{schema:t,selectedPolicy:s,formFields:a,editorOneRef:i,editorTwoRef:r}=e;(0,p.useRouter)();let{ref:o}=(0,l.UO)(),c=void 0!==s,{name:d,table:u,behavior:m,command:h,roles:x}=a;return(0,n.jsxs)("div",{className:"bg-surface-300 pt-2 pb-1",children:[(0,n.jsx)("div",{className:"flex items-center justify-between px-5 mb-1",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"pl-0.5 pr-5 flex items-center justify-center",children:(0,n.jsx)(eq.Z,{size:14,className:"text-foreground-lighter"})}),(0,n.jsx)("p",{className:"text-xs text-foreground-lighter font-mono uppercase",children:"Use options above to edit"})]})}),(0,n.jsxs)("div",{className:"flex items-start",style:{fontSize:"14px"},children:[(0,n.jsx)("p",{className:"px-6 font-mono text-sm text-foreground-light select-none",children:"1"}),(0,n.jsxs)("p",{className:"font-mono tracking-tighter",children:[(0,n.jsx)("span",{className:"text-[#569cd6]",children:c?"alter":"create"}),' policy "',0===d.length?"policy_name":d,'"']})]}),(0,n.jsxs)("div",{className:"flex items-start",style:{fontSize:"14px"},children:[(0,n.jsx)("p",{className:"px-6 font-mono text-sm text-foreground-light select-none",children:"2"}),(0,n.jsxs)("p",{className:"font-mono tracking-tighter",children:[(0,n.jsx)("span",{className:"text-[#569cd6]",children:"on"}),' "',t,'"."',u,'"']})]}),!c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-start",style:{fontSize:"14px"},children:[(0,n.jsx)("p",{className:"px-6 font-mono text-sm text-foreground-light select-none",children:"3"}),(0,n.jsxs)("p",{className:"font-mono tracking-tighter",children:[(0,n.jsx)("span",{className:"text-[#569cd6]",children:"as"})," ",m.toLocaleUpperCase()]})]}),(0,n.jsxs)("div",{className:"flex items-start",style:{fontSize:"14px"},children:[(0,n.jsx)("p",{className:"px-6 font-mono text-sm text-foreground-light select-none",children:"4"}),(0,n.jsxs)("p",{className:"font-mono tracking-tighter",children:[(0,n.jsx)("span",{className:"text-[#569cd6]",children:"for"})," ",h.toLocaleUpperCase()]})]})]}),(0,n.jsxs)("div",{className:"flex items-start",style:{fontSize:"14px"},children:[(0,n.jsx)("p",{className:"px-6 font-mono text-sm text-foreground-light select-none",children:"5"}),(0,n.jsxs)("p",{className:"font-mono tracking-tighter",children:[(0,n.jsx)("span",{className:"text-[#569cd6]",children:"to"})," ",0===x.length?"public":x]})]}),(0,n.jsxs)("div",{className:"flex items-start",style:{fontSize:"14px"},children:[(0,n.jsx)("p",{className:"px-6 font-mono text-sm text-foreground-light select-none",children:"6"}),(0,n.jsxs)("p",{className:"font-mono tracking-tighter",children:[(0,n.jsx)("span",{className:"text-[#569cd6]",children:"insert"===h?"with check":"using"})," ",(0,n.jsx)("span",{className:"text-[#ffd700]",children:"("})]})]})]})},eR=e=>{let{oldName:t,newName:s,schema:a,table:i,lineNumber:r}=e;return(0,n.jsxs)("div",{className:"bg-surface-300 py-1",children:[(0,n.jsxs)("div",{className:"flex items-center",style:{fontSize:"14px"},children:[(0,n.jsx)("div",{className:"w-[57px]",children:(0,n.jsx)("p",{className:"w-[31px] flex justify-end font-mono text-sm text-foreground-light select-none",children:r})}),(0,n.jsxs)("p",{className:"font-mono tracking-tighter",children:[(0,n.jsx)("span",{className:"text-[#569cd6]",children:"alter"})," policy ",t]})]}),(0,n.jsxs)("div",{className:"flex items-center",style:{fontSize:"14px"},children:[(0,n.jsx)("div",{className:"w-[57px]",children:(0,n.jsx)("p",{className:"w-[31px] flex justify-end font-mono text-sm text-foreground-light select-none",children:r+1})}),(0,n.jsxs)("p",{className:"font-mono tracking-tighter",children:[(0,n.jsx)("span",{className:"text-[#569cd6]",children:"on"}),' "',a,'"."',i,'"']})]}),(0,n.jsxs)("div",{className:"flex items-center",style:{fontSize:"14px"},children:[(0,n.jsx)("div",{className:"w-[57px]",children:(0,n.jsx)("p",{className:"w-[31px] flex justify-end font-mono text-sm text-foreground-light select-none",children:r+2})}),(0,n.jsxs)("p",{className:"font-mono tracking-tighter",children:[(0,n.jsx)("span",{className:"text-[#569cd6]",children:"rename"}),' to "',s,'";']})]})]})};var eL=s(90038),ez=s(27570),eT=s(45997),eA=s(57924),eP=s(61786),eD=s(90504),eF=s(62949),eI=s(16734),eV=s(2746);let eO=e=>{let{schema:t,searchString:s,selectedTable:a,isEditing:i,form:r,onUpdateCommand:l,authContext:o}=e,{project:c}=(0,ez.d2)(),[d,u]=(0,f.useState)(!1),{data:m,isSuccess:h}=(0,eA.Bj)({projectRef:null==c?void 0:c.ref,connectionString:null==c?void 0:c.connectionString,schema:t,sortByProperty:"name",includeColumns:!0}),{data:x}=(0,eT.x)({projectRef:null==c?void 0:c.ref,connectionString:null==c?void 0:c.connectionString}),p=(null!=x?x:[]).map(e=>({id:e.id,name:e.name,value:e.name,disabled:!1})).sort((e,t)=>e.name.localeCompare(t.name));return(0,f.useEffect)(()=>{if(!i&&void 0===a){let e=null==m?void 0:m.find(e=>e.schema===t&&(e.id.toString()===s||e.name===s));e?r.setValue("table",e.name):h&&m.length>0&&r.setValue("table",m[0].name)}},[i,r,s,m,h,a]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"px-5 py-5 flex flex-col gap-y-4 border-b",children:(0,n.jsxs)("div",{className:"items-start justify-between gap-4 grid grid-cols-12",children:[(0,n.jsx)(v.Wi,{control:r.control,name:"name",render:e=>{let{field:t}=e;return(0,n.jsxs)(v.xJ,{className:"col-span-6 flex flex-col gap-y-1",children:[(0,n.jsx)(v.lX,{children:"Policy Name"}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(G.I,{...t,className:"bg-control border-control",placeholder:"Provide a name for your policy"})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:r.control,name:"table",render:e=>{let{field:s}=e;return(0,n.jsxs)(v.xJ,{className:"col-span-6 flex flex-col gap-y-1",children:[(0,n.jsxs)(v.lX,{className:"flex items-center gap-x-4",children:[(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"Table"}),(0,n.jsxs)("p",{className:"text-foreground-light text-sm",children:[(0,n.jsx)("code",{className:"text-xs",children:"on"})," clause"]})]}),"database"===o&&(0,n.jsx)(v.NI,{children:(0,n.jsxs)(eP.J2,{open:d,onOpenChange:u,modal:!1,children:[(0,n.jsx)(eP.xo,{asChild:!0,children:(0,n.jsx)(_.z,{type:"default",className:"w-full [&>span]:w-full h-[38px] text-sm",iconRight:(0,n.jsx)(eL.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:(0,n.jsx)("div",{className:"w-full flex gap-1",children:(0,n.jsxs)("span",{className:"text-foreground",children:[t,".",s.value]})})})}),(0,n.jsx)(eP.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,n.jsxs)(eD.mY,{children:[(0,n.jsx)(eD.sZ,{placeholder:"Find a table..."}),(0,n.jsxs)(eD.e8,{children:[(0,n.jsx)(eD.rb,{children:"No tables found"}),(0,n.jsx)(eD.fu,{children:(0,n.jsx)(k.x,{className:(null!=m?m:[]).length>7?"h-[200px]":"",children:(null!=m?m:[]).map(e=>(0,n.jsx)(eD.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{r.setValue("table",e.name),u(!1)},onClick:()=>{r.setValue("table",e.name),u(!1)},children:(0,n.jsxs)("span",{className:"flex items-center gap-1.5",children:[s.value===e.name?(0,n.jsx)(ed.Z,{size:13}):"",e.name]})},e.id))})})]})]})})]})}),"realtime"===o&&(0,n.jsx)(v.NI,{children:(0,n.jsx)(G.I,{disabled:!0,value:"messages.realtime",className:"bg-control border-control"})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:r.control,name:"behavior",render:e=>{let{field:t}=e;return(0,n.jsxs)(v.xJ,{className:"col-span-6 flex flex-col gap-y-1",children:[(0,n.jsxs)(v.lX,{className:"flex items-center gap-x-4",children:[(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"Policy Behavior"}),(0,n.jsxs)("p",{className:"text-foreground-light text-sm",children:[(0,n.jsx)("code",{className:"text-xs",children:"as"})," clause"]})]}),(0,n.jsx)(v.NI,{children:(0,n.jsxs)(eF.Ph,{disabled:i,value:t.value,onValueChange:e=>r.setValue("behavior",e),children:[(0,n.jsx)(eF.i4,{className:"text-sm h-10 capitalize",children:t.value}),(0,n.jsx)(eF.Bw,{children:(0,n.jsxs)(eF.DI,{children:[(0,n.jsxs)(eF.Ql,{value:"permissive",className:"text-sm",children:[(0,n.jsx)("p",{children:"Permissive"}),(0,n.jsx)("p",{className:"text-foreground-light text-xs",children:'Policies are combined using the "OR" Boolean operator'})]}),(0,n.jsxs)(eF.Ql,{value:"restrictive",className:"text-sm",children:[(0,n.jsx)("p",{children:"Restrictive"}),(0,n.jsx)("p",{className:"text-foreground-light text-xs",children:'Policies are combined using the "AND" Boolean operator'})]})]})})]})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:r.control,name:"command",render:e=>{let{field:t}=e;return(0,n.jsxs)(v.xJ,{className:"col-span-12 flex flex-col gap-y-1",children:[(0,n.jsxs)(v.lX,{className:"flex items-center gap-x-4",children:[(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"Policy Command"}),(0,n.jsxs)("p",{className:"text-foreground-light text-sm",children:[(0,n.jsx)("code",{className:"text-xs",children:"for"})," clause"]})]}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(eI.Ee,{disabled:i,value:t.value,defaultValue:t.value,onValueChange:e=>{r.setValue("command",e),l(e)},className:"grid grid-cols-10 gap-3 ".concat(i?"opacity-50":""),children:["select","insert",..."database"===o?["update","delete","all"]:[]].map(e=>(0,n.jsx)(eI.kr,{value:e,disabled:i,label:e.toLocaleUpperCase(),className:"col-span-2 w-auto ".concat(i?"cursor-not-allowed":"")},e))})}),(0,n.jsx)(v.zG,{})]})}}),(0,n.jsx)(v.Wi,{control:r.control,name:"roles",render:e=>{var t;let{field:s}=e;return(0,n.jsxs)(v.xJ,{className:"col-span-12 flex flex-col gap-y-1",children:[(0,n.jsxs)(v.lX,{className:"flex items-center gap-x-4",children:[(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"Target Roles"}),(0,n.jsxs)("p",{className:"text-foreground-light text-sm",children:[(0,n.jsx)("code",{className:"text-xs",children:"to"})," clause"]})]}),(0,n.jsx)(v.NI,{children:(0,n.jsx)(eV.m,{options:p,value:0===s.value.length?[]:null===(t=s.value)||void 0===t?void 0:t.split(", "),placeholder:"Defaults to all (public) roles if none selected",searchPlaceholder:"Search for a role",onChange:e=>r.setValue("roles",e.join(", "))})}),(0,n.jsx)(v.zG,{})]})}})]})})})};var eM=s(68806),eW=s(750),eB=s(59769),eU=s(80435),eH=s(62614),eQ=s(43276),eY=s(15998),eX=s(89777),eG=s(61576);let eK=e=>{let{schema:t,table:s,selectedPolicy:a,selectedTemplate:i,onSelectTemplate:r}=e,[l,o]=(0,f.useState)(""),c="realtime"===t?(0,eG.b)():(0,eG.g)(t,s.length>0?s:"table_name"),d=void 0!==a?c.filter(e=>e.command===a.command):c,u=l.length>0?d.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())||e.command.toLowerCase().includes(l.toLowerCase())):d;return(0,n.jsxs)("div",{className:"h-full px-content py-content flex flex-col gap-3",children:[(0,n.jsx)("label",{className:"sr-only",htmlFor:"template-search",children:"Search templates"}),(0,n.jsx)(eW.Z,{size:"small",id:"template-search",icon:(0,n.jsx)(eM.Z,{size:16,className:"text-foreground-muted"}),placeholder:"Search templates",value:l,onChange:e=>o(e.target.value)}),l.length>0&&0===u.length&&(0,n.jsx)(eX.Z,{searchString:l,className:"min-w-full"}),(0,n.jsx)("div",{className:"flex flex-col gap-1.5",children:u.map(e=>(0,n.jsxs)(eB.zs,{openDelay:100,closeDelay:100,children:[(0,n.jsx)(eB.Yi,{children:(0,n.jsx)(eQ.Z,{title:e.name,titleClass:"text-sm",className:(0,b.cn)("transition w-full",e.id===i?"!border-stronger bg-surface-200 hover:!border-stronger":""),onClick:()=>r(e),hideChevron:!0,fixedHeight:!1,icon:(0,n.jsx)("div",{className:"min-w-16",children:(0,n.jsx)(el.C,{className:(0,b.cn)("!rounded font-mono","UPDATE"===e.command?"bg-blue-400 text-blue-900 border border-blue-800":""),variant:"ALL"===e.command?"outline":"SELECT"===e.command?"brand":"UPDATE"===e.command?"default":"DELETE"===e.command?"destructive":"warning",children:e.command})}),children:(0,n.jsx)(eU.U,{content:e.description,className:"[&>p]:m-0 space-y-2"})},e.id)}),(0,n.jsxs)(eB.bZ,{hideWhenDetached:!0,side:"left",align:"center",className:"w-[500px] flex",animate:"slide-in",children:[(0,n.jsx)(eH.Z,{showCopy:!1,className:"sql",parentClassName:"!p-0 [&>div>span]:text-xs",children:e.statement}),(0,n.jsx)(eY.Z,{iconOnly:!0,type:"default",className:"px-1 absolute top-1.5 right-1.5",text:e.statement})]})]},e.id))})]})};var e$=s(84792),eJ=s.n(e$),e0=s(87613),e1=s.n(e0),e2=s(95492),e5=e=>{var t,s,a,i;let{error:r,open:o,setOpen:c,onSelectDebug:d}=e,u=(0,E.bB)(),m=null!==(i=null===(t=null!==(a=null==r?void 0:null===(s=r.formattedError)||void 0===s?void 0:s.split("\n"))&&void 0!==a?a:[])||void 0===t?void 0:t.filter(e=>e.length>0))&&void 0!==i?i:[],h=(0,P.l)(),{data:x}=(0,A.G)({orgSlug:null==h?void 0:h.slug}),f=(0,q.$w)(x),g=(0,p.useRouter)(),j=(0,l.Mk)();return(0,n.jsxs)("div",{className:"flex flex-col gap-y-3 px-5",children:[(0,n.jsxs)(e2.bZ,{variant:"destructive",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsx)(e2.Cd,{className:"m-0",children:"Error running SQL query"}),(0,n.jsxs)(eC.zF,{defaultOpen:!0,className:"flex flex-col gap-3",open:o,onOpenChange:()=>c(!o),children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(eC.wy,{asChild:!0,children:(0,n.jsx)(_.z,{size:"tiny",type:"outline",className:(0,b.cn)("group",eJ()["ai-icon__container--allow-hover-effect"]),children:o?"Hide error details":"Show error details"})}),!f&&u&&(0,n.jsx)(_.z,{size:"tiny",type:"default",className:(0,b.cn)("group",eJ()["ai-icon__container--allow-hover-effect h-[21px] !py-0"]),onClick:()=>{d(),V.Z.sendEvent({category:"rls_editor",action:"ai_debugger_requested",label:"rls-ai-assistant"},j,g)},children:"Fix with Assistant"})]}),(0,n.jsx)(eC.Fw,{className:"overflow-auto",children:m.length>0?m.map((e,t)=>(0,n.jsx)("pre",{className:"font-mono text-xs whitespace-pre-wrap",children:e.split(" ").reduce((e,t)=>{let s=U()(e);return s&&"ERROR:"!==s?e1()(e).concat([[s,t].join(" ")]):""===s?e.concat([" "]):e.concat([t])},[]).map((e,t,s)=>(0,n.jsx)("span",{className:(0,b.cn)("break-all","ERROR:"===e&&"text-destructive"),children:e},t))},"error-".concat(t))):(0,n.jsx)("p",{className:"font-mono text-xs",children:r.error})})]})]})]}),(0,n.jsx)("div",{className:"overflow-x-auto"})]})},e4=s(79534),e3=s(49574),e9=e=>{let{id:t,defaultValue:s,wrapperClassName:a,className:i,value:r,placeholder:l,readOnly:o=!1,disableTabToUsePlaceholder:c=!1,lineNumberStart:d,onChange:u=et(),onMount:m=et(),editorRef:h,monacoRef:x}=e,p=(0,f.useRef)(),g=(0,e4.useMonaco)(),{project:j}=(0,ez.d2)(),v="monaco-placeholder-".concat(t),y=async(e,t)=>{h.current=e,void 0!==x&&(x.current=t),p.current=e.createContextKey("hasValue",!1);let s=document.getElementById(v);s&&void 0!==l&&0===(null!=r?r:"").trim().length&&(s.style.display="block"),c||e.addCommand(t.KeyCode.Tab,()=>{e.executeEdits("source",[{identifier:"add-placeholder",range:new t.Range(1,1,1,1),text:(null!=l?l:"").split("\n\n").join("\n").replaceAll("*","").replaceAll("&nbsp;","")}])},"!hasValue"),e.focus(),m()};async function _(e){try{return await (0,e3.x)({projectRef:null==j?void 0:j.ref,connectionString:null==j?void 0:j.connectionString,sql:e})}catch(t){return console.error("formatPgsql error:",t),e}}return(0,f.useEffect)(()=>{u()},[r]),(0,f.useEffect)(()=>{if(g){let e=g.languages.registerDocumentFormattingEditProvider("pgsql",{async provideDocumentFormattingEdits(e){let t=e.getValue(),s=await _(t);return[{range:e.getFullModelRange(),text:s.result.trim()}]}});return()=>{e.dispose()}}},[g]),(0,f.useEffect)(()=>{if(void 0!==r&&r.trim().length>0){let e=document.getElementById(v);e&&(e.style.display="none")}},[r]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e4.default,{path:t,theme:"supabase",wrapperProps:{className:(0,b.cn)(a)},className:(0,b.cn)(i,"monaco-editor"),value:null!=r?r:void 0,defaultLanguage:"pgsql",defaultValue:null!=s?s:void 0,options:{tabSize:2,fontSize:13,readOnly:o,minimap:{enabled:!1},wordWrap:"on",contextmenu:!0,lineNumbers:void 0!==d?e=>(e+d).toString():void 0,glyphMargin:void 0,lineNumbersMinChars:4,folding:void 0,scrollBeyondLastLine:!1},onMount:y,onChange:e=>{p.current.set((null!=e?e:"").length>0);let t=document.getElementById(v);t&&(e?t.style.display="none":t.style.display="block"),u()}}),void 0!==l&&(0,n.jsx)("div",{id:v,className:(0,b.cn)("monaco-placeholder absolute top-[0px] left-[57px] text-sm pointer-events-none font-mono tracking-tighter","[&>div>p]:text-foreground-lighter [&>div>p]:!m-0"),style:{display:"none"},children:(0,n.jsx)(eU.U,{content:l})})]})};let e8=x()(()=>Promise.resolve().then(s.bind(s,79534)).then(e=>{let{DiffEditor:t}=e;return t}),{loadableGenerated:{webpack:()=>[79534]},ssr:!1}),e7=(0,f.memo)(function(e){var t,s,o;let{visible:d,schema:h,searchString:x,selectedTable:M,selectedPolicy:W,onSelectCancel:B,authContext:U}=e,H=(0,p.useRouter)(),{ref:Q}=(0,l.UO)(),Y=(0,i.NL)(),X=(0,D.V)(),G=(0,P.l)(),K=(0,l.Mk)(),$=(0,E.bB)(),[J,ee]=(0,f.useState)(""),[et,es]=(0,f.useState)(""),[en,ea]=(0,f.useState)(),[ei,er]=(0,f.useState)(!1),el=(0,f.useRef)(null),eo=(0,f.useRef)(null),[ec,ed]=(0,f.useState)(1),[eu,em]=(0,f.useState)(0),eh=(0,f.useRef)(null),ex=(0,f.useRef)(null),[ep,e_]=(0,f.useState)(1),[eN,ew]=(0,f.useState)(0),[eC,ek]=(0,f.useState)((0,I.k$)()),[eS,eq]=(0,f.useState)("templates"),eL=(0,f.useRef)(null),ez=ej(W),eT=null!==(o=null==G?void 0:null===(t=G.opt_in_tags)||void 0===t?void 0:t.includes(F.PV.AI_SQL))&&void 0!==o&&o,[eA,eP]=(0,f.useState)(),[eD,eF]=(0,f.useState)(!0),[eI,eV]=(0,f.useState)(!1),[eM,eW]=(0,f.useState)(),[eB,eU]=(0,f.useState)([]),[eH,eQ]=(0,f.useState)(!1),[eY,eX]=(0,f.useState)(!0),[eG,e$]=(0,f.useState)(),[eJ,e0]=(0,f.useState)(!1),e1="rls-editor",e2=S.Ry({name:S.Z_().min(1,"Please provide a name"),table:S.Z_(),behavior:S.Z_(),command:S.Z_(),roles:S.Z_()}),e4={name:"",table:"",behavior:"permissive",command:"select",roles:""},e3=(0,g.cI)({mode:"onBlur",reValidateMode:"onBlur",resolver:(0,a.F)(e2),defaultValues:e4}),{data:e7}=(0,A.G)({orgSlug:null==G?void 0:G.slug}),e6=(0,q.$w)(e7),{data:te}=(0,z.u)({projectRef:null==X?void 0:X.ref,connectionString:null==X?void 0:X.connectionString},{enabled:!0,refetchOnWindowFocus:!1}),tt=null==te?void 0:te.map(e=>e.sql.trim()),{name:ts,table:tn,behavior:ta,command:ti,roles:tr}=e3.watch(),tl=["update","all"].includes(ti),to=void 0!==W&&ts!==W.name,{messages:tc,append:td,isLoading:tu}=(0,r.RJ)({id:eC,api:"".concat(F.GW,"/api/ai/sql/suggest"),body:{entityDefinitions:eT?tt:void 0,policyDefinition:void 0!==W?ev(W):void 0}}),tm=(0,f.useMemo)(()=>[...eB,...tc.map(e=>({...e,isDebug:!1}))].sort((e,t)=>{var s,n,a,i;return(null!==(a=null===(s=e.createdAt)||void 0===s?void 0:s.getTime())&&void 0!==a?a:0)-(null!==(i=null===(n=t.createdAt)||void 0===n?void 0:n.getTime())&&void 0!==i?i:0)||e.role.localeCompare(t.role)}),[tc,eB]),{mutate:th,isLoading:tx}=(0,T.r)({onSuccess:async()=>{await Y.invalidateQueries(L.R.list(Q)),j.ZP.success("Successfully created new policy"),B()},onError:e=>eP(e)}),{mutate:tp,isLoading:tf}=(0,R.k)({onSuccess:()=>{j.ZP.success("Successfully updated policy"),B()}}),{mutateAsync:tg,isLoading:tj}=(0,Z.V)(),tv=(0,f.useCallback)(async()=>{if(!eG||!eo.current||!eL.current)return;let e=eo.current.getModel(),t=eL.current.getModel();if(!e||!t)return;let s=t.modified.getValue();eo.current.executeEdits("apply-ai-edit",[{text:s,range:e.getFullModelRange()}]),e$(void 0)},[eG]),ty=()=>{var e,t,s,n;let a=(null!==(s=null===(e=eo.current)||void 0===e?void 0:e.getValue().trim())&&void 0!==s?s:null)||null,i=(null!==(n=null===(t=ex.current)||void 0===t?void 0:t.getValue().trim())&&void 0!==n?n:null)||null,r=void 0===W&&(ts.length>0||tr.length>0||a||i),l=void 0!==W&&eb(W,{name:ts,roles:0===tr.length?["public"]:tr.split(", "),definition:a,check:"INSERT"===ti?a:i});r||l||tm.length>0||!eY?e0(!0):B()},tb=async()=>{var e;let t=null===(e=eo.current)||void 0===e?void 0:e.getValue().replaceAll("\n"," ").replaceAll("  "," ");if(void 0===eA||void 0===t)return;eQ(!0);let s=(0,I.k$)();eU([...eB,eg({id:s,content:"Thinking...",isDebug:!0})]);let{solution:n,sql:a}=await tg({sql:t.trim(),errorMessage:eA.message,entityDefinitions:tt}),i=eg({id:s,content:"".concat(n,"\n```sql\n").concat(a,"\n```"),isDebug:!0});eU(u()([...eB,i],e=>e.id))},t_=e=>{var t,s,n,a;let i=null===(t=eo.current)||void 0===t?void 0:t.getModel();i&&(0===(null!==(n=null===(s=eo.current)||void 0===s?void 0:s.getValue())&&void 0!==n?n:"").length?null===(a=eo.current)||void 0===a||a.executeEdits("apply-template",[{text:e.content,range:i.getFullModelRange()}]):(eW(e.id),e$(e.content)))};return(0,f.useEffect)(()=>{if(d){if(eQ(!0),void 0!==W){let{name:e,action:t,table:s,command:n,roles:a}=W;e3.reset({name:e,table:s,behavior:t.toLowerCase(),command:n.toLowerCase(),roles:1===a.length&&"public"===a[0]?"":a.join(", ")}),W.definition&&ee("  ".concat(W.definition)),W.check&&es("  ".concat(W.check)),W.check&&"INSERT"!==W.command&&er(!0)}else void 0!==M&&e3.reset({...e4,table:M})}else{var e,t;null===(e=eo.current)||void 0===e||e.setValue(""),null===(t=ex.current)||void 0===t||t.setValue(""),e$(void 0),eQ(!1),e0(!1),eP(void 0),eU([]),ek((0,I.k$)()),eV(!1),eW(void 0),ee(""),es(""),er(!1),ea(void 0),e3.reset(e4)}},[d]),(0,f.useEffect)(()=>{var e;null===(e=eo.current)||void 0===e||e.layout({width:0,height:0}),window.requestAnimationFrame(()=>{var e;null===(e=eo.current)||void 0===e||e.layout()})},[eI,eA,eD]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.l0,{...e3,children:(0,n.jsx)("form",{id:e1,onSubmit:e3.handleSubmit(e=>{var t,s,n;let{name:a,table:i,behavior:r,command:l,roles:o}=e,d=null!==(n=null===(t=eo.current)||void 0===t?void 0:t.getValue().trim())&&void 0!==n?n:void 0,u=null===(s=ex.current)||void 0===s?void 0:s.getValue().trim();if("insert"===l&&(u=d),"insert"===l&&(void 0===u||0===u.length))return ea("Please provide a SQL expression for the WITH CHECK statement");if("insert"!==l&&(void 0===d||0===d.length))return ea("Please provide a SQL expression for the USING statement");if(ea(void 0),void 0===W){let e=ey({name:a,schema:h,table:i,behavior:r,command:l,roles:0===o.length?"public":o,using:null!=d?d:"",check:"insert"===l?null!=d?d:"":null!=u?u:""});eP(void 0),th({sql:e,projectRef:null==X?void 0:X.ref,connectionString:null==X?void 0:X.connectionString,handleError:e=>{throw e}})}else if(void 0!==X){let e={},t=0===o.length?["public"]:o.split(", ");if(a!==W.name&&(e.name=a),c()(W.roles,t)||(e.roles=t),null!==W.definition&&W.definition!==d&&(e.definition=d),"INSERT"===W.command?null!==W.check&&W.check!==d&&(e.check=d):null!==W.check&&W.check!==u&&(e.check=u),0===Object.keys(e).length)return B();tp({id:W.id,projectRef:X.ref,connectionString:null==X?void 0:X.connectionString,payload:e})}}),children:(0,n.jsx)(y.yo,{open:d,onOpenChange:()=>ty(),children:(0,n.jsxs)(y.ue,{showClose:!1,size:eH?"lg":"default",className:(0,b.cn)("bg-surface-200","p-0 flex flex-row gap-0",eH?"!min-w-[1200px]":"!min-w-[600px]"),children:[(0,n.jsxs)("div",{className:(0,b.cn)("flex flex-col grow w-full",eH&&"w-[60%]"),children:[(0,n.jsx)(eE,{selectedPolicy:W,assistantVisible:eH,setAssistantVisible:eQ}),(0,n.jsxs)("div",{className:"flex flex-col h-full w-full justify-between overflow-y-auto",children:[eG?(0,n.jsxs)("div",{className:"px-5 py-3 flex justify-between gap-3 bg-surface-75",children:[(0,n.jsxs)("div",{className:"flex gap-2 items-center text-foreground-light",children:[(0,n.jsx)(m.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"text-sm",children:"Accept changes from assistant"})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)(_.z,{type:"default",onClick:()=>{e$(void 0),eW(void 0),V.Z.sendEvent({category:"rls_editor",action:"ai_suggestion_discarded",label:"rls-ai-assistant"},K,H)},children:"Discard"}),(0,n.jsx)(_.z,{type:"primary",onClick:()=>{tv(),eW(void 0),V.Z.sendEvent({category:"rls_editor",action:"ai_suggestion_accepted",label:"rls-ai-assistant"},K,H)},children:"Accept"})]})]}):null,eG?(0,n.jsx)(e8,{theme:"supabase",language:"pgsql",className:"grow",original:null===(s=eo.current)||void 0===s?void 0:s.getValue(),modified:eG,onMount:e=>eL.current=e,options:{wordWrap:"on",renderSideBySide:!1,scrollBeyondLastLine:!1,renderOverviewRuler:!1,renderLineHighlight:"none",minimap:{enabled:!1},occurrencesHighlight:!1,folding:!1,selectionHighlight:!1,lineHeight:20,padding:{top:10,bottom:10}}}):null,$?(0,n.jsx)("div",{className:"relative h-full ".concat(eG?"hidden":"block"),children:(0,n.jsx)(e9,{id:"rls-sql-policy",defaultValue:"",placeholder:ez,editorRef:eo})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eO,{schema:h,searchString:x,selectedTable:M,isEditing:void 0!==W,form:e3,onUpdateCommand:e=>{ea(void 0),["update","all"].includes(e)||er(!1)},authContext:U}),(0,n.jsxs)("div",{className:"h-full",children:[(0,n.jsx)(eZ,{schema:h,selectedPolicy:W,editorOneRef:eo,editorTwoRef:ex,formFields:{name:ts,table:tn,behavior:ta,command:ti,roles:tr}}),(0,n.jsx)("div",{className:"mt-1 relative ".concat(eG?"hidden":"block"),style:{height:eu<=100?"".concat(8+eu,"px"):"108px"},children:(0,n.jsx)(e9,{disableTabToUsePlaceholder:!0,id:"rls-exp-one-editor",placeholder:"insert"===ti?"-- Provide a SQL expression for the with check statement":"-- Provide a SQL expression for the using statement",defaultValue:"insert"===ti?et:J,value:"insert"===ti?et:J,editorRef:eo,monacoRef:el,lineNumberStart:6,onChange:()=>{var e,t,s,n,a;em(null!==(n=null===(e=eo.current)||void 0===e?void 0:e.getContentHeight())&&void 0!==n?n:0),ed(null!==(a=null===(s=eo.current)||void 0===s?void 0:null===(t=s.getModel())||void 0===t?void 0:t.getLineCount())&&void 0!==a?a:1)},onMount:()=>{setTimeout(()=>{var e,t,s,n,a;em(null!==(n=null===(e=eo.current)||void 0===e?void 0:e.getContentHeight())&&void 0!==n?n:0),ed(null!==(a=null===(s=eo.current)||void 0===s?void 0:null===(t=s.getModel())||void 0===t?void 0:t.getLineCount())&&void 0!==a?a:1)},200)}})}),(0,n.jsx)("div",{className:"bg-surface-300 py-1",children:(0,n.jsxs)("div",{className:"flex items-center",style:{fontSize:"14px"},children:[(0,n.jsx)("div",{className:"w-[57px]",children:(0,n.jsx)("p",{className:"w-[31px] flex justify-end font-mono text-sm text-foreground-light select-none",children:7+ec})}),(0,n.jsx)("p",{className:"font-mono tracking-tighter",children:ei?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-[#569cd6]",children:"with check"})," ",(0,n.jsx)("span",{className:"text-[#ffd700]",children:"("})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-[#ffd700]",children:")"}),";"]})})]})}),ei&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mt-1 relative ".concat(eG?"hidden":"block"),style:{height:eN<=100?"".concat(8+eN,"px"):"108px"},children:(0,n.jsx)(e9,{disableTabToUsePlaceholder:!0,id:"rls-exp-two-editor",placeholder:"-- Provide a SQL expression for the with check statement",defaultValue:et,value:et,editorRef:ex,monacoRef:eh,lineNumberStart:7+ec,onChange:()=>{var e,t,s,n,a;ew(null!==(n=null===(e=ex.current)||void 0===e?void 0:e.getContentHeight())&&void 0!==n?n:0),e_(null!==(a=null===(s=ex.current)||void 0===s?void 0:null===(t=s.getModel())||void 0===t?void 0:t.getLineCount())&&void 0!==a?a:1)},onMount:()=>{setTimeout(()=>{var e,t,s,n,a;ew(null!==(n=null===(e=ex.current)||void 0===e?void 0:e.getContentHeight())&&void 0!==n?n:0),e_(null!==(a=null===(s=ex.current)||void 0===s?void 0:null===(t=s.getModel())||void 0===t?void 0:t.getLineCount())&&void 0!==a?a:1)},200)}})}),(0,n.jsx)("div",{className:"bg-surface-300 py-1",children:(0,n.jsxs)("div",{className:"flex items-center",style:{fontSize:"14px"},children:[(0,n.jsx)("div",{className:"w-[57px]",children:(0,n.jsx)("p",{className:"w-[31px] flex justify-end font-mono text-sm text-foreground-light select-none",children:8+ec+ep})}),(0,n.jsxs)("p",{className:"font-mono tracking-tighter",children:[(0,n.jsx)("span",{className:"text-[#ffd700]",children:")"}),";"]})]})})]}),to&&(0,n.jsx)(eR,{oldName:W.name,newName:ts,schema:h,table:tn,lineNumber:8+ec+(ei?ep:0)}),void 0!==en&&(0,n.jsx)("p",{className:"px-5 py-2 pb-0 text-sm text-red-900",children:en}),tl&&(0,n.jsxs)("div",{className:"px-5 py-3 flex items-center gap-x-2",children:[(0,n.jsx)(N.X,{id:"use-check",name:"use-check",checked:ei,onCheckedChange:()=>{ea(void 0),er(!ei)}}),(0,n.jsx)(w._,{className:"text-xs cursor-pointer",htmlFor:"use-check",children:"Use check expression"})]})]})]}),(0,n.jsxs)("div",{className:"flex flex-col",children:[void 0!==eA&&(0,n.jsx)(e5,{error:eA,onSelectDebug:()=>{eq("conversation"),tb()},open:eD,setOpen:eF}),(0,n.jsxs)(y.FF,{className:"flex items-center !justify-end px-5 py-4 w-full border-t",children:[(0,n.jsx)(_.z,{type:"default",disabled:tx||tf,onClick:()=>ty(),children:"Cancel"}),(0,n.jsx)(_.z,{form:e1,htmlType:"submit",loading:tx||tf,disabled:tx||tf||void 0!==eG,onClick:()=>{if($){var e;let t=null===(e=eo.current)||void 0===e?void 0:e.getValue().trim();if(!t)return B();th({sql:t,projectRef:null==X?void 0:X.ref,connectionString:null==X?void 0:X.connectionString,handleError:e=>{throw e}})}},children:"Save policy"})]})]})]})]}),eH&&(0,n.jsx)("div",{className:(0,b.cn)("border-l shadow-[rgba(0,0,0,0.13)_-4px_0px_6px_0px] z-10",eH&&"w-[50%]","bg-studio"),children:(0,n.jsxs)(C.mQ,{value:eS,defaultValue:"templates",className:"flex flex-col h-full w-full",children:[(0,n.jsxs)(C.dr,{className:"flex gap-4 px-content pt-2",children:[(0,n.jsx)(C.SP,{value:"templates",onClick:()=>eq("templates"),className:"px-0 data-[state=active]:bg-transparent",children:"Templates"},"templates"),$&&!e6&&(0,n.jsx)(C.SP,{value:"conversation",onClick:()=>eq("conversation"),className:"px-0 data-[state=active]:bg-transparent",children:"Assistant"},"conversation")]}),(0,n.jsx)(C.nU,{value:"templates",className:(0,b.cn)("!mt-0 overflow-y-auto","data-[state=active]:flex data-[state=active]:grow"),children:(0,n.jsx)(k.x,{className:"h-full w-full",children:(0,n.jsx)(eK,{schema:h,table:tn,selectedPolicy:W,selectedTemplate:eM,onSelectTemplate:e=>{if($)t_({id:e.id,content:e.statement});else{var t;e3.setValue("name",e.name),e3.setValue("behavior","permissive"),e3.setValue("command",e.command.toLowerCase()),e3.setValue("roles",null!==(t=e.roles.join(", "))&&void 0!==t?t:""),ee("  ".concat(e.definition)),es("  ".concat(e.check)),ed(1),e_(1),ea(void 0),["update","all"].includes(e.command.toLowerCase())&&e.check.length>0?er(!0):er(!1)}}})})}),(0,n.jsx)(C.nU,{value:"conversation",className:"flex grow !mt-0 overflow-y-auto",children:(0,n.jsx)(ef,{messages:tm,selectedMessage:eM,onSubmit:e=>td({content:e,role:"user",createdAt:new Date}),onDiff:t_,onChange:eX,loading:tu||tj})})]})})]})})})}),(0,n.jsx)(O.Z,{visible:eJ,title:"Discard changes",confirmLabel:"Discard",onCancel:()=>{e0(!1)},onConfirm:()=>{B(),e0(!1)},children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to close the editor? Any unsaved changes on your policy and conversations with the Assistant will be lost."})})]})});e7.displayName="AIPolicyEditorPanel"},50652:function(e,t,s){"use strict";s.d(t,{Z:function(){return W}});var n=s(52322),a=s(45455),i=s.n(a),r=s(66594),l=s(5632),o=s(2784),c=s(62202),d=s(99959),u=s(34291),m=s.n(u),h=s(95492),x=s(27570),p=s(37970),f=s(64306),g=s(49521),j=s(24990),v=s(59491),y=s(33635),b=s(87175),_=s(81076),N=s(34503),w=s(32079),C=s(23056),k=s(74559),S=s(62134),E=e=>{let{policy:t,onSelectEditPolicy:s=m(),onSelectDeletePolicy:a=m()}=e,i=(0,b.Xo)(v.KA.TENANT_SQL_ADMIN_WRITE,"policies"),{project:r}=(0,x.d2)(),{data:l}=(0,y.$E)({projectRef:null==r?void 0:r.ref}),o=(null==l?void 0:l.EXTERNAL_ANONYMOUS_USERS_ENABLED)&&(t.roles.includes("authenticated")||t.roles.includes("public"));return(0,n.jsxs)(f.Z.Content,{className:"flex border-overlay w-full space-x-4 border-b py-4 lg:items-center",children:[(0,n.jsxs)("div",{className:"flex grow flex-col space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("p",{className:"font-mono text-xs text-foreground-light",children:t.command}),(0,n.jsx)("p",{className:"text-sm text-foreground",children:t.name}),o?(0,n.jsx)(_.C,{color:"yellow",children:"Applies to anonymous users"}):null]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"Applied to:"}),t.roles.slice(0,3).map((e,t)=>(0,n.jsx)("code",{className:"text-foreground-light text-xs",children:e},"policy-".concat(e,"-").concat(t))),(0,n.jsxs)(j.fC,{delayDuration:0,children:[(0,n.jsx)(j.xz,{children:t.roles.length>3&&(0,n.jsxs)("code",{className:"text-foreground-light text-xs",children:["+ ",t.roles.length-3," more roles"]},"policy-etc")}),(0,n.jsx)(j.h_,{children:(0,n.jsxs)(j.VY,{side:"bottom",children:[(0,n.jsx)(j.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background max-w-[220px] text-center",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:t.roles.slice(3).join(", ")})})]})})]})]})]}),(0,n.jsx)("div",{children:i?(0,n.jsxs)(N.h_,{children:[(0,n.jsx)(N.$F,{asChild:!0,children:(0,n.jsx)(w.z,{type:"default",style:{paddingLeft:4,paddingRight:4},icon:(0,n.jsx)(C.Z,{})})}),(0,n.jsxs)(N.AW,{side:"bottom",align:"end",className:"w-40",children:[(0,n.jsxs)(N.Xi,{className:"space-x-2",onClick:()=>s(t),children:[(0,n.jsx)(k.Z,{size:14}),(0,n.jsx)("p",{children:"Edit policy"})]}),(0,n.jsx)(N.VD,{}),(0,n.jsxs)(N.Xi,{className:"space-x-2",onClick:()=>a(t),children:[(0,n.jsx)(S.Z,{size:14}),(0,n.jsx)("p",{children:"Delete policy"})]})]})]}):(0,n.jsxs)(j.fC,{delayDuration:0,children:[(0,n.jsx)(j.xz,{asChild:!0,children:(0,n.jsx)(w.z,{disabled:!0,type:"default",style:{paddingLeft:4,paddingRight:4},icon:(0,n.jsx)(C.Z,{})})}),!i&&(0,n.jsx)(j.h_,{children:(0,n.jsxs)(j.VY,{side:"left",children:[(0,n.jsx)(j.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to edit RLS policies"})})]})})]})})]})},q=s(16826),Z=s(39097),R=s.n(Z),L=s(63910),z=s(2322),T=e=>{let{table:t,isLocked:s,onSelectToggleRLS:a=m(),onSelectCreatePolicy:i}=e,{ref:r}=(0,l.useRouter)().query,o=(0,L.bB)(),c=(0,b.Xo)(v.KA.TENANT_SQL_ADMIN_WRITE,"tables"),d="realtime"===t.schema,u=d&&"messages"===t.name,h=d?!u:s;return(0,n.jsxs)("div",{id:t.id.toString(),className:"flex w-full items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex gap-x-4 text-left",children:[(0,n.jsx)(R(),{href:"/project/".concat(r,"/editor/").concat(t.id),children:(0,n.jsx)("h4",{className:"m-0",children:t.name})}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[h&&(0,n.jsx)(_.C,{children:(0,n.jsxs)("span",{className:"flex gap-2 items-center text-xs uppercase text-foreground-lighter",children:[(0,n.jsx)(q.Z,{size:12})," Locked"]})}),(0,n.jsx)(_.C,{variant:t.rls_enabled?"brand":"warning",children:t.rls_enabled?"Row Level Security enabled":"Row Level Security disabled"})]})]}),!h&&(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsxs)("div",{className:"flex flex-row justify-end gap-x-2",children:[u?null:(0,n.jsxs)(z.u,{delayDuration:0,children:[(0,n.jsx)(z.aJ,{asChild:!0,children:(0,n.jsx)(w.z,{type:"default",disabled:!c,onClick:()=>a(t),children:t.rls_enabled?"Disable RLS":"Enable RLS"})}),!c&&(0,n.jsxs)(z._v,{side:"bottom",children:[(0,n.jsx)(j.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to toggle RLS"})})]})]}),!o&&(0,n.jsx)(w.z,{type:"default",disabled:!c,onClick:()=>i(),children:"Create policy"})]})})]})},A=e=>{let{table:t,isLocked:s,onSelectToggleRLS:a=m(),onSelectCreatePolicy:i,onSelectEditPolicy:r=m(),onSelectDeletePolicy:l=m()}=e,{project:o}=(0,x.d2)(),{data:c}=(0,g.r)({projectRef:null==o?void 0:o.ref,connectionString:null==o?void 0:o.connectionString}),d=(null!=c?c:[]).filter(e=>e.schema===t.schema&&e.table===t.name).sort((e,t)=>e.name.localeCompare(t.name));return(0,n.jsxs)(f.Z,{className:"!m-0",title:(0,n.jsx)(T,{table:t,isLocked:s,onSelectToggleRLS:a,onSelectCreatePolicy:i}),children:[(!t.rls_enabled||0===d.length)&&(0,n.jsxs)("div",{className:"px-6 py-4 flex flex-col gap-y-3",children:[t.rls_enabled&&0===d.length&&(0,n.jsxs)(h.bZ,{children:[(0,n.jsx)(p.aN,{}),(0,n.jsx)(h.Cd,{children:"Row Level Security is enabled for this table, but no policies are set"}),(0,n.jsxs)(h.X,{children:["Select queries will return an"," ",(0,n.jsx)("span",{className:"text-foreground underline",children:"empty array"})," of results."]})]}),!t.rls_enabled&&(0,n.jsxs)(h.bZ,{variant:"warning",children:[(0,n.jsx)(p.aN,{}),(0,n.jsx)(h.Cd,{children:"Warning: Row Level Security is disabled. Your table is publicly readable and writable."}),(0,n.jsx)(h.X,{children:"Anyone with the project's anonymous key can modify or delete your data. Enable RLS and create access policies to keep your data secure."})]}),0===d.length&&(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"No policies created yet"})]}),null==d?void 0:d.map(e=>(0,n.jsx)(E,{policy:e,onSelectEditPolicy:r,onSelectDeletePolicy:l},e.id))]})},P=s(31362),D=s(41543),F=s(62029),I=s(61531),V=s(6499),O=s(92270),M=s(73831),W=e=>{let{schema:t,tables:s,hasTables:a,isLocked:u,onSelectCreatePolicy:m,onSelectEditPolicy:h}=e,p=(0,l.useRouter)(),{ref:f}=(0,d.UO)(),{project:g}=(0,x.d2)(),[j,v]=(0,o.useState)({}),[y,b]=(0,o.useState)({}),{mutate:_}=(0,O.V)({onError:e=>{c.ZP.error("Failed to toggle RLS: ".concat(e.message))},onSettled:()=>{w()}}),{mutate:N}=(0,V.l)({onSuccess:()=>{c.ZP.success("Successfully deleted policy!")},onSettled:()=>{w()}}),w=()=>{b({}),v({})},C=e=>{v(e)},k=e=>{h(e)},S=e=>{b(e)},E=async()=>{let e={id:j.id,rls_enabled:!j.rls_enabled};_({projectRef:null==g?void 0:g.ref,connectionString:null==g?void 0:g.connectionString,id:e.id,schema:j.schema,payload:e})},q=async()=>{if(!g)return console.error("Project is required");N({projectRef:g.ref,connectionString:g.connectionString,id:y.id})};return 0===s.length?(0,n.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,n.jsx)(F.Z,{size:"large",title:"Row-Level Security (RLS) Policies",ctaButtonLabel:"Create a table",infoButtonLabel:"What is RLS?",infoButtonUrl:"https://supabase.com/docs/guides/auth/row-level-security",onClickCta:()=>p.push("/project/".concat(f,"/editor")),children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(I.Z,{title:"What are policies?",icon:(0,n.jsx)(r.Z,{size:14,strokeWidth:2}),description:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm",children:"Policies restrict, on a per-user basis, which rows can be returned by normal queries, or inserted, updated, or deleted by data modification commands."}),(0,n.jsx)("p",{className:"text-sm",children:"This is also known as Row-Level Security (RLS). Each policy is attached to a table, and the policy is executed each time its accessed."})]})}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Create a table in this schema first before creating a policy."})]})})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-4 pb-4",children:[u&&(0,n.jsx)(P.Z,{schema:t,entity:"policies"}),s.length>0?s.map(e=>(0,n.jsx)("section",{children:(0,n.jsx)(A,{table:e,isLocked:"realtime"===t||u,onSelectToggleRLS:C,onSelectCreatePolicy:()=>m(e.name),onSelectEditPolicy:k,onSelectDeletePolicy:S})},e.id)):a?(0,n.jsx)(D.Z,{}):null]}),(0,n.jsx)(M.Z,{danger:!0,visible:!i()(y),title:"Confirm to delete policy",description:'This is permanent! Are you sure you want to delete the policy "'.concat(y.name,'"'),buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:w,onSelectConfirm:q}),(0,n.jsx)(M.Z,{danger:j.rls_enabled,visible:!i()(j),title:"Confirm to ".concat(j.rls_enabled?"disable":"enable"," Row Level Security"),description:"Are you sure you want to ".concat(j.rls_enabled?"disable":"enable",' Row Level Security for the table "').concat(j.name,'"?'),buttonLabel:"Confirm",buttonLoadingLabel:"Saving",onSelectCancel:w,onSelectConfirm:E})]})}},61576:function(e,t,s){"use strict";s.d(t,{b:function(){return a},g:function(){return n}});let n=(e,t)=>[{id:"policy-1",preview:!1,templateName:"Enable read access to everyone",description:"This policy gives read access to your table for all users via the SELECT operation.",statement:'\ncreate policy "Enable read access for all users"\non "'.concat(e,'"."').concat(t,'"\nfor select using (true);').trim(),name:"Enable read access for all users",definition:"true",check:"",command:"SELECT",roles:[]},{id:"policy-2",preview:!1,templateName:"Enable insert access for authenticated users only",description:"This policy gives insert access to your table for all authenticated users only.",statement:'\ncreate policy "Enable insert for authenticated users only"\non "'.concat(e,'"."').concat(t,'"\nfor insert to authenticated\nwith check (true);').trim(),name:"Enable insert for authenticated users only",definition:"",check:"true",command:"INSERT",roles:["authenticated"]},{id:"policy-3",preview:!1,templateName:"Enable update access for users based on their email *",description:'This policy assumes that your table has a column "email", and allows users to update rows which the "email" column matches their email.',statement:'\ncreate policy "Enable update for users based on email"\non "'.concat(e,'"."').concat(t,"\"\nfor update using (\n  (select auth.jwt()) ->> 'email' = email\n) with check (\n  (select auth.jwt()) ->> 'email' = email\n);").trim(),name:"Enable update for users based on email",definition:"(select auth.jwt()) ->> 'email' = email",check:"(select auth.jwt()) ->> 'email' = email",command:"UPDATE",roles:[]},{id:"policy-4",preview:!1,templateName:"Enable delete access for users based on their user ID *",description:'This policy assumes that your table has a column "user_id", and allows users to delete rows which the "user_id" column matches their ID',statement:'\ncreate policy "Enable delete for users based on user_id"\non "'.concat(e,'"."').concat(t,'"\nfor delete using (\n  (select auth.uid()) = user_id\n);').trim(),name:"Enable delete for users based on user_id",definition:"(select auth.uid()) = user_id",check:"",command:"DELETE",roles:[]},{id:"policy-5",preview:!1,templateName:"Enable insert access for users based on their user ID *",description:'This policy assumes that your table has a column "user_id", and allows users to insert rows which the "user_id" column matches their ID',statement:'\ncreate policy "Enable insert for users based on user_id"\non "'.concat(e,'"."').concat(t,'"\nfor insert with check (\n  (select auth.uid()) = user_id\n);').trim(),name:"Enable insert for users based on user_id",definition:"",check:"(select auth.uid()) = user_id",command:"INSERT",roles:[]},{id:"policy-6",preview:!0,name:"Policy with table joins",templateName:"Policy with table joins",description:"\nQuery across tables to build more advanced RLS rules\n\nAssuming 2 tables called `teams` and `members`, you can query both tables in the policy to control access to the members table.",statement:'\ncreate policy "Members can update team details if they belong to the team"\non teams for update using (\n  (select auth.uid()) in (\n    select user_id from members where team_id = id\n  )\n);\n'.trim(),definition:"(select auth.uid()) in (select user_id from members where team_id = id)",check:"",command:"UPDATE",roles:[]},{id:"policy-7",preview:!0,templateName:"Policy with security definer functions",description:"\nUseful in a many-to-many relationship where you want to restrict access to the linking table.\n\nAssuming 2 tables called `teams` and `members`, you can use a security definer function in combination with a policy to control access to the members table.".trim(),statement:'\ncreate or replace function get_teams_for_user(user_id uuid)\nreturns setof bigint as $$\n  select team_id from members where user_id = $1\n$$ stable language sql security definer;\n\ncreate policy "Team members can update team members if they belong to the team"\non members\nfor all using (\n  team_id in (select get_teams_for_user(auth.uid()))\n);\n'.trim(),name:"Policy with security definer functions",definition:"team_id in (select get_teams_for_user(auth.uid()))",check:"",command:"ALL",roles:[]},{id:"policy-8",preview:!0,name:"Policy to implement Time To Live (TTL)",templateName:"Policy to implement Time To Live (TTL)",description:"\nImplement a TTL-like feature that you see in Instagram stories or Snapchat where messages expire after a day.\n\nRows under the table are available only if they have been created within the last 24 hours.",statement:'\ncreate policy "Stories are live for a day"\non "'.concat(e,'"."').concat(t,"\"\nfor select using (\n  created_at > (current_timestamp - interval '1 day')\n);\n").trim(),definition:"created_at > (current_timestamp - interval '1 day')",check:"",command:"SELECT",roles:[]}],a=()=>[{id:"policy-broadcast-1",preview:!1,templateName:"Allow listening for broadcasts for authenticated users only",description:"This policy allows listening for broadcasts for authenticated users only.",statement:"\ncreate policy  \"Allow listening for broadcasts for authenticated users only\"\non realtime.messages for select\nto authenticated\nusing ( realtime.messages.extension = 'broadcast' );".trim(),name:"Allow listening for broadcasts for authenticated users only",definition:"realtime.messages.extension = 'broadcast'",check:"",command:"SELECT",roles:["authenticated"]},{id:"policy-broadcast-2",preview:!1,templateName:"Allow pushing broadcasts for authenticated users only",description:"This policy allows pushing broadcasts for authenticated users only.",statement:"\ncreate policy \"Allow pushing broadcasts for authenticated users only\"\nON realtime.messages for insert\nTO authenticated\nwith check ( realtime.messages.extension = 'broadcast' );".trim(),name:"Allow pushing broadcasts for authenticated users only",definition:"realtime.messages.extension = 'broadcast'",check:"realtime.messages.extension = 'broadcast'",command:"INSERT",roles:["authenticated"]},{id:"policy-broadcast-3",preview:!1,templateName:"Allow listening for broadcasts from a specific channel",description:"This policy allows listening for broadcasts from a specific channel.",statement:"\ncreate policy \"Allow listening for broadcasts from a specific channel\"\non realtime.messages for select\nusing ( realtime.messages.extension = 'broadcast' AND realtime.topic() = 'channel_name' );".trim(),name:"Allow listening for broadcasts from a specific channel",definition:"realtime.messages.extension = 'broadcast' AND realtime.topic() = 'channel_name'",check:"",command:"SELECT",roles:[]},{id:"policy-broadcast-4",preview:!1,templateName:"Allow pushing broadcasts to specific channel",description:"This policy allow pushing broadcasts to specific channel.",statement:"\ncreate policy \"Allow pushing broadcasts to specific channel\"\nON realtime.messages for insert\nwith check ( realtime.messages.extension = 'broadcast' AND realtime.topic() = 'channel_name' );".trim(),name:"Allow pushing broadcasts to specific channel",definition:"realtime.messages.extension = 'broadcast' AND realtime.topic() = 'channel_name'",check:"realtime.messages.extension = 'broadcast' AND realtime.topic() = 'channel_name'",command:"INSERT",roles:[]},{id:"policy-presences-1",preview:!1,templateName:"Allow listening for presences on all channels for authenticated users only",description:"This policy enables listening for presences on all channels for all authenticated users only.",statement:"\ncreate policy \"Allow listening for presences on all channels for authenticated users only\"\non realtime.messages for select\nto authenticated\nusing ( realtime.messages.extension = 'presence' );".trim(),name:"Allow listening for presences on all channels for authenticated users only",definition:"realtime.messages.extension = 'presence'",check:"",command:"SELECT",roles:["authenticated"]},{id:"policy-presences-2",preview:!1,templateName:"Allow broadcasting presences on all channels for authenticated users only",description:"This policy enables broadcasting presences on all channels for all authenticated users only.",statement:"\ncreate policy \"Allow broadcasting presences on all channels for authenticated users only\"\nON realtime.messages for insert\nTO authenticated\nwith check ( realtime.messages.extension = 'presence' );\n  ;".trim(),name:"Allow broadcasting presences on all channels for authenticated users only",definition:"realtime.messages.extension = 'presence'",check:"realtime.messages.extension = 'presence'",command:"INSERT",roles:["authenticated"]},{id:"policy-presences-3",preview:!1,templateName:"Allow listening for presences from a specific channel",description:"This policy enables listening for presences from a specific channel.",statement:"\ncreate policy \"Allow listening for presences from a specific channel\"\non realtime.messages for select\nusing ( realtime.messages.extension = 'presence' AND realtime.topic() = 'channel_name' );".trim(),name:"Allow listening for presences from a specific channel",definition:"realtime.messages.extension = 'presence' AND realtime.topic() = 'channel_name'",check:"",command:"SELECT",roles:[]},{id:"policy-presences-4",preview:!1,templateName:"Publish presence to a specific channel",description:"This policy allows publishing presence to a specific channel.",statement:"\ncreate policy \"Publish presence to a specific channel\"\nON realtime.messages for insert\nwith check ( realtime.messages.extension = 'presence' AND realtime.topic() = 'channel_name' );\n  ;".trim(),name:"Publish presence to a specific channel",definition:"realtime.messages.extension = 'presence' AND realtime.topic() = 'channel_name'",check:"realtime.messages.extension = 'presence' AND realtime.topic() = 'channel_name'",command:"INSERT",roles:[]}]},34750:function(e,t,s){"use strict";s.d(t,{$w:function(){return i},Gh:function(){return r},OP:function(){return a}});var n=s(99248);let a=e=>{let t=e.find(e=>"compute_instance"===e.type);return{computeInstance:t,pitr:e.find(e=>"pitr"===e.type),customDomain:e.find(e=>"custom_domain"===e.type),ipv4:e.find(e=>"ipv4"===e.type)}},i=e=>{var t;return!!n.Qy&&(null!==(t=null==e?void 0:e.addons)&&void 0!==t?t:[]).some(e=>"addon_security_hipaa"===e.supabase_prod_id)},r=e=>{if(!e)return e;switch(e){case"fly":return"Fly.io";case"aws":return"AWS";default:return e}}},31362:function(e,t,s){"use strict";s.d(t,{b:function(){return d}});var n=s(52322),a=s(2784),i=s(83690),r=s(32079),l=s(95492),o=s(39459),c=s(11354);let d=e=>{let{visible:t,onClose:s}=e;return(0,n.jsx)(i.Z,{size:"medium",visible:t,header:"Schemas managed by Supabase",customFooter:(0,n.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,n.jsx)(r.z,{type:"default",onClick:()=>s(),children:"Understood"})}),onCancel:()=>s(),children:(0,n.jsxs)(i.Z.Content,{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:c.F.map(e=>(0,n.jsx)("code",{className:"text-xs",children:e},e))}),(0,n.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,n.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]})})};t.Z=e=>{let{schema:t,entity:s}=e,[i,c]=(0,a.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.bZ,{children:[(0,n.jsx)(o.Z,{strokeWidth:2}),(0,n.jsxs)(l.Cd,{children:["Currently viewing ",s," from a protected schema"]}),(0,n.jsxs)(l.X,{children:[(0,n.jsxs)("p",{className:"mb-2",children:["The ",(0,n.jsx)("code",{className:"text-xs",children:t})," schema is managed by Supabase and is read-only through the dashboard."]}),(0,n.jsx)(r.z,{type:"default",size:"tiny",onClick:()=>c(!0),children:"Learn more"})]})]}),(0,n.jsx)(d,{visible:i,onClose:()=>c(!1)})]})}},41297:function(e,t,s){"use strict";s.d(t,{Z:function(){return j}});var n=s(52322),a=s(99959),i=s(5632),r=s(63910),l=s(34056),o=s(33635),c=s(3373),d=s(39097),u=s.n(d),m=s(95492),h=s(32079),x=s(45022),p=s(99248);let f=e=>[{title:"Manage",items:[{name:"Users",key:"users",url:"/project/".concat(e,"/auth/users"),items:[]}]},{title:"Configuration",items:[{name:"Policies",key:"policies",url:"/project/".concat(e,"/auth/policies"),items:[]},...p.Qy?[{name:"Providers",key:"providers",url:"/project/".concat(e,"/auth/providers"),items:[]},{name:"Rate Limits",key:"rate-limits",url:"/project/".concat(e,"/auth/rate-limits"),items:[]},{name:"Email Templates",key:"templates",url:"/project/".concat(e,"/auth/templates"),items:[]},{name:"URL Configuration",key:"url-configuration",url:"/project/".concat(e,"/auth/url-configuration"),items:[]},{name:"Hooks",key:"hooks",url:"/project/".concat(e,"/auth/hooks"),items:[],label:"BETA"}]:[]]}],g=()=>{let{ref:e="default"}=(0,a.UO)(),t=(0,r.ar)();(0,o.kM)({projectRef:e});let s=(0,i.useRouter)().pathname.split("/")[4];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Q,{page:s,menu:f(e)}),t&&(0,n.jsx)("div",{className:"px-3",children:(0,n.jsxs)(m.bZ,{children:[(0,n.jsx)(m.Cd,{className:"text-sm",children:"Column Privileges has been shifted"}),(0,n.jsxs)(m.X,{className:"text-xs",children:[(0,n.jsx)("p",{className:"mb-2",children:"It can now be found in the menu under the database section."}),(0,n.jsx)(h.z,{asChild:!0,type:"default",size:"tiny",children:(0,n.jsx)(u(),{href:"/project/".concat(e,"/database/column-privileges"),children:"Head over to Database"})})]})]})})]})};var j=(0,c.Q)(e=>{let{title:t,children:s}=e;return(0,n.jsx)(x.Z,{title:t||"Authentication",product:"Authentication",productMenu:(0,n.jsx)(g,{}),isBlocking:!1,children:(0,n.jsx)("main",{style:{maxHeight:"100vh"},className:"flex-1 overflow-y-auto",children:s})})})},41543:function(e,t,s){"use strict";var n=s(52322),a=s(38183),i=s(99248);t.Z=()=>(0,n.jsxs)("div",{className:"flex h-64 flex-col items-center justify-center",children:[(0,n.jsx)(a.Z,{src:"".concat(i.GW,"/img/no-search-results.svg"),preProcessor:e=>e.replace(/svg/,'svg className="mb-2 w-16 h-16 text-color-inherit"')}),(0,n.jsx)("p",{className:"w-64 text-center text-sm opacity-50",children:"Hmm, we couldn't find any results that match your query."})]})},62029:function(e,t,s){"use strict";var n=s(52322),a=s(24990),i=s(32079),r=s(32830);t.Z=e=>{let{title:t="",size:s="medium",children:l,ctaButtonLabel:o="",infoButtonLabel:c="",infoButtonUrl:d="",onClickCta:u=()=>{},loading:m=!1,disabled:h=!1,disabledMessage:x=""}=e,p=o&&u||d&&c;return(0,n.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,n.jsx)("div",{className:"flex space-x-4 rounded border bg-surface-100 p-6 shadow-md",children:(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsxs)("div",{className:"".concat("medium"===s?"w-80":"w-[400px]"," space-y-4"),children:[(0,n.jsx)("h5",{className:"text-foreground",children:t}),(0,n.jsx)("div",{className:"flex flex-col space-y-2 text-foreground-light",children:l}),p&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[o&&u&&(0,n.jsxs)(a.fC,{delayDuration:0,children:[(0,n.jsx)(a.xz,{asChild:!0,children:(0,n.jsx)(i.z,{type:"primary",onClick:u,loading:m,disabled:m||h,children:o})}),h&&x.length>0&&(0,n.jsx)(a.h_,{children:(0,n.jsxs)(a.VY,{side:"bottom",children:[(0,n.jsx)(a.Eh,{className:"radix-tooltip-arrow"}),(0,n.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,n.jsx)("span",{className:"text-xs text-foreground",children:x})})]})})]}),d&&c?(0,n.jsx)(i.z,{type:"default",icon:(0,n.jsx)(r.Z,{size:14,strokeWidth:1.5}),children:(0,n.jsx)("a",{target:"_blank",rel:"noreferrer",href:d,children:c})}):null]})]})})})})}},43276:function(e,t,s){"use strict";var n=s(52322),a=s(39097),i=s.n(a);s(2784);var r=s(84447),l=s(52905),o=s(54383);t.Z=e=>{let t,{title:s,description:a,children:c,footer:d,url:u="",linkHref:m="",imgUrl:h,imgAlt:x,icon:p,className:f,loading:g=!1,fixedHeight:j=!0,hideChevron:v=!1,titleClass:y="",...b}=e,_=u||m||b.onClick,N={};b.onClick?(t="button",N=b):m?(t=i(),N={href:m,...b}):u?(t="a",N={href:u,...b}):(t="div",N=b);let w=["group relative text-left","bg-surface-100","border border-surface","rounded-md p-5 flex flex-row","transition ease-in-out duration-150"];_&&(w=[...w,"cursor-pointer","hover:bg-surface-200","hover:border-control"]),j&&(w=[...w,"h-32"]);let C=e=>{let{children:t}=e;return(0,n.jsx)("div",{className:"mr-4 flex flex-col",children:t})},k=(0,n.jsxs)(n.Fragment,{children:[h&&(0,n.jsx)(C,{children:(0,n.jsx)("img",{className:" transition-all group-hover:scale-110 ",src:"".concat(h),alt:"".concat(x),width:"26"})}),p&&(0,n.jsx)(C,{children:p}),(0,n.jsxs)("div",{className:"flex h-full w-full flex-col space-y-2",children:["string"==typeof s?(0,n.jsx)("h5",{className:"text-foreground pr-5 ".concat(y),children:s}):s,(c||a)&&(0,n.jsxs)("div",{className:"flex w-full flex-1 flex-col",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:a}),(0,n.jsx)("div",{className:"w-full",children:c&&c})]}),d&&(0,n.jsx)("div",{className:"w-full !mt-auto",children:d})]}),_&&(0,n.jsx)("div",{className:" absolute right-4 top-4 text-foreground-lighter transition-all duration-200 group-hover:right-3 group-hover:text-foreground ",children:g?(0,n.jsx)(r.Z,{className:"animate-spin"}):v?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(l.Z,{})})]});return(0,n.jsx)(t,{...N,className:(0,o.cn)(w,f),children:k})}},15998:function(e,t,s){"use strict";var n=s(52322),a=s(82955),i=s(76141),r=s(7774),l=s(2784),o=s(32079);t.Z=e=>{let{text:t,iconOnly:s=!1,children:c,onClick:d,copyLabel:u="Copy",copiedLabel:m="Copied",...h}=e,[x,p]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(!x)return;let e=setTimeout(()=>p(!1),2e3);return()=>clearTimeout(e)},[x]),(0,n.jsx)(o.z,{onClick:e=>{p(!0),(0,a.vQ)(t),null==d||d(e)},icon:x?(0,n.jsx)(i.Z,{size:14,strokeWidth:2,className:"text-brand"}):(0,n.jsx)(r.Z,{size:14}),...h,children:!s&&(0,n.jsx)(n.Fragment,{children:null!=c?c:x?m:u})})}},61531:function(e,t,s){"use strict";var n=s(52322),a=s(39097),i=s.n(a),r=s(2784),l=s(84797),o=s(4582),c=s(32079),d=s(32830);t.Z=e=>{let{icon:t,title:s,description:a,url:u,urlLabel:m="Read more",defaultVisibility:h=!1,hideCollapse:x=!1,button:p,className:f="",block:g=!1}=e,[j,v]=(0,r.useState)(h);return(0,n.jsx)("div",{className:"".concat(g?"block w-full":"","\n      block w-full rounded border bg-surface-200 py-3 ").concat(f),children:(0,n.jsxs)("div",{className:"flex flex-col px-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[t&&(0,n.jsx)("span",{className:"text-foreground-lighter",children:t}),(0,n.jsx)("div",{className:"flex-grow",children:(0,n.jsx)("h5",{className:"text-sm text-foreground",children:s})})]}),a&&!x?(0,n.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>v(!j),children:j?(0,n.jsx)(l.Z,{size:14,strokeWidth:1.5}):(0,n.jsx)(o.Z,{size:14,strokeWidth:1.5})}):null]}),(a||u||p)&&(0,n.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(j?"mt-3":""),style:{maxHeight:j?500:0},children:[(0,n.jsx)("div",{className:"text-foreground-light text-sm",children:a}),u&&(0,n.jsx)("div",{children:(0,n.jsx)(c.z,{asChild:!0,type:"default",icon:(0,n.jsx)(d.Z,{}),children:(0,n.jsx)(i(),{href:u,target:"_blank",rel:"noreferrer",children:m})})}),p&&(0,n.jsx)("div",{children:p})]})]})})}},14782:function(e,t,s){"use strict";var n=s(52322),a=s(39459);t.Z=e=>{let{resourceText:t,isFullPage:s=!1}=e,i=()=>(0,n.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200",children:(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsx)(a.Z,{size:"large"})}),(0,n.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,n.jsx)("div",{children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return s?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)("div",{className:"w-[550px]",children:(0,n.jsx)(i,{})})}):(0,n.jsx)(i,{})}},89777:function(e,t,s){"use strict";var n=s(52322),a=s(54383),i=s(32079);t.Z=e=>{let{searchString:t,onResetFilter:s,className:r}=e;return(0,n.jsxs)("div",{className:(0,a.cn)("bg-surface-100 border border-default px-6 py-4 rounded flex items-center justify-between",r),children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',t,'" did not return any results']})]}),void 0!==s&&(0,n.jsx)(i.z,{type:"default",onClick:()=>s(),children:"Reset filter"})]})}},34056:function(e,t,s){"use strict";s.d(t,{Q:function(){return d}});var n=s(52322),a=s(3085),i=s(81076),r=s(39097),l=s.n(r),o=s(32079),c=e=>{let{name:t="",isActive:s,isExternal:r,icon:c,rightIcon:d,url:u="",target:m="_self",onClick:h,textClassName:x="",hoverText:p="",label:f}=e,g=(0,n.jsx)(a.ZP.Item,{icon:c,rounded:!0,active:s,onClick:h,children:(0,n.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,n.jsxs)("div",{title:p||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+x,children:[(0,n.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==f&&(0,n.jsx)(i.C,{variant:"warning",children:f})]}),d&&(0,n.jsx)("div",{children:d})]})});return u?r?(0,n.jsx)(o.z,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,n.jsx)(l(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,n.jsx)(l(),{href:u,className:"block",target:m,children:g}):g},d=e=>{let{page:t,menu:s}=e;return(0,n.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto",children:(0,n.jsx)(a.ZP,{type:"pills",children:s.map((e,r)=>(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"my-6 space-y-8",children:(0,n.jsxs)("div",{className:"mx-3",children:[(0,n.jsx)(a.ZP.Group,{title:e.title?(0,n.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,n.jsx)("span",{children:e.title}),e.isPreview&&(0,n.jsx)(i.C,{variant:"warning",children:"Not production ready"})]}):null}),(0,n.jsx)("div",{children:e.items.map(e=>(0,n.jsx)(c,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:t===e.key,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key))})]})}),r!==s.length-1&&(0,n.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},92286:function(e,t,s){"use strict";var n=s(52322),a=s(90038),i=s(76141),r=s(89404),l=s(2784),o=s(59491),c=s(27570),d=s(49650),u=s(87175),m=s(32079),h=s(95492),x=s(61786),p=s(90504),f=s(19869);t.Z=e=>{let{className:t,disabled:s=!1,size:g="tiny",showError:j=!0,selectedSchemaName:v,supportSelectAll:y=!1,excludedSchemas:b=[],onSelectSchema:_,onSelectCreateSchema:N}=e,[w,C]=(0,l.useState)(!1),k=(0,u.Xo)(o.KA.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:S}=(0,c.d2)(),{data:E,isLoading:q,isSuccess:Z,isError:R,error:L,refetch:z}=(0,d.Q)({projectRef:null==S?void 0:S.ref,connectionString:null==S?void 0:S.connectionString}),T=(E||[]).filter(e=>!b.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,n.jsxs)("div",{className:t,children:[q&&(0,n.jsx)(m.z,{type:"default",className:"justify-start",block:!0,size:g,loading:!0,children:"Loading schemas..."}),j&&R&&(0,n.jsxs)(h.bZ,{variant:"warning",className:"!px-3 !py-3",children:[(0,n.jsx)(h.Cd,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,n.jsxs)(h.X,{className:"text-xs mb-2 break-words",children:["Error: ",null==L?void 0:L.message]}),(0,n.jsx)(m.z,{type:"default",size:"tiny",onClick:()=>z(),children:"Reload schemas"})]}),Z&&(0,n.jsxs)(x.J2,{open:w,onOpenChange:C,modal:!1,children:[(0,n.jsx)(x.xo,{asChild:!0,children:(0,n.jsx)(m.z,{size:g,disabled:s,type:"default",className:"w-full [&>span]:w-full",iconRight:(0,n.jsx)(a.Z,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:(0,n.jsxs)("div",{className:"w-full flex gap-1",children:[(0,n.jsx)("p",{className:"text-foreground-lighter",children:"schema:"}),(0,n.jsx)("p",{className:"text-foreground",children:"*"===v?"All schemas":v})]})})}),(0,n.jsx)(x.yk,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,children:(0,n.jsxs)(p.mY,{children:[(0,n.jsx)(p.sZ,{placeholder:"Find schema..."}),(0,n.jsxs)(p.e8,{children:[(0,n.jsx)(p.rb,{children:"No schemas found"}),(0,n.jsx)(p.fu,{children:(0,n.jsxs)(f.x,{className:(T||[]).length>7?"h-[210px]":"",children:[y&&(0,n.jsxs)(p.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{_("*"),C(!1)},onClick:()=>{_("*"),C(!1)},children:[(0,n.jsx)("span",{children:"All schemas"}),"*"===v&&(0,n.jsx)(i.Z,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==T?void 0:T.map(e=>(0,n.jsxs)(p.di,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{_(e.name),C(!1)},onClick:()=>{_(e.name),C(!1)},children:[(0,n.jsx)("span",{children:e.name}),v===e.name&&(0,n.jsx)(i.Z,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==N&&k&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.zz,{}),(0,n.jsx)(p.fu,{children:(0,n.jsxs)(p.di,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{N(),C(!1)},onClick:()=>{N(),C(!1)},children:[(0,n.jsx)(r.Z,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},8334:function(e,t,s){"use strict";s.d(t,{V:function(){return o}});var n=s(48228),a=s(62202),i=s(88354),r=s(99248);async function l(e){let{errorMessage:t,sql:s,entityDefinitions:n}=e,a=await (0,i.v_)(r.GW+"/api/ai/sql/debug",{errorMessage:t,sql:s,entityDefinitions:n});if(!(0,i.d8)(a))throw a.error;return a}let o=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.D)(e=>l(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?a.ZP.error("Failed to debug SQL: ".concat(e.message)):t(e,s,n)},...s})}},33635:function(e,t,s){"use strict";s.d(t,{$E:function(){return c},h8:function(){return o},kM:function(){return d}});var n=s(36492),a=s(85945),i=s(31696),r=s(2784),l=s(7161);async function o(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:a}=await (0,i.U2)("/platform/auth/{ref}/config",{params:{path:{ref:s}},signal:t});return a&&(0,i.S3)(a),n}let c=function(e){let{projectRef:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(l.o.authConfig(t),e=>{let{signal:s}=e;return o({projectRef:t},s)},{enabled:s&&void 0!==t,...a})},d=e=>{let{projectRef:t}=e,s=(0,a.NL)();return(0,r.useCallback)(()=>{t&&s.prefetchQuery(l.o.authConfig(t),e=>{let{signal:s}=e;return o({projectRef:t},s)})},[s,t])}},7161:function(e,t,s){"use strict";s.d(t,{o:function(){return n}});let n={users:(e,t)=>["auth",e,"users",...t?[t]:[]],authConfig:e=>["auth",e,"config"],accessToken:()=>["access-token"]}},49521:function(e,t,s){"use strict";s.d(t,{r:function(){return l}});var n=s(36492),a=s(31696),i=s(11596);async function r(e,t){let{projectRef:s,connectionString:n,schema:i}=e;if(!s)throw Error("projectRef is required");let r=new Headers;n&&r.set("x-connection-encrypted",n);let{data:l,error:o}=await (0,a.U2)("/platform/pg-meta/{ref}/policies",{params:{header:{"x-connection-encrypted":n},path:{ref:s},query:{included_schemas:i||"",excluded_schemas:""}},headers:r,signal:t});return o&&(0,a.S3)(o),l}let l=function(e){let{projectRef:t,connectionString:s,schema:a}=e,{enabled:l=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(i.R.list(t,a),e=>{let{signal:n}=e;return r({projectRef:t,connectionString:s,schema:a},n)},{enabled:l&&void 0!==t,...o})}},6499:function(e,t,s){"use strict";s.d(t,{l:function(){return c}});var n=s(85945),a=s(48228),i=s(62202),r=s(31696),l=s(11596);async function o(e){let{projectRef:t,connectionString:s,id:n}=e,a=new Headers;s&&a.set("x-connection-encrypted",s);let{data:i,error:l}=await (0,r.IV)("/platform/pg-meta/{ref}/policies",{params:{header:{"x-connection-encrypted":s},path:{ref:t},query:{id:n}},headers:a});return l&&(0,r.S3)(l),i}let c=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,n.NL)();return(0,a.D)(e=>o(e),{async onSuccess(t,s,n){let{projectRef:a}=s;await r.invalidateQueries(l.R.list(a)),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?i.Am.error("Failed to delete database policy: ".concat(e.message)):t(e,s,n)},...s})}},20560:function(e,t,s){"use strict";s.d(t,{k:function(){return c}});var n=s(85945),a=s(48228),i=s(62202),r=s(31696),l=s(11596);async function o(e){let{projectRef:t,connectionString:s,id:n,payload:a}=e,i=new Headers;s&&i.set("x-connection-encrypted",s);let{data:l,error:o}=await (0,r.r$)("/platform/pg-meta/{ref}/policies",{params:{header:{"x-connection-encrypted":s},path:{ref:t},query:{id:n}},body:a,headers:i});return o&&(0,r.S3)(o),l}let c=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,n.NL)();return(0,a.D)(e=>o(e),{async onSuccess(t,s,n){let{projectRef:a}=s;await r.invalidateQueries(l.R.list(a)),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?i.Am.error("Failed to update database policy: ".concat(e.message)):t(e,s,n)},...s})}},11596:function(e,t,s){"use strict";s.d(t,{R:function(){return n}});let n={list:(e,t)=>["projects",e,"database-policies",t].filter(Boolean)}},45997:function(e,t,s){"use strict";s.d(t,{f:function(){return o},x:function(){return l}});var n=s(98402),a=s(18592),i=s(18545);let r=n.Z.roles.list(),l=function(e){let{projectRef:t,connectionString:s}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.cp)({projectRef:t,connectionString:s,sql:r.sql,queryKey:["roles","list"]},{select:e=>e.result,...n})};function o(e,t){return e.invalidateQueries(i.M.query(t,["roles","list"]))}},49650:function(e,t,s){"use strict";s.d(t,{Q:function(){return l},X:function(){return o}});var n=s(98402),a=s(18592),i=s(18545);let r=n.Z.schemas.list(),l=function(e){let{projectRef:t,connectionString:s}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.cp)({projectRef:t,connectionString:s,sql:r.sql,queryKey:["schemas","list"]},{select:e=>e.result,...n})};function o(e,t){return e.invalidateQueries(i.M.query(t,["schemas","list"]))}},93276:function(e,t,s){"use strict";s.d(t,{X:function(){return n}});let n={lint:e=>["projects",e,"lint"]}},30120:function(e,t,s){"use strict";s.d(t,{r:function(){return r}});var n=s(62202),a=s(48228),i=s(18592);let r=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.D)(e=>(0,i.Rj)(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?n.Am.error("Failed to execute SQL: ".concat(e.message)):t(e,s,a)},...s})}},49574:function(e,t,s){"use strict";s.d(t,{X:function(){return l},x:function(){return r}});var n=s(48228),a=s(88354),i=s(99248);async function r(e,t){let{projectRef:s,connectionString:n,sql:r}=e,l=new Headers;n&&l.set("x-connection-encrypted",n);let o=await (0,a.v_)("".concat(i.T5,"/pg-meta/").concat(s,"/query/format"),{query:r},{headers:Object.fromEntries(l),signal:t});if(o.error)throw o.error;return{result:o}}let l=function(){let{onSuccess:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.D)(e=>r(e),{async onSuccess(t,s,n){await (null==e?void 0:e(t,s,n))},...t})}},29573:function(e,t,s){"use strict";s.d(t,{W:function(){return n}});let n={list:(e,t,s)=>["projects",e,"tables",t,s].filter(Boolean),table:(e,t)=>["projects",e,"tables",t]}},92270:function(e,t,s){"use strict";s.d(t,{T:function(){return c},V:function(){return d}});var n=s(85945),a=s(48228),i=s(62202),r=s(31696),l=s(29573),o=s(93276);async function c(e){let{projectRef:t,connectionString:s,id:n,payload:a}=e,i=new Headers;s&&i.set("x-connection-encrypted",s);let{data:l,error:o}=await (0,r.r$)("/platform/pg-meta/{ref}/tables",{params:{header:{"x-connection-encrypted":s},path:{ref:t},query:{id:n}},body:a,headers:i});return o&&(0,r.S3)(o),l}let d=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,n.NL)();return(0,a.D)(e=>c(e),{async onSuccess(t,s,n){let{projectRef:a,schema:i,id:c}=s;await Promise.all([r.invalidateQueries(l.W.list(a,i)),r.invalidateQueries(l.W.table(a,c)),r.invalidateQueries(o.X.lint(a))]),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?i.Am.error("Failed to update database table: ".concat(e.message)):t(e,s,n)},...s})}},57924:function(e,t,s){"use strict";s.d(t,{AF:function(){return m},Bj:function(){return u},Lk:function(){return d}});var n=s(36492),a=s(85945),i=s(829),r=s.n(i),l=s(2784),o=s(31696),c=s(29573);async function d(e,t){let{projectRef:s,connectionString:n,schema:a,includeColumns:i=!1,sortByProperty:l="name"}=e;if(!s)throw Error("projectRef is required");let c=new Headers;n&&c.set("x-connection-encrypted",n);let d={include_columns:"".concat(i)};a&&(d.included_schemas=a);let{data:u,error:m}=await (0,o.U2)("/platform/pg-meta/{ref}/tables",{params:{header:{"x-connection-encrypted":n},path:{ref:s},query:d},headers:c,signal:t});return(!Array.isArray(u)&&m&&(0,o.S3)(m),Array.isArray(u)&&l)?r()(u,e=>e[l]):u}let u=function(e){let{projectRef:t,connectionString:s,schema:a,includeColumns:i}=e,{enabled:r=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.a)(c.W.list(t,a,i),e=>{let{signal:n}=e;return d({projectRef:t,connectionString:s,schema:a,includeColumns:i},n)},{enabled:r&&void 0!==t,staleTime:0,...l})};function m(e){let{projectRef:t,connectionString:s}=e,n=(0,a.NL)();return(0,l.useCallback)((e,a)=>n.fetchQuery({queryKey:c.W.list(t,e,a),queryFn:n=>{let{signal:i}=n;return d({projectRef:t,connectionString:s,schema:e,includeColumns:a},i)}}),[s,t,n])}},58870:function(e,t,s){"use strict";s.d(t,{x:function(){return i}});var n=s(5632),a=s(2784);function i(){let{replace:e=!0,arrayKeys:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=JSON.stringify(t),i=(0,a.useMemo)(()=>new Set(t),[s]),r=(0,n.useRouter)(),l=(0,a.useMemo)(()=>Object.fromEntries(Object.entries(r.query).map(e=>{let[t,s]=e;return i.has(t)?Array.isArray(s)?[t,s]:[t,[s]]:[t,s]})),[i,r.query]),o=(0,a.useCallback)(t=>{let s="function"==typeof t?t(l):t,n=Object.fromEntries(Object.entries({...l,...s}).filter(e=>{let[,t]=e;return!!t}));(e?r.replace:r.push)({pathname:r.pathname,query:n},void 0,{shallow:!0,scroll:!1})},[r,l,e]);return[l,o]}},11354:function(e,t,s){"use strict";s.d(t,{F:function(){return n},U:function(){return a}});let n=["auth","cron","extensions","information_schema","net","pgsodium","pgsodium_masks","pgbouncer","pgtle","realtime","storage","supabase_functions","supabase_migrations","vault","graphql","graphql_public"],a=n.filter(e=>"extensions"!==e)},29288:function(e,t,s){"use strict";s.r(t);var n=s(52322),a=s(59491),i=s(96795),r=s.n(i),l=s(68806),o=s(17172),c=s(2784),d=s(63910),u=s(43899),m=s(50652),h=s(41297),x=s(27570),p=s(56006),f=s(14782),g=s(92286),j=s(41679),v=s(49521),y=s(49650),b=s(57924),_=s(87175),N=s(58870),w=s(11354),C=s(750),k=s(32079),S=s(2322);let E=(e,t,s)=>{if(!s)return e.slice().sort((e,t)=>e.name.localeCompare(t.name));{let n=s.toLowerCase(),a=e=>e.toLowerCase().includes(n),i=t.filter(e=>a(e.name));return e.slice().filter(e=>e.name.toLowerCase().includes(n)||e.id.toString()===n||i.some(t=>t.table===e.name)).sort((e,t)=>e.name.localeCompare(t.name))}},q=()=>{let[e,t]=(0,N.x)(),{schema:s="public",search:i=""}=e,{project:h}=(0,x.d2)(),q=(0,d.bB)(),[Z,R]=(0,c.useState)(),[L,z]=(0,c.useState)(!1),[T,A]=(0,c.useState)(),{data:P}=(0,y.Q)({projectRef:null==h?void 0:h.ref,connectionString:null==h?void 0:h.connectionString}),[D]=r()(P,e=>{var t;return(null==e?void 0:e.name)!=="realtime"&&w.F.includes(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"")}),F=null==P?void 0:P.find(e=>e.name===s),I=D.some(e=>e.id===(null==F?void 0:F.id)),{data:V}=(0,v.r)({projectRef:null==h?void 0:h.ref,connectionString:null==h?void 0:h.connectionString}),{data:O,isLoading:M,isSuccess:W,isError:B,error:U}=(0,b.Bj)({projectRef:null==h?void 0:h.ref,connectionString:null==h?void 0:h.connectionString,schema:s}),H=E(null!=O?O:[],null!=V?V:[],i),Q=(0,_.Xo)(a.KA.TENANT_SQL_ADMIN_READ,"policies"),Y=(0,_.Xo)(a.KA.TENANT_SQL_ADMIN_WRITE,"policies"),X=(0,_.N4)(),G=0===(null!=O?O:[]).length;return X&&!Q?(0,n.jsx)(f.Z,{isFullPage:!0,resourceText:"view this project's RLS policies"}):(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(g.Z,{className:"w-[260px]",size:"small",showError:!1,selectedSchemaName:s,onSelectSchema:s=>{t({...e,search:void 0,schema:s})}}),(0,n.jsx)(C.Z,{size:"small",placeholder:"Filter tables and policies",className:"block w-64 text-sm placeholder-border-muted",value:i||"",onChange:s=>{let n=s.target.value;t({...e,search:""===n?void 0:n})},icon:(0,n.jsx)(l.Z,{size:14})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(k.z,{type:"default",icon:(0,n.jsx)(o.Z,{size:14,strokeWidth:1.5}),asChild:!0,children:(0,n.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/learn/auth-deep-dive/auth-row-level-security",children:"Documentation"})}),q&&(0,n.jsxs)(S.u,{children:[(0,n.jsx)(S.aJ,{asChild:!0,children:(0,n.jsx)(k.z,{type:"primary",disabled:!Y||G,onClick:()=>z(!0),children:"Create a new policy"})}),(!Y||G)&&(0,n.jsx)(S._v,{side:"bottom",children:Y?G?"No table in schema ".concat(s," to create policies on"):null:"You need additional permissions to create RLS policies"})]})]})]})}),M&&(0,n.jsx)(j.A,{}),B&&(0,n.jsx)(p.Z,{error:U,subject:"Failed to retrieve tables"}),W&&(0,n.jsx)(m.Z,{schema:s,tables:H,hasTables:O.length>0,isLocked:I,onSelectCreatePolicy:e=>{z(!0),R(e)},onSelectEditPolicy:e=>{A(e),z(!0)}}),(0,n.jsx)(u.t,{visible:L,schema:s,searchString:i,selectedTable:Z,selectedPolicy:T,onSelectCancel:()=>{R(void 0),z(!1),A(void 0)},authContext:"database"})]})};q.getLayout=e=>(0,n.jsx)(h.Z,{title:"Auth",children:(0,n.jsx)("div",{className:"h-full p-4",children:e})}),t.default=q},7803:function(e,t,s){"use strict";s.d(t,{g:function(){return r},p:function(){return i}});var n=s(52322),a=s(54849);let i=e=>{let{className:t}=e;return(0,n.jsx)(a.c,{className:t,allowHoverEffect:!0})},r=e=>{let{loading:t=!1}=e;return(0,n.jsx)(a.c,{className:"ml-0.5",loading:t,allowHoverEffect:!0})}},74138:function(e,t,s){"use strict";var n=s(52322),a=s(2784),i=s(41909),r=s(54383),l=s(32079),o=s(71550);let c=(0,a.forwardRef)((e,t)=>{let{title:s,size:c="small",visible:d,onCancel:u,onConfirm:m,loading:h=!1,cancelLabel:x="Cancel",confirmLabel:p="Submit",confirmLabelLoading:f,alert:g,children:j,variant:v="default",disabled:y,...b}=e;(0,a.useEffect)(()=>{d&&N(!1)},[d]),(0,a.useEffect)(()=>{N(h)},[h]);let[_,N]=(0,a.useState)(!1);return(0,n.jsx)(i.Vq,{open:d,...b,onOpenChange:()=>{d&&u()},children:(0,n.jsxs)(i.cZ,{ref:t,className:"p-0 gap-0 pb-5 !block",size:c,children:[(0,n.jsx)(i.fK,{className:(0,r.cn)("border-b"),padding:"small",children:(0,n.jsx)(i.$N,{className:"",children:s})}),g&&(0,n.jsx)(o.J,{type:v,label:g.title,description:g.description,className:"border-r-0 border-l-0 rounded-none -mt-px [&_svg]:ml-0.5 mb-0",...null==g?void 0:g.base}),j&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.VO,{padding:"small",children:j}),(0,n.jsx)(i.P3,{})]}),(0,n.jsxs)("div",{className:"flex gap-2 px-5 pt-5",children:[(0,n.jsx)(l.z,{size:"medium",block:!0,type:"default",disabled:_,onClick:()=>u(),children:x}),(0,n.jsx)(l.z,{block:!0,size:"medium",type:"destructive"===v?"danger":"warning"===v?"warning":"primary",htmlType:"submit",loading:_,disabled:_||y,onClick:e=>{e.preventDefault(),e.stopPropagation(),N(!0),m()},className:"truncate",children:p})]})]})})});c.displayName="ConfirmationModal",t.Z=c},56937:function(e,t,s){"use strict";s.d(t,{H:function(){return i},a:function(){return r}});var n=s(52322),a=s(53738);let i=e=>{let{name:t}=e;return(0,n.jsx)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex cursor-not-allowed items-center space-x-2 rounded bg-gray-600 py-0.5 px-2 text-sm",children:(0,n.jsx)("span",{className:"opacity-50",children:t})})},r=e=>{let{name:t,handleRemove:s}=e;return(0,n.jsxs)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex items-center space-x-2 rounded bg-surface-300 py-0.5 px-2 text-sm",onClick:e=>e.preventDefault(),children:[(0,n.jsx)("span",{children:t}),(0,n.jsx)(a.Z,{size:12,className:"cursor-pointer opacity-50 transition hover:opacity-100",onClick:e=>{e.preventDefault(),e.stopPropagation(),s()}})]})}},2746:function(e,t,s){"use strict";s.d(t,{m:function(){return f}});var n=s(52322),a=s(34498),i=s.n(a),r=s(67304),l=s.n(r),o=s(78232),c=s(76141),d=s(2784),u=s(61786),m=s(54383),h=s(90504),x=s(19869),p=s(56937);let f=e=>{let{options:t,value:s,placeholder:a,searchPlaceholder:r="Search for option",disabled:f=!1,onChange:g=()=>{}}=e,[j,v]=(0,d.useState)(!1),[y,b]=(0,d.useState)(s||[]),_=s||y,N=i()(t,["disabled"],["desc"]),w=e=>void 0!==(_||[]).find(t=>t===e.value),C=e=>{let s=w(e)?[...l()(_,e.value)]:[..._.concat([e.value])],n=t.filter(e=>e.disabled).map(e=>e.name),a=[...new Set(s.concat(n))];b(a),g(a)};return(0,n.jsx)("div",{className:f?"pointer-events-none opacity-50":"",children:(0,n.jsxs)(u.J2,{open:j,onOpenChange:v,modal:!1,children:[(0,n.jsx)(u.xo,{asChild:!0,children:(0,n.jsxs)("div",{className:(0,m.cn)("relative border border-strong bg-control rounded","flex w-full flex-wrap items-start gap-1.5 p-1.5 cursor-pointer","".concat(0===_.length?"h-9":"")),onClick:()=>v(!0),children:[0===_.length&&a&&(0,n.jsx)("div",{className:"px-2 text-sm text-foreground-light h-full flex items-center",children:a}),_.map((e,t)=>{var s;let a="".concat(e,"-").concat(t),i=N.find(t=>t.value===e),r=null!==(s=null==i?void 0:i.disabled)&&void 0!==s&&s;return i?r?(0,n.jsx)(p.H,{name:i.name},a):(0,n.jsx)(p.a,{name:i.name,handleRemove:()=>C(i)},a):(0,n.jsx)(n.Fragment,{})}),(0,n.jsx)("div",{className:"absolute inset-y-0 right-0 pl-3 pr-2 flex space-x-1 items-center cursor-pointer ",children:(0,n.jsx)(o.Z,{size:16,strokeWidth:2,className:"text-foreground-lighter"})})]})}),(0,n.jsx)(u.yk,{className:"p-0 w-96 border-strong",side:"bottom",align:"start",children:(0,n.jsxs)(h.mY,{children:[(0,n.jsx)(h.sZ,{placeholder:r}),(0,n.jsxs)(h.e8,{children:[(0,n.jsx)(h.rb,{children:"No options found"}),(0,n.jsx)(h.fu,{children:(0,n.jsx)(x.x,{className:(0,m.cn)(N.length>7?"h-[210px]":""),children:null==N?void 0:N.map(e=>{let t=!!(_&&_.find(t=>t===e.value));return(0,n.jsx)(h.di,{value:e.value,className:"cursor-pointer w-full",onClick:()=>C(e),onSelect:()=>C(e),children:(0,n.jsxs)("div",{className:"w-full flex items-center justify-between",children:[e.name,t&&(0,n.jsx)(c.Z,{size:14})]})},e.id)})})})]})]})})]})})}},71550:function(e,t,s){"use strict";s.d(t,{J:function(){return h}});var n=s(52322),a=s(10929),i=s(2784),r=s(54383),l=s(95492);let o={note:"default",tip:"default",caution:"warning",danger:"destructive",deprecation:"warning",default:"default",warning:"warning",destructive:"destructive"},c=()=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 21 20",className:"w-6 h-6",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.625 9.8252C0.625 4.44043 4.99023 0.0751953 10.375 0.0751953C15.7598 0.0751953 20.125 4.44043 20.125 9.8252C20.125 15.21 15.7598 19.5752 10.375 19.5752C4.99023 19.5752 0.625 15.21 0.625 9.8252ZM9.3584 4.38135C9.45117 4.28857 9.55518 4.20996 9.66699 4.14648C9.88086 4.02539 10.1245 3.96045 10.375 3.96045C10.5845 3.96045 10.7896 4.00586 10.9766 4.09229C11.1294 4.1626 11.2705 4.26025 11.3916 4.38135C11.6611 4.65088 11.8125 5.0166 11.8125 5.39795C11.8125 5.5249 11.7959 5.6499 11.7637 5.77002C11.6987 6.01172 11.5718 6.23438 11.3916 6.41455C11.1221 6.68408 10.7563 6.83545 10.375 6.83545C9.99365 6.83545 9.62793 6.68408 9.3584 6.41455C9.08887 6.14502 8.9375 5.7793 8.9375 5.39795C8.9375 5.29492 8.94873 5.19287 8.97021 5.09375C9.02783 4.82568 9.16162 4.57812 9.3584 4.38135ZM10.375 15.6899C10.0933 15.6899 9.82275 15.5781 9.62354 15.3789C9.42432 15.1797 9.3125 14.9092 9.3125 14.6274V9.31494C9.3125 9.0332 9.42432 8.7627 9.62354 8.56348C9.82275 8.36426 10.0933 8.25244 10.375 8.25244C10.6567 8.25244 10.9272 8.36426 11.1265 8.56348C11.3257 8.7627 11.4375 9.0332 11.4375 9.31494V14.6274C11.4375 14.7944 11.3979 14.9575 11.3242 15.104C11.2739 15.2046 11.2075 15.2979 11.1265 15.3789C10.9272 15.5781 10.6567 15.6899 10.375 15.6899Z"})}),d=()=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 20",className:"w-6 h-6",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.15137 1.95117C9.30615 -0.0488281 12.1943 -0.0488281 13.3481 1.95117L20.7031 14.6992C21.8574 16.6992 20.4131 19.1992 18.104 19.1992H3.39502C1.08594 19.1992 -0.356933 16.6992 0.797364 14.6992L8.15137 1.95117ZM11.7666 16.0083C11.4971 16.2778 11.1313 16.4292 10.75 16.4292C10.3687 16.4292 10.0029 16.2778 9.7334 16.0083C9.46387 15.7388 9.3125 15.373 9.3125 14.9917C9.3125 14.9307 9.31641 14.8706 9.32373 14.811C9.33545 14.7197 9.35547 14.6304 9.38379 14.5439L9.41406 14.4609C9.48584 14.2803 9.59375 14.1147 9.7334 13.9751C10.0029 13.7056 10.3687 13.5542 10.75 13.5542C11.1313 13.5542 11.4971 13.7056 11.7666 13.9751C12.0361 14.2446 12.1875 14.6104 12.1875 14.9917C12.1875 15.373 12.0361 15.7388 11.7666 16.0083ZM10.75 4.69971C11.0317 4.69971 11.3022 4.81152 11.5015 5.01074C11.7007 5.20996 11.8125 5.48047 11.8125 5.76221V11.0747C11.8125 11.3564 11.7007 11.627 11.5015 11.8262C11.3022 12.0254 11.0317 12.1372 10.75 12.1372C10.4683 12.1372 10.1978 12.0254 9.99854 11.8262C9.79932 11.627 9.6875 11.3564 9.6875 11.0747V5.76221C9.6875 5.48047 9.79932 5.20996 9.99854 5.01074C10.1978 4.81152 10.4683 4.69971 10.75 4.69971Z"})}),u=(0,a.j)("",{variants:{type:{default:"[&_svg]:bg-foreground-muted [&_svg]:text-background-muted",warning:"[&_svg]:bg-warning [&_svg]:text-warning-100",destructive:"[&_svg]:bg-destructive [&_svg]:text-white"}}}),m=(0,a.j)("",{variants:{type:{default:"bg-surface-200/25 border border-default",warning:"bg-alternative border border-default ![&_p]:text-background-muted",destructive:"bg-alternative border border-default"}}}),h=(0,i.forwardRef)((e,t)=>{var s,a,i,h,x,p,f,g;let{type:j="note",variant:v,showIcon:y=!0,label:b,title:_,description:N,children:w,...C}=e,k=v?o[v]:o[j];return(0,n.jsxs)(l.bZ,{ref:t,variant:k,...C,className:(0,r.cn)("mb-2",u({type:k}),m({type:k}),C.className),children:[y&&"warning"===k||"destructive"===k?(0,n.jsx)(d,{}):(0,n.jsx)(c,{}),b||_?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Cd,{...null===(s=C.childProps)||void 0===s?void 0:s.title,className:(0,r.cn)("text mt-0.5 flex gap-3 text-sm [&_p]:mb-1.5 [&_p]:mt-0",!b&&"flex-col",null===(i=C.childProps)||void 0===i?void 0:null===(a=i.title)||void 0===a?void 0:a.className),children:b||_}),N&&(0,n.jsx)(l.X,{className:null===(x=C.childProps)||void 0===x?void 0:null===(h=x.description)||void 0===h?void 0:h.className,children:N}),w&&(0,n.jsx)(l.X,{...null===(p=C.childProps)||void 0===p?void 0:p.description,className:(0,r.cn)("mt-3 [&_p]:mb-1.5 [&_p]:mt-0",null===(g=C.childProps)||void 0===g?void 0:null===(f=g.description)||void 0===f?void 0:f.className),children:w})]}):(0,n.jsx)("div",{className:"text mt [&_p]:mb-1.5 [&_p]:mt-0 mt-0.5 [&_p:last-child]:mb-0",children:w})]})})},58898:function(e,t,s){"use strict";s.d(t,{d:function(){return C}});var n=s(52322),a=s(76141),i=s(94299),r=s(6659),l=s(2784),o=s(72282),c=s(90028),d=s(54383),u=s(32079);let m=e=>({hljs:{display:"block",overflowX:"auto",color:e?"#ddd":"#888"},"hljs-tag":{color:"#569cd6"},"hljs-keyword":{color:"#569cd6",fontWeight:"normal"},"hljs-selector-tag":{color:"#569cd6",fontWeight:"normal"},"hljs-literal":{color:"#569cd6",fontWeight:"normal"},"hljs-strong":{color:"#569cd6"},"hljs-name":{color:"#569cd6"},"hljs-code":{color:"#66d9ef"},"hljs-class .hljs-title":{color:"gray"},"hljs-attribute":{color:"#bf79db"},"hljs-symbol":{color:"#bf79db"},"hljs-regexp":{color:"#bf79db"},"hljs-link":{color:"#bf79db"},"hljs-string":{color:"#3ECF8E"},"hljs-bullet":{color:"#3ECF8E"},"hljs-subst":{color:"#3ECF8E"},"hljs-title":{color:"#3ECF8E",fontWeight:"normal"},"hljs-section":{color:"#3ECF8E",fontWeight:"normal"},"hljs-emphasis":{color:"#3ECF8E"},"hljs-type":{color:"#3ECF8E",fontWeight:"normal"},"hljs-built_in":{color:"#3ECF8E"},"hljs-builtin-name":{color:"#3ECF8E"},"hljs-selector-attr":{color:"#3ECF8E"},"hljs-selector-pseudo":{color:"#3ECF8E"},"hljs-addition":{color:"#3ECF8E"},"hljs-variable":{color:"#3ECF8E"},"hljs-template-tag":{color:"#3ECF8E"},"hljs-template-variable":{color:"#3ECF8E"},"hljs-comment":{color:e?"#999":"#888"},"hljs-quote":{color:"#75715e"},"hljs-deletion":{color:"#75715e"},"hljs-meta":{color:"#75715e"},"hljs-doctag":{fontWeight:"normal"},"hljs-selector-id":{fontWeight:"normal"}});var h=s(65820),x=s.n(h),p=s(27666),f=s(31806),g=s(88109),j=s(80039),v=s(86497),y=s(81303),b=s(83667),_=s(54299),N=s(14969),w=s(12463);let C=e=>{var t,s,h,C;let{title:k,language:S,linesToHighlight:E=[],highlightBorder:q,styleConfig:Z,className:R,value:L,theme:z,children:T,hideCopy:A=!1,hideLineNumbers:P=!1,renderer:D}=e,{resolvedTheme:F}=(0,r.F)(),I=null==F?void 0:F.includes("dark"),V=null!=z?z:m(I),[O,M]=(0,l.useState)(!1),W=()=>{M(!0),setTimeout(()=>{M(!1)},1e3)},B=l.Children.toArray(T),[U]=1===B.length?B:[],H=null!==(s=null!=L?L:"string"==typeof U?U:void 0)&&void 0!==s?s:T,Q="string"==typeof(H=null!==(h=null==H?void 0:null===(t=H.trimEnd)||void 0===t?void 0:t.call(H))&&void 0!==h?h:H)&&H.length<70?"short-inline-codeblock":"",Y=S||(R?R.replace("language-",""):"js");"jsx"===Y&&(Y="js"),c.Z.registerLanguage("js",v.Z),c.Z.registerLanguage("ts",w.Z),c.Z.registerLanguage("py",_.Z),c.Z.registerLanguage("sql",N.Z),c.Z.registerLanguage("bash",p.Z),c.Z.registerLanguage("dart",g.Z),c.Z.registerLanguage("csharp",f.Z),c.Z.registerLanguage("json",y.Z),c.Z.registerLanguage("kotlin",b.Z),c.Z.registerLanguage("curl",x()),c.Z.registerLanguage("http",j.Z),("bash"===Y||"sh"===Y)&&(P=!0);let X=!P;return(0,n.jsxs)(n.Fragment,{children:[k&&(0,n.jsx)("div",{className:"text-sm rounded-t-md bg-surface-100 py-2 px-4 border border-b-0 border-default font-sans",children:k}),R?(0,n.jsxs)("div",{className:"group relative max-w-[90vw] md:max-w-none overflow-auto",children:[(0,n.jsx)(c.Z,{language:Y,wrapLines:!0,style:V,className:(0,d.cn)("code-block border border-surface p-4 w-full !my-0 !bg-surface-100","".concat(k?"!rounded-t-none !rounded-b-md":"!rounded-md"),"".concat(X?"":"pl-6"),R),customStyle:{fontSize:13,lineHeight:1.4},showLineNumbers:X,lineProps:e=>E.includes(e)?{style:{display:"block",backgroundColor:(null==Z?void 0:Z.highlightBackgroundColor)?null==Z?void 0:Z.highlightBackgroundColor:"hsl(var(--background-selection))",borderLeft:q?"1px solid ".concat((null==Z?void 0:Z.highlightBorderColor)?null==Z?void 0:Z.highlightBorderColor:"hsl(var(--foreground-default)",")"):null},class:"hljs-line-highlight"}:{},lineNumberContainerStyle:{paddingTop:"128px"},lineNumberStyle:{minWidth:"44px",paddingLeft:"4px",paddingRight:"4px",marginRight:"12px",color:null!==(C=null==Z?void 0:Z.lineNumber)&&void 0!==C?C:"#828282",textAlign:"center",fontSize:12,paddingTop:"4px",paddingBottom:"4px"},renderer:D,children:H}),!A&&(L||T)&&R?(0,n.jsx)("div",{className:["absolute right-2 top-2","opacity-0 group-hover:opacity-100 transition","".concat(I?"dark":"")].join(" "),children:(0,n.jsx)(o,{text:L||T,children:(0,n.jsx)(u.z,{type:"default",className:"px-1.5",icon:O?(0,n.jsx)(a.Z,{}):(0,n.jsx)(i.Z,{}),onClick:()=>W(),children:O?"Copied":""})})}):null]}):(0,n.jsx)("code",{className:Q,children:L||T})]})}},74559:function(e,t,s){"use strict";var n=s(52322);s(2784);var a=s(49670),i=s(59073);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},23056:function(e,t,s){"use strict";var n=s(52322);s(2784);var a=s(88715),i=s(59073);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},62134:function(e,t,s){"use strict";var n=s(52322);s(2784);var a=s(59461),i=s(59073);t.Z=function(e){return(0,n.jsx)(i.Z,{icon:a.Z,...e})}},3085:function(e,t,s){"use strict";s.d(t,{ZP:function(){return m}});var n=s(52322),a=s(2784),i=s(46318),r=s(54383);function l(e){let{children:t,className:s,tag:a="div",style:i}=e;return(0,n.jsx)("".concat(a),{style:i,children:t})}l.Title=function(e){let{className:t,level:s=1,children:a,style:i}=e;return(0,n.jsx)("h".concat(s),{style:i,children:a})},l.Text=function(e){let{className:t,children:s,style:a,type:i,disabled:r,mark:l,code:o,keyboard:c,underline:d,strikethrough:u,strong:m,small:h}=e;return o?(0,n.jsx)("code",{style:a,children:s}):l?(0,n.jsx)("mark",{style:a,children:s}):c?(0,n.jsx)("kbd",{style:a,children:s}):m?(0,n.jsx)("strong",{style:a,children:s}):(0,n.jsx)("span",{style:a,children:s})},l.Link=function(e){let{children:t,target:s="_blank",href:a,className:i,onClick:r,style:l}=e;return(0,n.jsx)("a",{onClick:r,href:a,target:s,rel:"noopener noreferrer",style:l,children:t})};let o=(0,a.createContext)({type:"text"}),c=e=>{let{type:t}=e;return(0,n.jsx)(o.Provider,{value:{type:t},children:e.children})},d=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:s,ulClassName:a,style:i,type:r="text"}=e;return(0,n.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:i,children:(0,n.jsx)(c,{type:r,children:(0,n.jsx)("ul",{className:a,children:t})})})}u.Item=function(e){let{children:t,icon:s,active:a,rounded:l,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:m}=e,h=(0,i.Z)("menu"),{type:x}=d(),p=[h.item.base];p.push(h.item.variants[x].base),a?p.push(h.item.variants[x].active):p.push(h.item.variants[x].normal);let f=[h.item.content.base];a?f.push(h.item.content.active):f.push(h.item.content.normal);let g=[h.item.icon.base];return a?g.push(h.item.icon.active):g.push(h.item.icon.normal),(0,n.jsxs)("li",{role:"menuitem",className:(0,r.cn)("outline-none",p),style:m,onClick:o,"aria-current":a?"page":void 0,children:[s&&(0,n.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:s}),(0,n.jsx)("span",{className:f.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:s,title:a}=e,r=(0,i.Z)("menu"),{type:l}=d();return(0,n.jsxs)("div",{className:[r.group.base,r.group.variants[l]].join(" "),children:[s&&(0,n.jsx)("span",{className:r.group.icon,children:s}),(0,n.jsx)("span",{className:r.group.content,children:a}),t]})},u.Misc=function(e){let{children:t}=e;return(0,n.jsx)("div",{children:(0,n.jsx)(l.Text,{children:(0,n.jsx)("span",{children:t})})})};var m=u},55283:function(e,t,s){"use strict";s.d(t,{Fw:function(){return r},wy:function(){return i},zF:function(){return a}});var n=s(69557);let a=n.fC,i=n.wy,r=n.Fw},59769:function(e,t,s){"use strict";s.d(t,{Yi:function(){return o},bZ:function(){return c},zs:function(){return l}});var n=s(52322),a=s(83997),i=s(2784),r=s(54383);let l=a.fC,o=a.xz,c=i.forwardRef((e,t)=>{let{className:s,align:i="center",animate:l="zoom-in",sideOffset:o=4,...c}=e;return(0,n.jsx)(a.VY,{ref:t,align:i,sideOffset:o,className:(0,r.cn)("z-50 w-64 rounded-md border bg-overlay p-4 text-popover-foreground shadow-md outline-none","zoom-in"===l?"animate-in zoom-in-[99%]":"animate-in fade-in-50 data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",s),...c})});c.displayName=a.VY.displayName},16734:function(e,t,s){"use strict";s.d(t,{Ee:function(){return o},kr:function(){return c}});var n=s(52322),a=s(6019),i=s(7968),r=s(2784),l=s(54383);let o=r.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(a.fC,{className:(0,l.cn)("grid gap-2",s),...i,ref:t})});o.displayName=a.fC.displayName,r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,n.jsx)(a.ck,{ref:t,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...o,children:(0,n.jsx)(a.z$,{className:"flex items-center justify-center",children:(0,n.jsx)(i.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})}).displayName=a.ck.displayName;let c=r.forwardRef((e,t)=>{let{image:s,label:i,showIndicator:r=!0,...o}=e;return(0,n.jsxs)(a.ck,{ref:t,...o,className:(0,l.cn)("flex flex-col gap-2","w-48","bg-surface-200","rounded-md border border-strong","p-2","shadow-sm","hover:border-stronger hover:bg-surface-300","data-[state=checked]:border-primary","data-[state=checked]:ring-1 data-[state=checked]:ring-border","data-[state=checked]:bg-selection data-[state=checked]:border-foreground","transition-colors","group",o.className),children:[o.children,(0,n.jsxs)("div",{className:"flex gap-2 w-full",children:[r&&(0,n.jsxs)("div",{className:"relative w-3 h-3 min-w-3 mt-0.5",children:[(0,n.jsx)(a.z$,{className:(0,l.cn)("absolute","w-[10px] h-[10px]","left-[1px] top-[1px]","border border-background-surface-300","rounded-full","data-[state=checked]:border-background-surface-300","data-[state=checked]:ring-foreground","data-[state=checked]:bg-foreground")}),(0,n.jsx)("div",{className:(0,l.cn)("absolute","w-3 h-3","border border-stronger","rounded-full","group-hover:border-foreground-light","group-data-[state=checked]:border-foreground","transition-colors")})]}),(0,n.jsx)("label",{htmlFor:o.value,className:(0,l.cn)("text-xs transition-colors text-left","text-light","group-hover:text-foreground group-data-[state=checked]:text-foreground",o.disabled?"cursor-not-allowed":"cursor-pointer"),children:i})]})]})});c.displayName=a.ck.displayName},62949:function(e,t,s){"use strict";s.d(t,{Bw:function(){return v},DI:function(){return h},Ph:function(){return m},Ql:function(){return b},U$:function(){return _},i4:function(){return f},ki:function(){return x},n5:function(){return y}});var n=s(52322),a=s(38947),i=s(78232),r=s(20670),l=s(76141),o=s(2784),c=s(54383),d=s(10929),u=s(75109);let m=a.fC,h=a.ZA,x=a.B4,p=(0,d.j)("",{variants:{size:{...u.Ld}},defaultVariants:{size:u.Rc}}),f=o.forwardRef((e,t)=>{let{className:s,children:r,size:l,...o}=e;return(0,n.jsxs)(a.xz,{ref:t,className:(0,c.cn)("flex w-full items-center justify-between rounded-md border border-button bg-button text-xs ring-offset-background-control placeholder:text-foreground-muted focus:outline-none ring-border-control focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",p({size:l}),s),...o,children:[r,(0,n.jsx)(a.JO,{asChild:!0,children:(0,n.jsx)(i.Z,{className:"h-4 w-4 text-foreground-muted"})})]})});f.displayName=a.xz.displayName;let g=o.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(a.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1 text-foreground-muted",s),...i,children:(0,n.jsx)(r.Z,{className:"h-4 w-4"})})});g.displayName=a.u_.displayName;let j=o.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(a.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1 text-foreground-muted",s),...r,children:(0,n.jsx)(i.Z,{className:"h-4 w-4"})})});j.displayName=a.$G.displayName;let v=o.forwardRef((e,t)=>{let{className:s,children:i,position:r="popper",...l}=e;return(0,n.jsx)(a.h_,{children:(0,n.jsxs)(a.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-overlay text-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...l,children:[(0,n.jsx)(g,{}),(0,n.jsx)(a.l_,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,n.jsx)(j,{})]})})});v.displayName=a.VY.displayName;let y=o.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(a.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-xs text-foreground-lighter/75 uppercase tracking-wider font-mono",s),...i})});y.displayName=a.__.displayName;let b=o.forwardRef((e,t)=>{let{className:s,children:i,...r}=e;return(0,n.jsxs)(a.ck,{ref:t,className:(0,c.cn)("group","relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-xs outline-none focus:bg-overlay-hover text-foreground-light focus:text-foreground data-[state=checked]:text-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(a.wU,{className:"h-3.5 w-3.5 bg-foreground rounded-full flex justify-center items-center",children:(0,n.jsx)(l.Z,{className:"h-2 w-2 text-background-overlay",strokeWidth:6})})}),(0,n.jsx)(a.eT,{children:i})]})});b.displayName=a.ck.displayName;let _=o.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(a.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-border-overlay",s),...i})});_.displayName=a.Z0.displayName},7117:function(e,t,s){"use strict";s.d(t,{DN:function(){return g},Ei:function(){return y},FF:function(){return j},Tu:function(){return f},bC:function(){return v},sw:function(){return d},ue:function(){return p},yo:function(){return c}});var n=s(52322),a=s(70241),i=s(10929),r=s(2784),l=s(8609),o=s(54383);let c=a.fC;a.xz;let d=a.x8,u=(0,i.j)("fixed inset-0 z-50 flex",{variants:{side:{top:"items-start",bottom:"items-end",left:"justify-start",right:"justify-end"}},defaultVariants:{side:"right"}}),m=e=>{let{side:t,children:s,...i}=e;return(0,n.jsx)(a.h_,{...i,children:(0,n.jsx)("div",{className:u({side:t}),children:s})})};m.displayName=a.h_.displayName;let h=r.forwardRef((e,t)=>{let{className:s,children:i,...r}=e;return(0,n.jsx)(a.aV,{className:(0,o.cn)("fixed inset-0 z-50 bg-alternative/90 backdrop-blur-sm transition-all duration-100 data-[state=closed]:animate-out data-[state=closed]:fade-out data-[state=open]:fade-in",s),...r,ref:t})});h.displayName=a.aV.displayName;let x=(0,i.j)("fixed z-50 scale-100 gap-4 bg-studio opacity-100 shadow-lg",{variants:{side:{top:"animate-in slide-in-from-top w-full duration-300 border-b",bottom:"animate-in slide-in-from-bottom w-full duration-300 border-t",left:"animate-in slide-in-from-left h-full duration-300 border-r",right:"animate-in slide-in-from-right h-full duration-300 border-l"},size:{content:"",default:"",sm:"",lg:"",xl:"",xxl:"",full:""}},compoundVariants:[{side:["top","bottom"],size:"content",class:"max-h-screen"},{side:["top","bottom"],size:"default",class:"h-1/3"},{side:["top","bottom"],size:"sm",class:"h-1/4"},{side:["top","bottom"],size:"lg",class:"h-1/2"},{side:["top","bottom"],size:"xl",class:"h-5/6"},{side:["top","bottom"],size:"full",class:"h-screen"},{side:["right","left"],size:"content",class:"max-w-screen"},{side:["right","left"],size:"default",class:"w-1/3"},{side:["right","left"],size:"sm",class:"w-1/4"},{side:["right","left"],size:"lg",class:"w-1/2"},{side:["right","left"],size:"xl",class:"w-4/6"},{side:["right","left"],size:"xxl",class:"w-5/6"},{side:["right","left"],size:"full",class:"w-screen"}],defaultVariants:{side:"right",size:"default"}}),p=r.forwardRef((e,t)=>{let{side:s,size:i,className:r,children:c,showClose:d=!0,...u}=e;return(0,n.jsxs)(m,{side:s,children:[(0,n.jsx)(h,{}),(0,n.jsxs)(a.VY,{ref:t,className:(0,o.cn)(x({side:s,size:i}),r),...u,children:[c,d?(0,n.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,n.jsx)(l.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]}):null]})]})});p.displayName=a.VY.displayName;let f=e=>{let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,o.cn)("px-5 py-4 text-center sm:text-left border-b",t),...s})};f.displayName="SheetHeader";let g=e=>{let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,o.cn)("px-content py-content",t),...s})};g.displayName="SheetSection";let j=e=>{let{className:t,...s}=e;return(0,n.jsx)("div",{className:(0,o.cn)("px-5 py-3 border-t w-full","flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};j.displayName="SheetFooter";let v=r.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(a.Dx,{ref:t,className:(0,o.cn)("text-base text-foreground",s),...i})});v.displayName=a.Dx.displayName;let y=r.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,n.jsx)(a.dk,{ref:t,className:(0,o.cn)("text-sm text-foreground-muted",s),...i})});y.displayName=a.dk.displayName},54849:function(e,t,s){"use strict";s.d(t,{c:function(){return o}});var n=s(52322),a=s(84792),i=s.n(a),r=s(2784),l=s(54383);let o=e=>{let{loading:t=!1,className:s,allowHoverEffect:a=!1}=e,[o,c]=(0,r.useState)(1),[d,u]=(0,r.useState)(1),[m,h]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=setInterval(()=>{t&&(h(!0),c(e=>e%5+1),u(e=>e%5+1))},500);return()=>clearInterval(e)},[t]),(0,r.useEffect)(()=>{!1===t&&(setTimeout(()=>{h(!1)},500),c(1))},[t]),(0,n.jsx)("div",{className:(0,l.cn)(i()["ai-icon__container"],a&&i()["ai-icon__container--allow-hover-effect"],t&&m&&i()["spin-ai-icon-container"],s),children:(0,n.jsxs)("div",{className:(0,l.cn)(i()["ai-icon__grid"]),children:[(0,n.jsx)("div",{className:(0,l.cn)(i()["ai-icon__grid__square"],t?i()["ai-icon__grid__square--step-".concat(o)]:m?i()["ai-icon__grid__square--exiting--step-".concat(d)]:i()["ai-icon__grid__square--static"])}),(0,n.jsx)("div",{className:(0,l.cn)(i()["ai-icon__grid__square"],t?i()["ai-icon__grid__square--step-".concat(o)]:m?i()["ai-icon__grid__square--exiting--step-".concat(d)]:i()["ai-icon__grid__square--static"])}),(0,n.jsx)("div",{className:(0,l.cn)(i()["ai-icon__grid__square"],t?i()["ai-icon__grid__square--step-".concat(o)]:m?i()["ai-icon__grid__square--exiting--step-".concat(d)]:i()["ai-icon__grid__square--static"])}),(0,n.jsx)("div",{className:(0,l.cn)(i()["ai-icon__grid__square"],t?i()["ai-icon__grid__square--step-".concat(o)]:m?i()["ai-icon__grid__square--exiting--step-".concat(d)]:i()["ai-icon__grid__square--static"])})]})})}},73071:function(e,t,s){"use strict";s.d(t,{t:function(){return c}});var n=s(52322),a=s(58898),i=s(96577),r=s.n(i),l=s(54383);let o=e=>(0,n.jsx)("span",{className:(0,l.cn)("next-image--dynamic-fill",e.className),children:(0,n.jsx)(r(),{...e,className:"rounded-md border",layout:"fill"})}),c={mono:e=>(0,n.jsx)("code",{className:"text-sm",children:e.children}),code:e=>(0,n.jsx)(a.d,{...e}),img:e=>o(e),Image:e=>o(e)}},84792:function(e){e.exports={"spin-ai-icon-container":"ai-icon-animation-style_spin-ai-icon-container__7sgAA",spinAiIconContainer:"ai-icon-animation-style_spinAiIconContainer__rBP6P","ai-icon__container":"ai-icon-animation-style_ai-icon__container__2aXBS","ai-icon__grid":"ai-icon-animation-style_ai-icon__grid__Qrwxf","ai-icon__grid__square":"ai-icon-animation-style_ai-icon__grid__square__YU8EZ","ai-icon__grid__square--static":"ai-icon-animation-style_ai-icon__grid__square--static__1tOM_","ai-icon__container--allow-hover-effect":"ai-icon-animation-style_ai-icon__container--allow-hover-effect__HrB86","ai-icon__grid__square--step-1":"ai-icon-animation-style_ai-icon__grid__square--step-1__KATlI",step1_square1:"ai-icon-animation-style_step1_square1__BIjL3",step1_square2:"ai-icon-animation-style_step1_square2__QzsE7",step1_square3:"ai-icon-animation-style_step1_square3__ls1SO",step1_square4:"ai-icon-animation-style_step1_square4__Kk8zi","ai-icon__grid__square--step-2":"ai-icon-animation-style_ai-icon__grid__square--step-2__9OoIG",step2_square1:"ai-icon-animation-style_step2_square1__o_hcu",step2_square2:"ai-icon-animation-style_step2_square2__HBZt7",step2_square3:"ai-icon-animation-style_step2_square3__K6E2K",step2_square4:"ai-icon-animation-style_step2_square4__oDGDL","ai-icon__grid__square--step-3":"ai-icon-animation-style_ai-icon__grid__square--step-3__RldL4",step3_square1:"ai-icon-animation-style_step3_square1__Oo6vT",step3_square2:"ai-icon-animation-style_step3_square2__36Os9",step3_square3:"ai-icon-animation-style_step3_square3__Nj5rc",step3_square4:"ai-icon-animation-style_step3_square4__OFVFh","ai-icon__grid__square--step-4":"ai-icon-animation-style_ai-icon__grid__square--step-4__7o69c",step4_square1:"ai-icon-animation-style_step4_square1__G_8pn",step4_square2:"ai-icon-animation-style_step4_square2__KHYf3",step4_square3:"ai-icon-animation-style_step4_square3__XON12",step4_square4:"ai-icon-animation-style_step4_square4__Aq8dV","ai-icon__grid__square--step-5":"ai-icon-animation-style_ai-icon__grid__square--step-5__cF2Rx",step5_square1:"ai-icon-animation-style_step5_square1__me9Ru",step5_square2:"ai-icon-animation-style_step5_square2__0Ydfw",step5_square3:"ai-icon-animation-style_step5_square3__bOHqW",step5_square4:"ai-icon-animation-style_step5_square4__m2l32","ai-icon__grid__square--exiting--step-1":"ai-icon-animation-style_ai-icon__grid__square--exiting--step-1__JYREY",exit_step1_square1:"ai-icon-animation-style_exit_step1_square1__C_GBC",exit_step1_square2:"ai-icon-animation-style_exit_step1_square2__TID0l",exit_step1_square3:"ai-icon-animation-style_exit_step1_square3__ADmUT",exit_step1_square4:"ai-icon-animation-style_exit_step1_square4__kilu_","ai-icon__grid__square--exiting--step-2":"ai-icon-animation-style_ai-icon__grid__square--exiting--step-2__kDUVt",exit_step2_square1:"ai-icon-animation-style_exit_step2_square1__vmYa5",exit_step2_square2:"ai-icon-animation-style_exit_step2_square2__zxv0q",exit_step2_square3:"ai-icon-animation-style_exit_step2_square3__Dhey5",exit_step2_square4:"ai-icon-animation-style_exit_step2_square4__P1UKx","ai-icon__grid__square--exiting--step-3":"ai-icon-animation-style_ai-icon__grid__square--exiting--step-3__h48Ts",exit_step3_square1:"ai-icon-animation-style_exit_step3_square1__l1FKu",exit_step3_square2:"ai-icon-animation-style_exit_step3_square2__4RPQL",exit_step3_square3:"ai-icon-animation-style_exit_step3_square3__s2vMz",exit_step3_square4:"ai-icon-animation-style_exit_step3_square4__Zros9","ai-icon__grid__square--exiting--step-4":"ai-icon-animation-style_ai-icon__grid__square--exiting--step-4__VEmk_",exit_step4_square1:"ai-icon-animation-style_exit_step4_square1__bG99O",exit_step4_square2:"ai-icon-animation-style_exit_step4_square2__1Fxvf",exit_step4_square3:"ai-icon-animation-style_exit_step4_square3__EWeB7",exit_step4_square4:"ai-icon-animation-style_exit_step4_square4__HC5ov","ai-icon__grid__square--exiting--step-5":"ai-icon-animation-style_ai-icon__grid__square--exiting--step-5___9jFB",exit_step5_square1:"ai-icon-animation-style_exit_step5_square1__w4ctB",exit_step5_square2:"ai-icon-animation-style_exit_step5_square2__UZdas",exit_step5_square3:"ai-icon-animation-style_exit_step5_square3__O_mvc",exit_step5_square4:"ai-icon-animation-style_exit_step5_square4__SKL7Z"}}},function(e){e.O(0,[8421,538,8183,7385,6770,3844,63,8993,8395,3736,7148,5700,7833,3614,2784,486,2168,7533,9983,4830,9428,6640,5022,8402,2888,9774,179],function(){return e(e.s=50193)}),_N_E=e.O()}]);