"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6106,8402],{16879:function(e,n,t){t.d(n,{Z:function(){return k}});var o=t(52322),i=t(17172),a=t(39097),r=t.n(a),l=t(62202),s=t(48998),c=t(27570),d=t(56742),u=t(85945),m=t(48228),p=t(7820),f=t(18592),h=t(18545),g=t(35432),v=t(83537),x=t(22320);async function y(e){let{projectRef:n,connectionString:t,table:o,filters:i,impersonatedRole:a}=e,r=(0,g.Jh)(function(e){var n;let{table:t,filters:o}=e,i=new p.A().from(t.name,null!==(n=t.schema)&&void 0!==n?n:void 0).delete();return o.filter(e=>e.value&&""!==e.value).forEach(e=>{let n=(0,x.q)(t,e);i=i.filter(e.column,e.operator,n)}),i.toSql()}({table:o,filters:i}),{projectRef:n,role:a}),{result:l}=await (0,f.Rj)({projectRef:n,connectionString:t,sql:r,isRoleImpersonationEnabled:(0,v.Gm)(a)});return l}let b=function(){let{onSuccess:e,onError:n,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,u.NL)();return(0,m.D)(e=>y(e),{async onSuccess(n,t,i){let{projectRef:a,table:r}=t;await o.invalidateQueries(h.M.query(a,[r.schema,r.name])),await (null==e?void 0:e(n,t,i))},async onError(e,t,o){void 0===n?l.Am.error("Failed to delete all table rows: ".concat(e.message)):n(e,t,o)},...t})};var j=t(82435),w=t(32079),E=t(80435);async function N(e){let{projectRef:n,connectionString:t,table:o,rows:i,impersonatedRole:a}=e,r=(0,g.Jh)(function(e){var n;let{table:t,rows:o}=e,{primaryKeys:i,error:a}=(0,x.h)({table:t});if(a)throw a;let r=new p.A().from(t.name,null!==(n=t.schema)&&void 0!==n?n:void 0).delete();return i.forEach(e=>{let n=o.map(n=>n[e]);r=r.filter(e,"in",n)}),r.toSql()}({table:o,rows:i}),{projectRef:n,role:a}),{result:l}=await (0,f.Rj)({projectRef:n,connectionString:t,sql:r,isRoleImpersonationEnabled:(0,v.Gm)(a)});return l}let _=function(){let{onSuccess:e,onError:n,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,u.NL)();return(0,m.D)(e=>N(e),{async onSuccess(n,t,o){let{projectRef:i,table:r}=t;await a.invalidateQueries(h.M.query(i,[r.schema,r.name])),await (null==e?void 0:e(n,t,o))},async onError(e,t,a){if(void 0===n){let{table:n,rows:a}=t,r=e.message.includes("Please add a primary key column"),s=e.message.includes("violates foreign key constraint"),c=a.length>1;if(s){let t=n.name,a=e.message.split("on table ")[2].replaceAll('"',""),r=e.message.split("foreign key constraint")[1].split("on table")[0].replaceAll('"',""),l=c?"Unable to delete rows as one of them is currently referenced by a foreign key constraint from the table `".concat(a,"`."):"Unable to delete row as it is currently referenced by a foreign key constraint from the table `".concat(a,"`."),s="Set an on delete behavior on the foreign key relation `".concat(r,"` in the `").concat(a,"` table to automatically respond when row(s) are being deleted in the `").concat(t,"` table.");(0,j.Am)({variant:"default",style:{flexDirection:"column"},title:(0,o.jsx)(E.U,{content:l,className:"text-foreground [&>p]:m-0"}),description:(0,o.jsx)(E.U,{content:s,className:"[&>p]:m-0"}),action:(0,o.jsx)("div",{className:"w-full flex gap-x-2 !mx-0 mt-3",children:(0,o.jsx)(w.z,{asChild:!0,type:"outline",icon:(0,o.jsx)(i.Z,{}),children:(0,o.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/database/postgres/cascade-deletes",children:"Documentation"})})})})}else r?(0,j.Am)({variant:"default",style:{flexDirection:"column"},title:(0,o.jsx)(E.U,{className:"text-foreground [&>p]:m-0",content:"Unable to delete row(s) as table has no primary keys"}),description:(0,o.jsx)(E.U,{className:"[&>p]:m-0",content:"Add a primary key column to your table first to serve as a unique identifier for each row before updating or deleting the row."}),action:(0,o.jsx)("div",{className:"w-full flex gap-x-2 !mx-0 mt-3",children:(0,o.jsx)(w.z,{asChild:!0,type:"outline",icon:(0,o.jsx)(i.Z,{}),children:(0,o.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/database/tables#primary-keys",children:"Documentation"})})})}):l.Am.error("Failed to delete table row: ".concat(e.message))}else n(e,t,a)},...t})};async function R(e){let{projectRef:n,connectionString:t,table:o}=e,i=function(e){var n;let{table:t}=e;return new p.A().from(t.name,null!==(n=t.schema)&&void 0!==n?n:void 0).truncate().toSql()}({table:o}),{result:a}=await (0,f.Rj)({projectRef:n,connectionString:t,sql:i});return a}let S=function(){let{onSuccess:e,onError:n,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,u.NL)();return(0,m.D)(e=>R(e),{async onSuccess(n,t,i){let{projectRef:a,table:r}=t;await o.invalidateQueries(h.M.query(a,[r.schema,r.name])),await (null==e?void 0:e(n,t,i))},async onError(e,t,o){void 0===n?l.Am.error("Failed to truncate table row: ".concat(e.message)):n(e,t,o)},...t})};var C=t(85768),A=t(57924),L=t(58870),T=t(45077),I=t(53475),z=t(12934),D=t(95492),O=t(74138),k=e=>{var n,t,a,u,m,p,f,h,g;let{selectedTable:x,onAfterDeleteTable:y=T.ZT}=e,{project:j}=(0,c.d2)(),E=(0,I._2)(),[{filter:N},R]=(0,L.x)({arrayKeys:["filter","sort"]}),k=(0,s.Yb)(N),Z=(0,A.AF)({projectRef:null==j?void 0:j.ref,connectionString:null==j?void 0:j.connectionString}),U=e=>{R(n=>{var t,o;let i=null!==(t=null==n?void 0:n.filter)&&void 0!==t?t:[],a=null!==(o=null==n?void 0:n.sort)&&void 0!==o?o:[];return{...n,filter:i.filter(n=>{let[t]=n.split(":");if(t!==e)return n}),sort:a.filter(n=>{let[t]=n.split(":");if(t!==e)return n})}})},{mutate:P}=(0,d.v)({onSuccess:()=>{var e;if((null===(e=E.confirmationDialog)||void 0===e?void 0:e.type)!=="column")return;let n=E.confirmationDialog.column;U(n.name),l.ZP.success('Successfully deleted column "'.concat(n.name,'"'))},onError:e=>{var n;if((null===(n=E.confirmationDialog)||void 0===n?void 0:n.type)!=="column")return;let t=E.confirmationDialog.column;l.ZP.error("Failed to delete ".concat(t.name,": ").concat(e.message))},onSettled:()=>{E.closeConfirmationDialog()}}),{mutate:F}=(0,C.H)({onSuccess:async()=>{y(await Z(E.selectedSchemaName)),l.ZP.success('Successfully deleted table "'.concat(null==x?void 0:x.name,'"'))},onError:e=>{l.ZP.error("Failed to delete ".concat(null==x?void 0:x.name,": ").concat(e.message))},onSettled:()=>{E.closeConfirmationDialog()}}),{mutate:q}=_({onSuccess:()=>{var e,n,t;(null===(e=E.confirmationDialog)||void 0===e?void 0:e.type)==="row"&&(null===(n=(t=E.confirmationDialog).callback)||void 0===n||n.call(t)),l.ZP.success("Successfully deleted selected row(s)")},onSettled:()=>{E.closeConfirmationDialog()}}),{mutate:W}=b({onSuccess:()=>{var e,n,t;(null===(e=E.confirmationDialog)||void 0===e?void 0:e.type)==="row"&&(null===(n=(t=E.confirmationDialog).callback)||void 0===n||n.call(t)),l.ZP.success("Successfully deleted selected rows")},onError:e=>{l.ZP.error("Failed to delete rows: ".concat(e.message))},onSettled:()=>{E.closeConfirmationDialog()}}),{mutate:M}=S({onSuccess:()=>{var e,n,t;(null===(e=E.confirmationDialog)||void 0===e?void 0:e.type)==="row"&&(null===(n=(t=E.confirmationDialog).callback)||void 0===n||n.call(t)),l.ZP.success("Successfully deleted all rows from table")},onError:e=>{l.ZP.error("Failed to delete rows: ".concat(e.message))},onSettled:()=>{E.closeConfirmationDialog()}}),V=(null===(n=E.confirmationDialog)||void 0===n?void 0:n.type)==="row"&&E.confirmationDialog.allRowsSelected,G=(null===(t=E.confirmationDialog)||void 0===t?void 0:t.type)==="row"?E.confirmationDialog.allRowsSelected?null!==(g=E.confirmationDialog.numRows)&&void 0!==g?g:0:E.confirmationDialog.rows.length:0,K=((null===(a=E.confirmationDialog)||void 0===a?void 0:a.type)==="column"||(null===(u=E.confirmationDialog)||void 0===u?void 0:u.type)==="table")&&E.confirmationDialog.isDeleteWithCascade,B=async()=>{var e;if((null===(e=E.confirmationDialog)||void 0===e?void 0:e.type)!=="column"||void 0===j)return;let n=E.confirmationDialog.column;void 0!==n&&P({id:n.id,cascade:K,projectRef:j.ref,connectionString:null==j?void 0:j.connectionString,table:x})},Y=async()=>{var e;(null===(e=E.confirmationDialog)||void 0===e?void 0:e.type)==="table"&&void 0!==x&&F({projectRef:null==j?void 0:j.ref,connectionString:null==j?void 0:j.connectionString,schema:x.schema,id:x.id,cascade:K})},$=(0,v.z6)(),Q=async()=>{var e;if(!j)return console.error("Project ref is required");if(!x)return console.error("Selected table required");if((null===(e=E.confirmationDialog)||void 0===e?void 0:e.type)!=="row")return;let n=E.confirmationDialog.rows;if(E.confirmationDialog.allRowsSelected){if(0===k.length){if(void 0!==$())return E.closeConfirmationDialog(),l.ZP.error("Table truncation is not supported when impersonating a role");M({projectRef:j.ref,connectionString:j.connectionString,table:x})}else W({projectRef:j.ref,connectionString:j.connectionString,table:x,filters:k,impersonatedRole:$()})}else q({projectRef:j.ref,connectionString:j.connectionString,table:x,rows:n,impersonatedRole:$()})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(O.Z,{variant:"destructive",size:"small",visible:(null===(m=E.confirmationDialog)||void 0===m?void 0:m.type)==="column",title:'Confirm deletion of column "'.concat((null===(p=E.confirmationDialog)||void 0===p?void 0:p.type)==="column"&&E.confirmationDialog.column.name,'"'),confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>{E.closeConfirmationDialog()},onConfirm:B,children:(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to delete the selected column? This action cannot be undone."}),(0,o.jsx)(z.Z,{label:"Drop column with cascade?",description:"Deletes the column and its dependent objects",checked:K,onChange:()=>E.toggleConfirmationIsWithCascade()}),K&&(0,o.jsxs)(D.bZ,{variant:"warning",title:"Warning: Dropping with cascade may result in unintended consequences",children:[(0,o.jsx)(D.Cd,{children:"All dependent objects will be removed, as will any objects that depend on them, recursively."}),(0,o.jsx)(D.X,{children:(0,o.jsx)(w.z,{asChild:!0,size:"tiny",type:"default",icon:(0,o.jsx)(i.Z,{}),children:(0,o.jsx)(r(),{href:"https://www.postgresql.org/docs/current/ddl-depend.html",target:"_blank",rel:"noreferrer",children:"About dependency tracking"})})})]})]})}),(0,o.jsx)(O.Z,{variant:"destructive",size:"small",visible:(null===(f=E.confirmationDialog)||void 0===f?void 0:f.type)==="table",title:(0,o.jsx)("span",{className:"break-words",children:'Confirm deletion of table "'.concat(null==x?void 0:x.name,'"')}),confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>{E.closeConfirmationDialog()},onConfirm:Y,children:(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to delete the selected table? This action cannot be undone."}),(0,o.jsx)(z.Z,{label:"Drop table with cascade?",description:"Deletes the table and its dependent objects",checked:K,onChange:()=>E.toggleConfirmationIsWithCascade(!K)}),K&&(0,o.jsxs)(D.bZ,{variant:"warning",children:[(0,o.jsx)(D.Cd,{children:"Warning: Dropping with cascade may result in unintended consequences"}),(0,o.jsx)(D.X,{children:"All dependent objects will be removed, as will any objects that depend on them, recursively."}),(0,o.jsx)(D.X,{className:"mt-4",children:(0,o.jsx)(w.z,{asChild:!0,size:"tiny",type:"default",icon:(0,o.jsx)(i.Z,{}),children:(0,o.jsx)(r(),{href:"https://www.postgresql.org/docs/current/ddl-depend.html",target:"_blank",rel:"noreferrer",children:"About dependency tracking"})})})]})]})}),(0,o.jsx)(O.Z,{variant:"destructive",size:"small",visible:(null===(h=E.confirmationDialog)||void 0===h?void 0:h.type)==="row",title:(0,o.jsxs)("p",{className:"break-words",children:[(0,o.jsx)("span",{children:"Confirm to delete the selected row"}),(0,o.jsx)("span",{children:G>1&&"s"})]}),confirmLabel:"Delete",confirmLabelLoading:"Deleting",onCancel:()=>E.closeConfirmationDialog(),onConfirm:()=>Q(),children:(0,o.jsx)("div",{className:"space-y-4",children:(0,o.jsxs)("p",{className:"text-sm text-foreground-light",children:[(0,o.jsx)("span",{children:"Are you sure you want to delete "}),(0,o.jsxs)("span",{children:[V?"all":"the selected"," "]}),(0,o.jsx)("span",{children:G>1&&"".concat(G," ")}),(0,o.jsx)("span",{children:"row"}),(0,o.jsx)("span",{children:G>1&&"s"}),(0,o.jsx)("span",{children:"? This action cannot be undone."})]})})})]})}},72777:function(e,n,t){t.d(n,{l5:function(){return no.Z},mM:function(){return np}});var o=t(52322),i=t(59491),a=t(85945),r=t(55281),l=t.n(r),s=t(84336),c=t.n(s),d=t(5632),u=t(62202),m=t(99959),p=t(2784),f=t(28846),h=t(52797),g=t(28316),v=t(27570),x=t(57142),y=t(58870),b=t(83537),j=t(53475),w=t(48998),E=t(71878),N=t(64568);function _(e,n){return e.indexOf(n)>=0}function R(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],[o,i]=p.useState(),a=o=>{if(!e||_(n,o.target.nodeName)||_(t,o.target.className))return;let a=o.metaKey&&o.shiftKey?"Command+Shift+".concat(o.key):o.metaKey?"Command+".concat(o.key):o.shiftKey&&"Enter"===o.key?"Shift+".concat(o.key):o.ctrlKey&&o.key?"Control+".concat(o.key):o.key;e[a]&&(a.includes("+")?(o.preventDefault(),e[a](o),i(null)):(i(o.key),o.preventDefault()))},r=n=>{e&&e[n.key]&&o===n.key&&(n.preventDefault(),e[n.key](n),i(null))};p.useEffect(()=>(window.addEventListener("keydown",a),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",r)}))}function S(e){let{gridRef:n}=e,{rows:t,gridColumns:o,selectedCellPosition:i}=(0,E.Qq)(),[a,r]=p.useState("Command");return p.useEffect(()=>{var e,n;r("windows"==((null===(e=navigator)||void 0===e?void 0:e.appVersion.indexOf("Win"))!==-1?"windows":(null===(n=navigator)||void 0===n?void 0:n.appVersion.indexOf("Mac"))!==-1?"macos":"unknown")?"Control":"Command")},[]),R({["".concat(a,"+ArrowUp")]:e=>{if(e.stopPropagation(),i){var t;let e={idx:null!==(t=null==i?void 0:i.idx)&&void 0!==t?t:0,rowIdx:0};n.current.selectCell(e)}else n.current.scrollToCell({rowIdx:Number(0)})},["".concat(a,"+ArrowDown")]:e=>{if(e.stopPropagation(),i){var o;let e={idx:null!==(o=null==i?void 0:i.idx)&&void 0!==o?o:0,rowIdx:t.length>1?t.length-1:0};n.current.selectCell(e)}else n.current.scrollToCell({rowIdx:Number(t.length)})},["".concat(a,"+ArrowLeft")]:e=>{var t;e.stopPropagation();let a={idx:o.filter(e=>e.frozen).length,rowIdx:null!==(t=null==i?void 0:i.rowIdx)&&void 0!==t?t:0};n.current.selectCell(a)},["".concat(a,"+ArrowRight")]:e=>{var t,a;e.stopPropagation(),null===(t=n.current)||void 0===t||t.selectCell({idx:o.length-1,rowIdx:null!==(a=null==i?void 0:i.rowIdx)&&void 0!==a?a:0})},["".concat(a,"+c")]:e=>{if(e.stopPropagation(),i){let{idx:e,rowIdx:r}=i;if(e>0){var n,a;let i=o[e].key,l=null!==(a=null===(n=t[r])||void 0===n?void 0:n[i])&&void 0!==a?a:"",s=(0,N.Lw)(l);(0,N.vQ)(s)}}}},["INPUT","TEXTAREA","SELECT"]),null}var C=t(55600),A=t(38264),L=t(37603),T=t(65802),I=t(42991),z=t(30557),D=t(19278),O=t(63480),k=t(66594),Z=t(7820),U=t(35432),P=t(18592),F=t(22320);let q="\nCREATE OR REPLACE FUNCTION pg_temp.count_estimate(\n    query text\n) RETURNS integer LANGUAGE plpgsql AS $$\nDECLARE\n    plan jsonb;\nBEGIN\n    EXECUTE 'EXPLAIN (FORMAT JSON)' || query INTO plan;\n    RETURN plan->0->'Plan'->'Plan Rows';\nEND;\n$$;\n".trim(),W=e=>{var n,t,o;let{table:i,filters:a=[],enforceExactCount:r=!1}=e;if(!i)return"";if(r){let e=new Z.A().from(i.name,null!==(n=i.schema)&&void 0!==n?n:void 0).count();return a.filter(e=>e.value&&""!==e.value).forEach(n=>{let t=(0,F.q)(i,n);e=e.filter(n.column,n.operator,t)}),"select (".concat(e.toSql().slice(0,-1),"), false as is_estimate;")}{let e=new Z.A().from(i.name,null!==(t=i.schema)&&void 0!==t?t:void 0).select("*");a.filter(e=>e.value&&""!=e.value).forEach(n=>{let t=(0,F.q)(i,n);e=e.filter(n.column,n.operator,t)});let n=e.toSql(),r=new Z.A().from(i.name,null!==(o=i.schema)&&void 0!==o?o:void 0).count();a.filter(e=>e.value&&""!=e.value).forEach(e=>{let n=(0,F.q)(i,e);r=r.filter(e.column,e.operator,n)});let l=r.toSql().slice(0,-1);return"\n".concat(q,"\n\nwith approximation as (\n    select reltuples as estimate\n    from pg_class\n    where oid = ").concat(i.id,"\n)\nselect \n  case \n    when estimate = -1 then (select pg_temp.count_estimate('").concat(n.replaceAll("'","''"),"'))\n    when estimate > ").concat(5e4," then ").concat(a.length>0?"pg_temp.count_estimate('".concat(n.replaceAll("'","''"),"')"):"estimate","\n    else (").concat(l,")\n  end as count,\n  estimate = -1 or estimate > ").concat(5e4," as is_estimate\nfrom approximation;\n").trim()}},M=function(e){let{projectRef:n,connectionString:t,queryKey:o,table:i,enforceExactCount:a,impersonatedRole:r,...l}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(0,b.Zp)();return(0,P.cp)({projectRef:n,connectionString:t,sql:(0,U.Jh)(W({table:i,enforceExactCount:a,...l}),{projectRef:null!=n?n:"ref",role:r}),queryKey:[...null!=o?o:[],{table:{name:null==i?void 0:i.name,schema:null==i?void 0:i.schema},enforceExactCount:a,impersonatedRole:r,...l}],isRoleImpersonationEnabled:c},{select(e){var n;return{count:e.result[0].count,is_estimate:null!==(n=e.result[0].is_estimate)&&void 0!==n&&n}},enabled:void 0!==n&&void 0!==i,...s})};var V=t(32079),G=t(4419),K=t(2322),B=t(74138),Y=t(62591);let $=[{value:100,label:"100 rows"},{value:500,label:"500 rows"},{value:1e3,label:"1000 rows"}];var Q=()=>{var e,n,t,i;let{id:a}=(0,m.UO)(),r=a?Number(a):void 0,l=(0,E.Qq)(),s=(0,E.I0)(),{project:c}=(0,v.d2)(),d=(0,j._2)(),{data:u}=(0,I.Z)(r),f=null!==(e=null==u?void 0:u.live_rows_estimate)&&void 0!==e?e:null,[{filter:h}]=(0,y.x)({arrayKeys:["filter"]}),g=(0,w.Yb)(h),x=d.page,N=null!==(n=l.table)&&void 0!==n?n:void 0,_=(0,b.fN)(),[R,S]=(0,p.useState)(!1),[C,A]=(0,p.useState)(!1),[L,T]=(0,p.useState)(!1),{data:z,isLoading:Z,isSuccess:U,isError:P,isFetching:F}=M({queryKey:[null==N?void 0:N.schema,null==N?void 0:N.name,"count-estimate"],projectRef:null==c?void 0:c.ref,connectionString:null==c?void 0:c.connectionString,table:N,filters:g,enforceExactCount:d.enforceExactCount,impersonatedRole:_.role},{keepPreviousData:!0,onSuccess(e){s({type:"SET_ROWS_COUNT",payload:e.count})}}),q=Math.ceil((null!==(t=null==z?void 0:z.count)&&void 0!==t?t:0)/d.rowsPerPage),W=(null!==(i=null==z?void 0:z.count)&&void 0!==i?i:0)>0?q:1,Q=()=>{J(),s({type:"SELECTED_ROWS_CHANGE",payload:{selectedRows:new Set}})},H=()=>{X(),s({type:"SELECTED_ROWS_CHANGE",payload:{selectedRows:new Set}})},J=()=>{let e=x-1;d.setPage(e)},X=()=>{let e=x+1;d.setPage(e)};return(0,p.useEffect)(()=>{x&&x>W&&d.setPage(W)},[x,W]),(0,p.useEffect)(()=>{void 0!==r&&d.setEnforceExactCount(null!==f&&f<=5e4)},[r]),(0,o.jsxs)("div",{className:"flex items-center gap-x-4",children:[Z&&(0,o.jsx)("p",{className:"text-sm text-foreground-light",children:"Loading records count..."}),U&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,o.jsx)(V.z,{icon:(0,o.jsx)(D.Z,{}),type:"outline",className:"px-1.5",disabled:x<=1||Z,onClick:()=>{x>1&&(l.selectedRows.size>=1?A(!0):J())}}),(0,o.jsx)("p",{className:"text-xs text-foreground-light",children:"Page"}),(0,o.jsx)("div",{className:"w-12",children:(0,o.jsx)(G.Z,{size:"tiny",value:x,onChange:e=>{let n=e.target.value,t=Number(n)>q?q:Number(n);d.setPage(t||1)},style:{width:"3rem"},min:1,max:q})}),(0,o.jsxs)("p",{className:"text-xs text-foreground-light",children:["of ",W.toLocaleString()]}),(0,o.jsx)(V.z,{icon:(0,o.jsx)(O.Z,{}),type:"outline",className:"px-1.5",disabled:x>=q||Z,onClick:()=>{x<q&&(l.selectedRows.size>=1?S(!0):X())}}),(0,o.jsx)(Y.F,{options:$,onSelect:e=>{let n=Number(e);d.setRowsPerPage(isNaN(n)?100:n)},side:"top",align:"start",children:(0,o.jsx)(V.z,{asChild:!0,type:"outline",style:{padding:"3px 10px"},children:(0,o.jsx)("span",{children:"".concat(d.rowsPerPage," rows")})})})]}),(0,o.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,o.jsxs)("p",{className:"text-xs text-foreground-light",children:["".concat(z.count.toLocaleString()," ").concat(0===z.count||z.count>1?"records":"record")," ",z.is_estimate?"(estimated)":""]}),z.is_estimate&&(0,o.jsxs)(K.u,{children:[(0,o.jsx)(K.aJ,{asChild:!0,children:(0,o.jsx)(V.z,{size:"tiny",type:"text",className:"px-1.5",loading:F,icon:(0,o.jsx)(k.Z,{}),onClick:()=>{null===f||z.count>5e4?T(!0):d.setEnforceExactCount(!0)}})}),(0,o.jsxs)(K._v,{side:"top",className:"w-72",children:["This is an estimated value as your table has more than"," ",5e4.toLocaleString()," rows. ",(0,o.jsx)("br",{}),(0,o.jsx)("span",{className:"text-brand",children:"Click to retrieve the exact count of the table."})]})]})]})]}),P&&(0,o.jsx)("p",{className:"text-sm text-foreground-light",children:"Error fetching records count. Please refresh the page."}),(0,o.jsx)(B.Z,{visible:C,title:"Confirm moving to previous page",confirmLabel:"Confirm",onCancel:()=>A(!1),onConfirm:()=>{Q()},children:(0,o.jsx)("p",{className:"text-sm text-foreground-light",children:"The currently selected lines will be deselected, do you want to proceed?"})}),(0,o.jsx)(B.Z,{visible:R,title:"Confirm moving to next page",confirmLabel:"Confirm",onCancel:()=>S(!1),onConfirm:()=>{H()},children:(0,o.jsx)("p",{className:"text-sm text-foreground-light",children:"The currently selected lines will be deselected, do you want to proceed?"})}),(0,o.jsx)(B.Z,{variant:"warning",visible:L,title:"Confirm to fetch exact count for table",confirmLabel:"Retrieve exact count",onCancel:()=>T(!1),onConfirm:()=>{d.setEnforceExactCount(!0),T(!1)},children:(0,o.jsx)("p",{className:"text-sm text-foreground-light",children:null===f?"If your table has a row count of greater than ".concat(5e4.toLocaleString()," rows,\n          retrieving the exact count of the table may cause performance issues on your database."):"Your table has a row count of greater than ".concat(5e4.toLocaleString()," rows, and\n          retrieving the exact count of the table may cause performance issues on your database.")})})]})},H=e=>{let{isRefetching:n}=e,{id:t}=(0,m.UO)(),i=t?Number(t):void 0,{data:a}=(0,I.Z)(i),r=(0,T.Z)(null==a?void 0:a.id),[{view:l="data"},s]=(0,y.x)(),c=(null==r?void 0:r.type)===L.l.VIEW||(null==r?void 0:r.type)===L.l.MATERIALIZED_VIEW,d=(null==r?void 0:r.type)===L.l.TABLE;return(0,o.jsxs)(C.x,{children:["data"===l&&(0,o.jsx)(Q,{}),(0,o.jsxs)("div",{className:"ml-auto flex items-center gap-x-2",children:[a&&"data"===l&&(0,o.jsx)(z.Z,{table:a,isRefetching:n}),(c||d)&&(0,o.jsx)(A.Z,{width:75,options:["definition","data"],activeOption:l,borderOverride:"border",onClickOption:e=>{"data"===e?s({view:void 0}):s({view:e})}})]})]})},J=t(79147),X=t(47370),ee=t(64018),en=t(56006),et=t(41679),eo=t(75153),ei=t(82955),ea=t(71623),er=t(53120);function el(e,n){let{show:t}=(0,ea.av)();return(0,o.jsx)(X.X2,{...n,onContextMenu:function(e){t(e,{id:er.ep,props:{rowIdx:n.rowIdx}})}},e)}let es=e=>{var n;return null!==(n=null==e?void 0:e.idx)&&void 0!==n?n:-1},ec=(0,J.Z)((e,n,t)=>{t({type:"UPDATE_COLUMN_SIZE",payload:{index:e,width:Math.round(n)}})},500),ed=(0,ee.X$)((0,p.forwardRef)((e,n)=>{var t;let{width:i,height:a,containerClass:r,gridClass:l,rowClass:s,rows:c,error:d,isLoading:u,isSuccess:m,isError:f,filters:h,setParams:g,updateRow:x,onAddRow:y,onImportData:b,onEditForeignKeyColumnValue:j}=e,w=(0,E.I0)(),_=(0,E.Qq)();async function S(e,n){let t=e[n.indexes[0]],o=c.find(e=>e.idx==t.idx),i=Object.keys(t).find(e=>t[e]!==o[e]);i&&x(o,{[i]:t[i]})}let C=(0,p.useRef)(null);function A(){var e,n,t,o;let i=null===(o=C.current)||void 0===o?void 0:null===(t=o.row)||void 0===t?void 0:t[null===(n=C.current)||void 0===n?void 0:null===(e=n.column)||void 0===e?void 0:e.key],a=(0,N.Lw)(i);a&&(0,ei.vQ)(a)}R({"Command+c":e=>{e.stopPropagation(),A()},"Control+c":e=>{e.stopPropagation(),A()}},["INPUT","TEXTAREA"]);let L=_.table,{project:T}=(0,v.d2)(),{data:I}=(0,eo.X)({projectRef:null==T?void 0:T.ref,connectionString:null==T?void 0:T.connectionString,schema:null!==(t=null==L?void 0:L.schema)&&void 0!==t?t:void 0}),z=()=>{g(e=>({...e,filter:[]}))};return(0,o.jsx)("div",{className:"".concat(r," flex flex-col"),style:{width:i||"100%",height:a||"50vh"},children:(0,o.jsx)(X.ZP,{ref:n,className:"".concat(l," flex-grow"),rowClass:s,columns:_.gridColumns,rows:null!=c?c:[],renderers:{renderRow:el,noRowsFallback:(0,o.jsxs)("div",{style:{width:"calc(100vw - 255px - 55px)"},children:[u&&(0,o.jsx)("div",{className:"p-2 col-span-full",children:(0,o.jsx)(et.A,{})}),f&&(0,o.jsx)("div",{className:"p-2 col-span-full",children:(0,o.jsx)(en.Z,{error:d,subject:"Failed to retrieve rows from table"})}),m&&(0,o.jsx)(o.Fragment,{children:0===(null!=h?h:[]).length?(0,o.jsxs)("div",{style:{height:"calc(100% - 35px)"},className:"flex flex-col items-center justify-center col-span-full",children:[(0,o.jsx)("p",{className:"text-sm text-light",children:"This table is empty"}),void 0!==y&&void 0!==b&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"text-sm text-light mt-1",children:"Add rows to your table to get started."}),(0,o.jsx)("div",{className:"flex items-center space-x-2 mt-4",children:void 0!==y&&void 0!==b&&(0,o.jsx)(V.z,{type:"default",onClick:b,children:"Import data via CSV"})})]})]}):(0,o.jsxs)("div",{style:{height:"calc(100% - 35px)"},className:"flex flex-col items-center justify-center col-span-full",children:[(0,o.jsx)("p",{className:"text-sm text-light",children:"The filters applied has returned no results from this table"}),(0,o.jsx)("div",{className:"flex items-center space-x-2 mt-4",children:(0,o.jsx)(V.z,{type:"default",onClick:()=>z(),children:"Remove all filters"})})]})})]})},rowKeyGetter:es,selectedRows:_.selectedRows,onColumnResize:function(e,n){ec(e,n,w)},onRowsChange:S,onSelectedCellChange:function(e){C.current=e,w({type:"SELECTED_CELL_CHANGE",payload:{position:{idx:e.column.idx,rowIdx:e.rowIdx}}})},onSelectedRowsChange:function(e){w({type:"SELECTED_ROWS_CHANGE",payload:{selectedRows:e}})},onCellDoubleClick:e=>(function(e,n){let t=function(e){var n,t;let{targetTableSchema:o,targetTableName:i,targetColumnName:a}=null!==(t=null==L?void 0:null===(n=L.columns.find(n=>n.name==e))||void 0===n?void 0:n.foreignKey)&&void 0!==t?t:{};return null==I?void 0:I.find(e=>e.target_schema==o&&e.target_table==i&&e.target_columns==a)}(n.name);t&&j({foreignKey:t,row:e,column:n})})(e.row,e.column)})})}));var eu=t(24990),em=t(6277),ep=t(46782),ef=t.n(ep),eh=t(78232),eg=t(53020),ev=t(54813),ex=t(8609),ey=t(17913),eb=t(3536),ej=t(90286),ew=t.n(ej),eE=t(87175),eN=t(34503),e_=t(54383),eR=t(3907),eS=t(54664),eC=e=>{let{table:n,sorts:t,filters:i,onAddColumn:a,onAddRow:r,onImportData:l,headerActions:s,customHeader:c}=e,{selectedRows:d}=(0,E.Qq)();return(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"flex h-10 items-center justify-between bg-dash-sidebar px-5 py-1.5",children:[c?(0,o.jsx)(o.Fragment,{children:c}):(0,o.jsx)(o.Fragment,{children:d.size>0?(0,o.jsx)(eL,{table:n,sorts:t,filters:i}):(0,o.jsx)(eA,{table:n,onAddColumn:a,onAddRow:r,onImportData:l})}),(0,o.jsx)("div",{className:"sb-grid-header__inner",children:s})]})})};let eA=e=>{let{table:n,onAddColumn:t,onAddRow:a,onImportData:r}=e,l=(0,eE.Xo)(i.KA.TENANT_SQL_ADMIN_WRITE,"columns"),[{filter:s,sort:c},d]=(0,y.x)({arrayKeys:["sort","filter"]});return(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(eR.Z,{table:n,filters:s,setParams:d}),(0,o.jsx)(eS.f,{table:n,sorts:c,setParams:d})]}),(void 0!==a||void 0!==t)&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"h-[20px] w-px border-r border-control"}),(0,o.jsx)("div",{className:"flex items-center gap-2",children:l&&(0,o.jsxs)(eN.h_,{children:[(0,o.jsx)(eN.$F,{asChild:!0,children:(0,o.jsx)(V.z,{"data-testid":"table-editor-insert-new-row",type:"primary",size:"tiny",icon:(0,o.jsx)(eh.Z,{strokeWidth:1.5}),children:"Insert"})}),(0,o.jsx)(eN.AW,{side:"bottom",align:"start",children:[...void 0!==a?[(0,o.jsxs)(eN.Xi,{className:"group space-x-2",onClick:a,children:[(0,o.jsxs)("div",{className:"-mt-2 pr-1.5",children:[(0,o.jsx)("div",{className:"border border-foreground-lighter w-[15px] h-[4px]"}),(0,o.jsx)("div",{className:"border border-foreground-lighter w-[15px] h-[4px] my-[2px]"}),(0,o.jsx)("div",{className:(0,e_.cn)(["border border-foreground-light w-[15px] h-[4px] translate-x-0.5","transition duration-200 group-data-[highlighted]:border-brand group-data-[highlighted]:translate-x-0"])})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{children:"Insert row"}),(0,o.jsxs)("p",{className:"text-foreground-light",children:["Insert a new row into ",n.name]})]})]},"add-row")]:[],...void 0!==t?[(0,o.jsxs)(eN.Xi,{className:"group space-x-2",onClick:t,children:[(0,o.jsxs)("div",{className:"flex -mt-2 pr-1.5",children:[(0,o.jsx)("div",{className:"border border-foreground-lighter w-[4px] h-[15px]"}),(0,o.jsx)("div",{className:"border border-foreground-lighter w-[4px] h-[15px] mx-[2px]"}),(0,o.jsx)("div",{className:(0,e_.cn)(["border border-foreground-light w-[4px] h-[15px] -translate-y-0.5","transition duration-200 group-data-[highlighted]:border-brand group-data-[highlighted]:translate-y-0"])})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{children:"Insert column"}),(0,o.jsxs)("p",{className:"text-foreground-light",children:["Insert a new column into ",n.name]})]})]},"add-column")]:[],...void 0!==r?[(0,o.jsxs)(eN.Xi,{className:"group space-x-2",onClick:r,children:[(0,o.jsxs)("div",{className:"relative -mt-2",children:[(0,o.jsx)(eg.Z,{size:18,strokeWidth:1.5,className:"-translate-x-[2px]"}),(0,o.jsx)(ev.Z,{className:(0,em.default)("transition duration-200 absolute bottom-0 right-0 translate-y-1 opacity-0 bg-brand-400 rounded-full","group-data-[highlighted]:translate-y-0 group-data-[highlighted]:text-brand group-data-[highlighted]:opacity-100"),strokeWidth:3,size:12})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{children:"Import data from CSV"}),(0,o.jsx)("p",{className:"text-foreground-light",children:"Insert new rows from a CSV"})]})]},"import-data")]:[]]})]})})]})]})},eL=e=>{var n,t;let{table:i,sorts:a,filters:r}=e,l=(0,E.Qq)(),s=(0,E.I0)(),{project:c}=(0,v.d2)(),d=(0,j._2)(),m=(0,b.fN)(),f=void 0!==m.role,[h,g]=(0,p.useState)(!1),{data:y}=(0,x.KK)({queryKey:[i.schema,i.name],projectRef:null==c?void 0:c.ref,connectionString:null==c?void 0:c.connectionString,table:i,sorts:a,filters:r,page:d.page,limit:d.rowsPerPage,impersonatedRole:m.role}),{data:w}=M({queryKey:[null==i?void 0:i.schema,null==i?void 0:i.name,"count-estimate"],projectRef:null==c?void 0:c.ref,connectionString:null==c?void 0:c.connectionString,table:i,filters:r,impersonatedRole:m.role},{keepPreviousData:!0}),N=()=>{s({type:"SELECT_ALL_ROWS",payload:{selectedRows:new Set(S.map(e=>e.idx))}})};async function _(){if(g(!0),T&&C>5e5)return u.ZP.error("Sorry! We're unable to support exporting of CSV for row counts larger than ".concat(5e5.toLocaleString()," at the moment.")),g(!1);if(!c)return u.ZP.error("Project is required"),g(!1);let e=(T?await (0,x.wF)({projectRef:c.ref,connectionString:c.connectionString,table:i,filters:r,sorts:a,impersonatedRole:m.role}):S.filter(e=>A.has(e.idx))).map(e=>(Object.keys(e).map(n=>{"object"==typeof e[n]&&null!==e[n]&&(e[n]=JSON.stringify(e[n]))}),e)),n=new Blob([ew().unparse(e,{columns:l.table.columns.map(e=>e.name)})],{type:"text/csv;charset=utf-8;"});ef()(n,"".concat(l.table.name,"_rows.csv")),g(!1)}function R(){s({type:"SELECTED_ROWS_CHANGE",payload:{selectedRows:new Set}})}let S=null!==(n=null==y?void 0:y.rows)&&void 0!==n?n:[],C=null!==(t=null==w?void 0:w.count)&&void 0!==t?t:0,{selectedRows:A,editable:L,allRowsSelected:T}=l;return(0,b.gv)(()=>{(T||A.size>0)&&R()}),(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)(V.z,{type:"default",className:"px-1",icon:(0,o.jsx)(ex.Z,{}),onClick:R}),(0,o.jsx)("span",{className:"text-xs text-foreground",children:T?"All rows in table selected":A.size>1?"".concat(A.size," rows selected"):"".concat(A.size," row selected")}),!T&&C>S.length&&(0,o.jsx)(V.z,{type:"link",onClick:()=>N(),children:"Select all rows in table"})]}),(0,o.jsx)("div",{className:"h-[20px] border-r border-strong"}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(V.z,{type:"primary",size:"tiny",icon:(0,o.jsx)(ey.Z,{}),loading:h,disabled:h,onClick:_,children:"Export to CSV"}),L&&(0,o.jsxs)(eu.fC,{delayDuration:0,children:[(0,o.jsx)(eu.xz,{asChild:!0,children:(0,o.jsx)(V.z,{type:"default",size:"tiny",icon:(0,o.jsx)(eb.Z,{}),onClick:()=>{let e=T?C:A.size,n=Array.from(A),t=S.filter(e=>n.includes(e.idx));d.onDeleteRows(t,{allRowsSelected:T,numRows:e,callback:()=>{s({type:"REMOVE_ROWS",payload:{rowIdxs:n}}),s({type:"SELECTED_ROWS_CHANGE",payload:{selectedRows:new Set}})}})},disabled:T&&f,children:T?"Delete all rows in table":A.size>1?"Delete ".concat(A.size," rows"):"Delete ".concat(A.size," row")})}),T&&f&&(0,o.jsx)(eu.h_,{children:(0,o.jsxs)(eu.VY,{side:"bottom",children:[(0,o.jsx)(eu.Eh,{className:"radix-tooltip-arrow"}),(0,o.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,o.jsx)("span",{className:"text-xs text-foreground",children:"Table truncation is not supported when impersonating a role"})})]})})]})]})]})};var eT=t(87115),eI=t(52993);async function ez(e,n,t,o,i){var a,r;let l=e.projectRef?function(e,n,t){let o=(0,w.x4)(eT.E_,e),i=localStorage.getItem(o);if(i)return JSON.parse(i)[t&&"public"!=t?"".concat(t,".").concat(n):n]}(e.projectRef,e.table.name,e.table.schema):void 0;if(!n.isInitialComplete&&void 0===o&&void 0===i&&((null==l?void 0:l.sorts)||(null==l?void 0:l.filters)))return{savedState:{sorts:l.sorts,filters:l.filters}};let s=(0,eI.cv)(e.table,{projectRef:e.projectRef,tableId:e.tableId,editable:e.editable,defaultWidth:null===(a=e.gridProps)||void 0===a?void 0:a.defaultColumnWidth,onAddColumn:e.editable?e.onAddColumn:void 0,onExpandJSONEditor:e.onExpandJSONEditor,onExpandTextEditor:e.onExpandTextEditor});return t({type:"INIT_TABLE",payload:{table:e.table,gridProps:e.gridProps,gridColumns:s,savedState:l,editable:e.editable,onError:null!==(r=e.onError)&&void 0!==r?r:e=>{console.error("Supabase grid error: ",e)}}}),{savedState:{}}}let eD=e=>{let n=(0,w.cc)(e);return(0,o.jsx)(E.g3,{children:(0,o.jsx)(f.W,{backend:h.PD,context:window,children:(0,o.jsx)(eO,{...n})})})},eO=e=>{var n,t;let{editable:i,projectRef:a,gridProps:r,headerActions:l,showCustomChildren:s,customHeader:c,children:d,onAddRow:u,onAddColumn:f,updateTableRow:h,onEditForeignKeyColumnValue:N,onImportData:_}=e,{id:R}=(0,m.UO)(),C=(0,E.I0)(),A=(0,E.Qq)(),L=(0,j._2)(),T=(0,p.useRef)(null),[I,z]=(0,p.useState)(!1),[{sort:D,filter:O},k]=(0,y.x)({arrayKeys:["sort","filter"]}),Z=(0,w.rg)(e.table.name,D),U=(0,w.Yb)(O),P=(0,b.fN)(),{project:F}=(0,v.d2)(),{data:q,error:W,isSuccess:M,isError:V,isLoading:G,isRefetching:K}=(0,x.KK)({queryKey:[e.table.schema,e.table.name],projectRef:null==F?void 0:F.ref,connectionString:null==F?void 0:F.connectionString,table:e.table,sorts:Z,filters:U,page:L.page,limit:L.rowsPerPage,impersonatedRole:P.role},{keepPreviousData:!0,retryDelay:(e,n)=>{var t;return(n&&(null===(t=n.message)||void 0===t?void 0:t.includes("does not exist"))&&k(e=>({...e,sort:void 0})),e>3)?1/0:5e3},onSuccess(e){C({type:"SET_ROWS_COUNT",payload:e.rows.length})}});return(0,p.useEffect)(()=>{I||z(!0)},[]),(0,p.useEffect)(()=>{I&&C({type:"UPDATE_FILTERS",payload:{}})},[JSON.stringify(U)]),(0,p.useEffect)(()=>{I&&C({type:"UPDATE_SORTS",payload:{}})},[JSON.stringify(Z)]),(0,p.useEffect)(()=>{A.isInitialComplete&&a&&A.table&&(0,w.Tf)(A,a,D,O)},[A.table,A.isInitialComplete,A.gridColumns,JSON.stringify(Z),JSON.stringify(U),a]),(0,p.useEffect)(()=>{C({type:"INIT_CALLBACK",payload:{...e}})},[]),(0,p.useEffect)(()=>{let n=async()=>{let{savedState:n}=await ez({...e,tableId:R},A,C,D,O);(n.sorts||n.filters)&&k(e=>({...e,...n.sorts&&{sort:n.sorts},...n.filters&&{filter:n.filters}}))},t=JSON.stringify(e.table)!==JSON.stringify(A.table);(!A.table||t)&&n()},[A.table,e.table,e.schema]),(0,o.jsxs)("div",{className:"sb-grid",children:[(0,o.jsx)(eC,{table:e.table,sorts:Z,filters:U,onAddRow:i?u:void 0,onAddColumn:i?f:void 0,onImportData:i?_:void 0,headerActions:l,customHeader:c}),s&&void 0!==d?(0,o.jsx)(o.Fragment,{children:d}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ed,{ref:T,...r,rows:null!==(n=null==q?void 0:q.rows)&&void 0!==n?n:[],error:W,isLoading:G,isSuccess:M,isError:V,filters:U,setParams:k,updateRow:h,onAddRow:u,onImportData:_,onEditForeignKeyColumnValue:N}),(0,o.jsx)(H,{isRefetching:K}),(0,o.jsx)(S,{gridRef:T})]}),I&&(0,g.createPortal)((0,o.jsx)(er.q4,{rows:null!==(t=null==q?void 0:q.rows)&&void 0!==t?t:[]}),document.body)]})};var ek=t(80435),eZ=t(25733),eU=t(68871),eP=t(18545),eF=t(61371),eq=t(38591),eW=t(11354),eM=t(45077),eV=t(17172),eG=t(82435),eK=t(66593),eB=t(16826),eY=t(27775);/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let e$=(0,t(52186).Z)("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]);var eQ=t(39097),eH=t.n(eQ),eJ=t(34420),eX=t(53449),e0=t(49521),e1=t(60028),e2=t(26764),e5=t(52903),e4=t(92270),e3=t(40654),e7=t(61786),e8=t(73831),e6=t(3696),e9=e=>{var n;let{table:t}=e,a=(0,T.Z)(null==t?void 0:t.id),{ref:r}=(0,m.UO)(),{project:l}=(0,v.d2)(),{data:s=[]}=(0,e5.U)({projectRef:null==l?void 0:l.ref}),c=(null==a?void 0:a.type)===L.l.TABLE,d=(null==a?void 0:a.type)===L.l.MATERIALIZED_VIEW,f=(null==a?void 0:a.type)===L.l.VIEW,h=(null==a?void 0:a.type)===L.l.FOREIGN_TABLE,g=(0,e3.N)("realtime:all"),x=eW.F.includes(t.schema),{mutate:y}=(0,e4.V)({onError:e=>{u.ZP.error("Failed to toggle RLS: ".concat(e.message))},onSettled:()=>{K()}}),[b,j]=(0,p.useState)(!1),[w,E]=(0,p.useState)(!1),[N,_]=(0,p.useState)(!1),R=null==l?void 0:l.ref,{data:S}=(0,e0.r)({projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),C=(null!=S?S:[]).filter(e=>e.schema===t.schema&&e.table===t.name),{data:A}=(0,e1.z)({projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),I=(null!=A?A:[]).find(e=>"supabase_realtime"===e.name),z=null!==(n=null==I?void 0:I.tables)&&void 0!==n?n:[],D=z.some(e=>e.id===(null==t?void 0:t.id)),{mutate:O,isLoading:k}=(0,e2.u)({onSuccess:()=>{j(!1)},onError:e=>{u.ZP.error("Failed to toggle realtime for ".concat(t.name,": ").concat(e.message))}}),Z=(0,eE.Xo)(i.KA.TENANT_SQL_ADMIN_WRITE,"tables"),U=(0,eE.Xo)(i.KA.TENANT_SQL_ADMIN_WRITE,"columns"),P="public"===t.schema,{hasLint:F,matchingLint:q}=(0,eJ.R)(t.name,"security_definer_view",["ERROR","WARN"],s,t.schema),{hasLint:W,matchingLint:M}=(0,eJ.R)(t.name,"materialized_view_in_api",["ERROR","WARN"],s,t.schema),G=async()=>{if(!l)return console.error("Project is required");if(!I)return console.error("Unable to find realtime publication");let e=z.some(e=>e.id==t.id)?z.filter(e=>e.id!=t.id).map(e=>"".concat(e.schema,".").concat(e.name)):["".concat(t.schema,".").concat(t.name)].concat(z.map(e=>"".concat(e.schema,".").concat(e.name)));O({projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString,id:I.id,tables:e})},K=()=>{_(!1)},Y=async()=>{let e={id:t.id,rls_enabled:!t.rls_enabled};y({projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString,id:e.id,schema:t.schema,payload:e})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[!Z&&!U&&(0,o.jsxs)(eu.fC,{delayDuration:0,children:[(0,o.jsx)(eu.xz,{className:"w-full",children:(0,o.jsx)("div",{className:"border border-strong rounded bg-overlay-hover px-3 py-1 text-xs",children:"Viewing as read-only"})}),(0,o.jsx)(eu.h_,{children:(0,o.jsxs)(eu.VY,{side:"bottom",children:[(0,o.jsx)(eu.Eh,{className:"radix-tooltip-arrow"}),(0,o.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,o.jsx)("span",{className:"text-xs text-foreground",children:"You need additional permissions to manage your project's data"})})]})})]}),c?t.rls_enabled?(0,o.jsx)(o.Fragment,{children:C.length<1&&!x?(0,o.jsxs)(eu.fC,{delayDuration:0,children:[(0,o.jsx)(eu.xz,{asChild:!0,className:"w-full",children:(0,o.jsx)(V.z,{asChild:!0,type:"default",className:"group",icon:(0,o.jsx)(eK.Z,{strokeWidth:1.5,className:"text-foreground-muted"}),children:(0,o.jsx)(eH(),{passHref:!0,href:"/project/".concat(R,"/auth/policies?search=").concat(t.id,"&schema=").concat(t.schema),children:"Add RLS policy"})})}),(0,o.jsx)(eu.h_,{children:(0,o.jsxs)(eu.VY,{side:"bottom",children:[(0,o.jsx)(eu.Eh,{className:"radix-tooltip-arrow"}),(0,o.jsx)("div",{className:"rounded bg-alternative py-1 px-2 leading-none shadow border border-background",children:(0,o.jsxs)("div",{className:"text-xs text-foreground p-1 leading-relaxed",children:[(0,o.jsx)("p",{children:"RLS is enabled for this table, but no policies are set. "}),(0,o.jsxs)("p",{children:["Select queries will return an ",(0,o.jsx)("u",{children:"empty array"})," of results."]})]})})]})})]}):(0,o.jsx)(V.z,{asChild:!0,type:C.length<1&&!x?"warning":"default",className:"group",icon:x||C.length>0?(0,o.jsx)("span",{className:"text-right text-xs rounded-xl px-[6px] bg-foreground-lighter/30 text-brand-1100",children:C.length}):(0,o.jsx)(eK.Z,{strokeWidth:1.5}),children:(0,o.jsxs)(eH(),{passHref:!0,href:"/project/".concat(R,"/auth/policies?search=").concat(t.id,"&schema=").concat(t.schema),children:["Auth ",C.length>1?"policies":"policy"]})})}):(0,o.jsxs)(e7.J2,{open:w,onOpenChange:()=>E(!w),modal:!1,children:[(0,o.jsx)(e7.xo,{asChild:!0,children:(0,o.jsx)(V.z,{type:"warning",icon:(0,o.jsx)(eB.Z,{strokeWidth:1.5}),children:"RLS disabled"})}),(0,o.jsxs)(e7.yk,{className:"min-w-[395px] text-sm",align:"end",children:[(0,o.jsxs)("h3",{className:"flex items-center gap-2",children:[(0,o.jsx)(eB.Z,{size:16})," Row Level Security (RLS)"]}),(0,o.jsxs)("div",{className:"grid gap-2 mt-4 text-foreground-light text-sm",children:[(0,o.jsx)("p",{children:"You can restrict and control who can read, write and update data in this table using Row Level Security."}),(0,o.jsx)("p",{children:"With RLS enabled, anonymous users will not be able to read/write data in the table."}),!x&&(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsx)(V.z,{type:"default",onClick:()=>_(!N),children:"Enable RLS for this table"})})]})]})]}):null,f&&F&&(0,o.jsxs)(e7.J2,{open:w,onOpenChange:()=>E(!w),modal:!1,children:[(0,o.jsx)(e7.xo,{asChild:!0,children:(0,o.jsx)(V.z,{type:"warning",icon:(0,o.jsx)(eY.Z,{strokeWidth:1.5}),children:"Security Definer view"})}),(0,o.jsxs)(e7.yk,{className:"min-w-[395px] text-sm",align:"end",children:[(0,o.jsxs)("h3",{className:"flex items-center gap-2",children:[(0,o.jsx)(eY.Z,{size:16})," Secure your View"]}),(0,o.jsxs)("div",{className:"grid gap-2 mt-4 text-foreground-light text-sm",children:[(0,o.jsx)("p",{children:"This view is defined with the Security Definer property, giving it permissions of the view's creator (Postgres), rather than the permissions of the querying user."}),(0,o.jsx)("p",{children:"Since this view is in the public schema, it is accessible via your project's APIs."}),(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsx)(V.z,{type:"default",asChild:!0,children:(0,o.jsx)(eH(),{target:"_blank",href:"/project/".concat(r,"/advisors/security?preset=").concat(null==q?void 0:q.level,"&id=").concat(null==q?void 0:q.cache_key),children:"Learn more"})})})]})]})]}),d&&W&&(0,o.jsxs)(e7.J2,{open:w,onOpenChange:()=>E(!w),modal:!1,children:[(0,o.jsx)(e7.xo,{asChild:!0,children:(0,o.jsx)(V.z,{type:"warning",icon:(0,o.jsx)(eY.Z,{strokeWidth:1.5}),children:"Security Definer view"})}),(0,o.jsxs)(e7.yk,{className:"min-w-[395px] text-sm",align:"end",children:[(0,o.jsxs)("h3",{className:"flex items-center gap-2",children:[(0,o.jsx)(eY.Z,{size:16})," Secure your View"]}),(0,o.jsxs)("div",{className:"grid gap-2 mt-4 text-foreground-light text-sm",children:[(0,o.jsx)("p",{children:"This view is defined with the Security Definer property, giving it permissions of the view's creator (Postgres), rather than the permissions of the querying user."}),(0,o.jsx)("p",{children:"Since this view is in the public schema, it is accessible via your project's APIs."}),(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsx)(V.z,{type:"default",asChild:!0,children:(0,o.jsx)(eH(),{target:"_blank",href:"/project/".concat(r,"/advisors/security?preset=").concat(null==M?void 0:M.level,"&id=").concat(null==M?void 0:M.cache_key),children:"Learn more"})})})]})]})]}),h&&"public"===a.schema&&(0,o.jsxs)(e7.J2,{open:w,onOpenChange:()=>E(!w),modal:!1,children:[(0,o.jsx)(e7.xo,{asChild:!0,children:(0,o.jsx)(V.z,{type:"warning",icon:(0,o.jsx)(eY.Z,{strokeWidth:1.5}),children:"Foreign table is accessible via your project's APIs"})}),(0,o.jsxs)(e7.yk,{className:"min-w-[395px] text-sm",align:"end",children:[(0,o.jsxs)("h3",{className:"flex items-center gap-2",children:[(0,o.jsx)(eY.Z,{size:16})," Secure Foreign table"]}),(0,o.jsxs)("div",{className:"grid gap-2 mt-4 text-foreground-light text-sm",children:[(0,o.jsx)("p",{children:"Foreign tables do not enforce RLS. Move them to a private schema not exposed to Postgrest or disable Postgrest."}),(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsx)(V.z,{type:"default",asChild:!0,children:(0,o.jsx)(eH(),{target:"_blank",href:"https://github.com/orgs/supabase/discussions/21647",children:"Learn more"})})})]})]})]}),(0,o.jsx)(e6.Q,{serviceRoleLabel:"postgres"}),c&&g&&(0,o.jsxs)(V.z,{type:"default",icon:(0,o.jsx)(e$,{strokeWidth:1.5,className:D?"text-brand":"text-foreground-muted"}),onClick:()=>j(!0),children:["Realtime ",D?"on":"off"]}),P&&(0,o.jsx)(eX.Z,{section:["entities",t.name]})]}),(0,o.jsx)(B.Z,{visible:b,loading:k,title:"".concat(D?"Disable":"Enable"," realtime for ").concat(t.name),confirmLabel:"".concat(D?"Disable":"Enable"," realtime"),confirmLabelLoading:"".concat(D?"Disabling":"Enabling"," realtime"),onCancel:()=>j(!1),onConfirm:()=>G(),children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("p",{className:"text-sm",children:["Once realtime has been ",D?"disabled":"enabled",", the table will"," ",D?"no longer ":"","broadcast any changes to authorized subscribers."]}),!D&&(0,o.jsxs)("p",{className:"text-sm",children:["You may also select which events to broadcast to subscribers on the"," ",(0,o.jsx)(eH(),{href:"/project/".concat(r,"/database/publications"),className:"text-brand",children:"database publications"})," ","settings."]})]})}),(null==a?void 0:a.type)===L.l.TABLE&&(0,o.jsx)(e8.Z,{danger:t.rls_enabled,visible:N,title:"Confirm to enable Row Level Security",description:"Are you sure you want to enable Row Level Security for this table?",buttonLabel:"Enable RLS",buttonLoadingLabel:"Updating",onSelectCancel:K,onSelectConfirm:Y})]})},ne=t(39459),nn=t(61531),nt=e=>{let{id:n}=e;return(0,o.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,o.jsx)("div",{className:"w-[400px]",children:(0,o.jsx)(nn.Z,{icon:(0,o.jsx)(ne.Z,{strokeWidth:2}),title:"Unable to find your table with ID ".concat(n)})})})},no=t(71283),ni=t(49793),na=t(79534),nr=t(6659),nl=t(82784);let ns=e=>{let{schema:n="public",name:t}=e;return"\n    ".concat(eU.k,"\n\n    select pg_temp.pg_get_tabledef (\n      '").concat(n,"',\n      '").concat(t,"',\n      false,\n      'FKEYS_INTERNAL',\n      'INCLUDE_TRIGGERS'\n    ) as definition\n  ").trim()},nc=function(e){let{projectRef:n,connectionString:t,schema:o,name:i}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,P.cp)({projectRef:n,connectionString:t,sql:ns({schema:o,name:i}),queryKey:["table-definition",o,i]},{select:e=>e.result[0].definition.trim(),...a})},nd=e=>{let{schema:n,name:t}=e;return"\n    select pg_get_viewdef(to_regclass('\"".concat(n,'"."').concat(t,"\"'), true) as definition\n  ").trim()},nu=function(e){let{projectRef:n,connectionString:t,schema:o,name:i}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,P.cp)({projectRef:n,connectionString:t,sql:nd({schema:o,name:i}),queryKey:["view-definition",o,i]},{select:e=>e.result[0].definition.trim(),enabled:void 0!==o&&void 0!==i,...a})};var nm=e=>{let{id:n}=e,{ref:t}=(0,m.UO)(),i=(0,p.useRef)(null),a=(0,p.useRef)(null),{resolvedTheme:r}=(0,nr.F)(),l=(0,T.Z)(n),{project:s}=(0,v.d2)(),c=nu({schema:null==l?void 0:l.schema,name:null==l?void 0:l.name,projectRef:null==s?void 0:s.ref,connectionString:null==s?void 0:s.connectionString},{enabled:(null==l?void 0:l.type)===L.l.VIEW||(null==l?void 0:l.type)===L.l.MATERIALIZED_VIEW}),d=nc({schema:null==l?void 0:l.schema,name:null==l?void 0:l.name,projectRef:null==s?void 0:s.ref,connectionString:null==s?void 0:s.connectionString},{enabled:(null==l?void 0:l.type)===L.l.TABLE}),{data:u,isLoading:f}=(null==l?void 0:l.type)===L.l.VIEW||(null==l?void 0:l.type)===L.l.MATERIALIZED_VIEW?c:d,h=(null==l?void 0:l.type)===L.l.VIEW?"create view ".concat(l.schema,".").concat(l.name," as\n"):(null==l?void 0:l.type)===L.l.MATERIALIZED_VIEW?"create materialized view ".concat(l.schema,".").concat(l.name," as\n"):"",g=e=>{try{return(0,nl.WU)(e,{language:"postgresql",keywordCase:"lower"})}catch(n){return e}},x=(0,p.useMemo)(()=>u?g(h+u):void 0,[u]),y=async(e,n)=>{i.current=e,a.current=n,e.changeViewZones(e=>{e.addZone({afterLineNumber:0,heightInPx:4,domNode:document.createElement("div")})}),await (0,ei.Vs)(500),null==e||e.focus()};return f?(0,o.jsxs)("div",{className:"h-full grid",children:[(0,o.jsx)("div",{className:"p-4",children:(0,o.jsx)(et.A,{})}),(0,o.jsx)("div",{className:"mt-auto",children:(0,o.jsx)(H,{})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex-grow overflow-y-auto border-t border-muted relative",children:[(0,o.jsx)(V.z,{asChild:!0,type:"default",className:"absolute top-2 right-5 z-10",children:(0,o.jsx)(eH(),{href:"/project/".concat(t,"/sql/new?content=").concat(encodeURIComponent(null!=x?x:"")),children:"Open in SQL Editor"})}),(0,o.jsx)(na.default,{className:"monaco-editor",theme:(null==r?void 0:r.includes("dark"))?"vs-dark":"vs",onMount:y,defaultLanguage:"pgsql",value:x,path:"",options:{domReadOnly:!0,readOnly:!0,tabSize:2,fontSize:13,minimap:{enabled:!1},wordWrap:"on",fixedOverflowWidgets:!0}})]}),(0,o.jsx)(H,{})]})},np=e=>{var n,t,r,s,p;let{theme:f="dark",isLoadingSelectedTable:h=!1,selectedTable:g}=e,x=(0,d.useRouter)(),{ref:E,id:N}=(0,m.UO)(),{project:_}=(0,v.d2)(),R=(0,j._2)(),S=(0,b.z6)(),[{view:C="data"}]=(0,y.x)(),A=(0,eE.Xo)(i.KA.TENANT_SQL_ADMIN_WRITE,"tables"),I=(0,eE.Xo)(i.KA.TENANT_SQL_ADMIN_WRITE,"columns"),z=!A&&!I,D=(0,ni.Ei)({schemaName:null==g?void 0:g.schema,tableName:null==g?void 0:g.name}),O=(0,a.NL)(),{mutate:k}=(0,eF.Gz)({async onMutate(e){let{projectRef:n,table:t,configuration:o,payload:i}=e,a=new Set(Object.keys(o.identifiers)),r=eP.M.query(n,[t.schema,t.name,{table:{name:t.name,schema:t.schema}}]);await O.cancelQueries(r);let l=O.getQueriesData(r);return O.setQueriesData(r,e=>{var n;return{result:null!==(n=null==e?void 0:e.result.map(e=>Object.entries(e).filter(e=>{let[n]=e;return a.has(n)}).every(e=>{let[n,t]=e;return t===o.identifiers[n]})?{...e,...i}:e))&&void 0!==n?n:[]}}),{previousRowsQueries:l}},onError(e,n,t){let{previousRowsQueries:o}=t;o.forEach(e=>{let[n,t]=e;t&&O.setQueriesData(n,t),O.invalidateQueries(n)}),Q(e)}}),{data:Z}=(0,eo.X)({projectRef:null==_?void 0:_.ref,connectionString:null==_?void 0:_.connectionString,schema:null==g?void 0:g.schema}),U=Z||[],P=(0,T.Z)(null==g?void 0:g.id),F=(0,eq.Z)(null!==(n=null==g?void 0:g.columns)&&void 0!==n?n:eM.Z6);if(h)return(0,o.jsx)(eZ.Z,{});if(c()(g))return(0,o.jsx)(nt,{id:Number(N)});let q=(null==P?void 0:P.type)===L.l.VIEW||(null==P?void 0:P.type)===L.l.MATERIALIZED_VIEW,W=(null==P?void 0:P.type)===L.l.TABLE,M=(null==P?void 0:P.type)===L.l.FOREIGN_TABLE,G=eW.F.includes(null!==(t=null==P?void 0:P.schema)&&void 0!==t?t:""),K=W&&!G,B=("relationships"in g&&g.relationships||[]).map(e=>{var n;let t=U.find(n=>n.id===e.id);return{...e,deletion_action:null!==(n=null==t?void 0:t.deletion_action)&&void 0!==n?n:eU.N.NO_ACTION}}),Y=q||M?(0,w.NK)({table:g,columns:null!==(p=g.columns)&&void 0!==p?p:[],primaryKeys:[],relationships:[]}):(0,w.NK)({table:g,columns:null!==(r=g.columns)&&void 0!==r?r:[],primaryKeys:null!==(s=g.primary_keys)&&void 0!==s?s:[],relationships:B},D),$="".concat(g.schema,"_").concat(g.name),Q=e=>{var n,t;u.ZP.error(null!==(t=null!==(n=null==e?void 0:e.details)&&void 0!==n?n:null==e?void 0:e.message)&&void 0!==t?t:e)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eD,{theme:f,gridProps:{height:"100%"},projectRef:E,editable:!z&&K,schema:g.schema,table:Y,headerActions:(0,o.jsx)(e9,{table:g,canEditViaTableEditor:K}),onAddColumn:R.onAddColumn,onEditColumn:e=>{let n=l()(F.current,{name:e});n?R.onEditColumn(n):u.ZP.error("Unable to find column ".concat(e," in ").concat(null==g?void 0:g.name))},onDeleteColumn:e=>{var n;let t=l()(null!==(n=F.current)&&void 0!==n?n:[],{name:e});t?R.onDeleteColumn(t):u.ZP.error("Unable to find column ".concat(e," in ").concat(null==g?void 0:g.name))},onAddRow:R.onAddRow,updateTableRow:(e,n)=>{var t;if(!_)return;let i="columns"in g&&(null===(t=g.columns)||void 0===t?void 0:t.filter(e=>{var n;return(null!==(n=null==e?void 0:e.enums)&&void 0!==n?n:[]).length>0&&"array"===e.data_type.toLowerCase()}).map(e=>e.name))||[],a={};if(g.primary_keys.forEach(n=>a[n.name]=e[n.name]),0===Object.keys(a).length)return(0,eG.Am)({variant:"default",style:{flexDirection:"column"},title:(0,o.jsx)(ek.U,{className:"text-foreground [&>p]:m-0",content:"Unable to update row as table has no primary keys"}),description:(0,o.jsx)(ek.U,{className:"[&>p]:m-0",content:"Add a primary key column to your table first to serve as a unique identifier for each row before updating or deleting the row."}),action:(0,o.jsx)("div",{className:"w-full flex gap-x-2 !mx-0 mt-3",children:(0,o.jsx)(V.z,{asChild:!0,type:"outline",icon:(0,o.jsx)(eV.Z,{}),children:(0,o.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/database/tables#primary-keys",children:"Documentation"})})})});k({projectRef:_.ref,connectionString:_.connectionString,table:Y,configuration:{identifiers:a},payload:n,enumArrayColumns:i,impersonatedRole:S()})},onEditRow:R.onEditRow,onImportData:R.onImportData,onError:Q,onExpandJSONEditor:(e,n)=>{R.onExpandJSONEditor({column:e,row:n,value:JSON.stringify(n[e])||""})},onExpandTextEditor:(e,n)=>{R.onExpandTextEditor(e,n)},onEditForeignKeyColumnValue:R.onEditForeignKeyColumnValue,showCustomChildren:(q||W)&&"definition"===C,customHeader:(q||W)&&"definition"===C?(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsxs)("p",{children:["SQL Definition of ",(0,o.jsx)("code",{className:"text-sm",children:g.name})," "]}),(0,o.jsx)("p",{className:"text-foreground-light text-sm",children:"(Read only)"})]}):null,children:(q||W)&&(0,o.jsx)(nm,{id:null==g?void 0:g.id})},$),void 0!==R.selectedSchemaName&&(0,o.jsx)(no.Z,{editable:!z&&K,selectedTable:g,onTableCreated:e=>{x.push("/project/".concat(E,"/editor/").concat(e.id))}})]})};t(62456)},53449:function(e,n,t){var o=t(52322),i=t(30339),a=t(16289),r=t(32079);n.Z=e=>{let{section:n}=e,t=(0,a.WZ)();return(0,o.jsx)(r.z,{size:"tiny",type:"default",onClick:()=>{n&&t.setActiveDocsSection(n),t.setShowProjectApiDocs(!0)},icon:(0,o.jsx)(i.Z,{strokeWidth:1.5,className:"text-foreground-muted"}),children:"API Docs"})}},55600:function(e,n,t){t.d(n,{x:function(){return a}});var o=t(52322),i=t(54383);let a=e=>{let{children:n,className:t}=e;return(0,o.jsx)("div",{className:(0,i.cn)("flex min-h-9 overflow-hidden items-center px-2 w-full border-t",t),children:n})}},48699:function(e,n,t){var o=t(52322),i=t(6277);n.Z=e=>{let{max:n=100,value:t=0,barClass:a="bg-foreground",bgClass:r="",type:l="vertical",borderClass:s="",labelBottom:c="",labelBottomClass:d="tabular-nums",labelTop:u="",labelTopClass:m=""}=e;if("horizontal"===l){let e=Number(t/n*100),l=c||u;return(0,o.jsxs)("div",{className:"flex flex-col w-full",children:[l&&(0,o.jsxs)("div",{className:"flex align-baseline justify-between pb-1 space-x-8",children:[(0,o.jsx)("p",{className:(0,i.default)("text-foreground text-sm truncate capitalize-sentence",u.length>0&&"max-w-[75%]",d),children:c}),(0,o.jsx)("p",{className:(0,i.default)("text-foreground-light text-sm",m),children:u})]}),(0,o.jsx)("div",{className:"relative rounded h-1 overflow-hidden w-full border p-0 ".concat(r||"bg-surface-400"," ").concat(s||"border-none"),children:(0,o.jsx)("div",{className:"absolute rounded inset-x-0 bottom-0 h-1 ".concat(a," transition-all"),style:{width:"".concat(e,"%")}})})]})}{let e=Number(t/n*35);return e<2&&(e=2),(0,o.jsx)("div",{className:"relative rounded w-5 overflow-hidden border p-1 ".concat(r||"bg-gray-400"," ").concat(s||"border-none"),style:{height:35},children:(0,o.jsx)("div",{className:"absolute inset-x-0 bottom-0 w-5 ".concat(a),style:{height:e}})})}}},49521:function(e,n,t){t.d(n,{r:function(){return l}});var o=t(36492),i=t(31696),a=t(11596);async function r(e,n){let{projectRef:t,connectionString:o,schema:a}=e;if(!t)throw Error("projectRef is required");let r=new Headers;o&&r.set("x-connection-encrypted",o);let{data:l,error:s}=await (0,i.U2)("/platform/pg-meta/{ref}/policies",{params:{header:{"x-connection-encrypted":o},path:{ref:t},query:{included_schemas:a||"",excluded_schemas:""}},headers:r,signal:n});return s&&(0,i.S3)(s),l}let l=function(e){let{projectRef:n,connectionString:t,schema:i}=e,{enabled:l=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.a)(a.R.list(n,i),e=>{let{signal:o}=e;return r({projectRef:n,connectionString:t,schema:i},o)},{enabled:l&&void 0!==n,...s})}},11596:function(e,n,t){t.d(n,{R:function(){return o}});let o={list:(e,n)=>["projects",e,"database-policies",n].filter(Boolean)}},54813:function(e,n,t){t.d(n,{Z:function(){return o}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,t(52186).Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},30339:function(e,n,t){t.d(n,{Z:function(){return o}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,t(52186).Z)("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]])},17747:function(e,n,t){t.d(n,{Z:function(){return o}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,t(52186).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},66593:function(e,n,t){t.d(n,{Z:function(){return o}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,t(52186).Z)("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},98402:function(e,n,t){t.d(n,{Z:function(){return C}});var o={};t.r(o),t.d(o,{create:function(){return E},list:function(){return y},pgFunctionArrayZod:function(){return v},pgFunctionCreateZod:function(){return j},pgFunctionDeleteZod:function(){return R},pgFunctionOptionalZod:function(){return x},pgFunctionUpdateZod:function(){return N},pgFunctionZod:function(){return g},remove:function(){return S},retrieve:function(){return b},update:function(){return _}});var i=t(56124);let a='\n-- Can\'t use pg_authid here since some managed Postgres providers don\'t expose it\n-- https://github.com/supabase/postgres-meta/issues/212\n\nselect\n  r.oid :: int8 as id,\n  rolname as name,\n  rolsuper as "isSuperuser",\n  rolcreatedb as "canCreateDb",\n  rolcreaterole as "canCreateRole",\n  rolinherit as "inheritRole",\n  rolcanlogin as "canLogin",\n  rolreplication as "isReplicationRole",\n  rolbypassrls as "canBypassRls",\n  (\n    select\n      count(*)\n    from\n      pg_stat_activity\n    where\n      r.rolname = pg_stat_activity.usename\n  ) as "activeConnections",\n  case when rolconnlimit = -1 then current_setting(\'max_connections\') :: int8\n       else rolconnlimit\n  end as "connectionLimit",\n  rolvaliduntil as "validUntil",\n  coalesce(r_config.role_configs, \'{}\') as config\nfrom\n  pg_roles r\n  left join (\n    select\n      oid,\n      jsonb_object_agg(param, value) filter (where param is not null) as role_configs\n    from\n      (\n        select\n          oid,\n          (string_to_array(unnest(rolconfig), \'=\'))[1] as param,\n          (string_to_array(unnest(rolconfig), \'=\'))[2] as value\n        from\n          pg_roles\n      ) as _\n    group by\n      oid\n  ) r_config on r_config.oid = r.oid\n';var r=t(30195);let l=r.z.object({id:r.z.number(),name:r.z.string(),isSuperuser:r.z.boolean(),canCreateDb:r.z.boolean(),canCreateRole:r.z.boolean(),inheritRole:r.z.boolean(),canLogin:r.z.boolean(),isReplicationRole:r.z.boolean(),canBypassRls:r.z.boolean(),activeConnections:r.z.number(),connectionLimit:r.z.number(),validUntil:r.z.union([r.z.string(),r.z.null()]),config:r.z.record(r.z.string(),r.z.string())}),s=r.z.array(l),c=r.z.optional(l),d=["information_schema","pg_catalog","pg_toast"],u="\n-- Adapted from information_schema.schemata\n\nselect\n  n.oid::int8 as id,\n  n.nspname as name,\n  u.rolname as owner\nfrom\n  pg_namespace n,\n  pg_roles u\nwhere\n  n.nspowner = u.oid\n  and (\n    pg_has_role(n.nspowner, 'USAGE')\n    or has_schema_privilege(n.oid, 'CREATE, USAGE')\n  )\n  and not pg_catalog.starts_with(n.nspname, 'pg_temp_')\n  and not pg_catalog.starts_with(n.nspname, 'pg_toast_temp_')\n",m=r.z.object({id:r.z.number(),name:r.z.string(),owner:r.z.string()}),p=r.z.array(m),f=r.z.optional(m),h="\n-- CTE with sane arg_modes, arg_names, and arg_types.\n-- All three are always of the same length.\n-- All three include all args, including OUT and TABLE args.\nwith functions as (\n  select\n    *,\n    -- proargmodes is null when all arg modes are IN\n    coalesce(\n      p.proargmodes,\n      array_fill('i'::text, array[cardinality(coalesce(p.proallargtypes, p.proargtypes))])\n    ) as arg_modes,\n    -- proargnames is null when all args are unnamed\n    coalesce(\n      p.proargnames,\n      array_fill(''::text, array[cardinality(coalesce(p.proallargtypes, p.proargtypes))])\n    ) as arg_names,\n    -- proallargtypes is null when all arg modes are IN\n    coalesce(p.proallargtypes, p.proargtypes) as arg_types,\n    array_cat(\n      array_fill(false, array[pronargs - pronargdefaults]),\n      array_fill(true, array[pronargdefaults])) as arg_has_defaults\n  from\n    pg_proc as p\n  where\n    p.prokind = 'f'\n)\nselect\n  f.oid::int8 as id,\n  n.nspname as schema,\n  f.proname as name,\n  l.lanname as language,\n  case\n    when l.lanname = 'internal' then ''\n    else f.prosrc\n  end as definition,\n  case\n    when l.lanname = 'internal' then f.prosrc\n    else pg_get_functiondef(f.oid)\n  end as complete_statement,\n  coalesce(f_args.args, '[]') as args,\n  pg_get_function_arguments(f.oid) as argument_types,\n  pg_get_function_identity_arguments(f.oid) as identity_argument_types,\n  f.prorettype::int8 as return_type_id,\n  pg_get_function_result(f.oid) as return_type,\n  nullif(rt.typrelid::int8, 0) as return_type_relation_id,\n  f.proretset as is_set_returning_function,\n  case\n    when f.provolatile = 'i' then 'IMMUTABLE'\n    when f.provolatile = 's' then 'STABLE'\n    when f.provolatile = 'v' then 'VOLATILE'\n  end as behavior,\n  f.prosecdef as security_definer,\n  f_config.config_params as config_params\nfrom\n  functions f\n  left join pg_namespace n on f.pronamespace = n.oid\n  left join pg_language l on f.prolang = l.oid\n  left join pg_type rt on rt.oid = f.prorettype\n  left join (\n    select\n      oid,\n      jsonb_object_agg(param, value) filter (where param is not null) as config_params\n    from\n      (\n        select\n          oid,\n          (string_to_array(unnest(proconfig), '='))[1] as param,\n          (string_to_array(unnest(proconfig), '='))[2] as value\n        from\n          functions\n      ) as t\n    group by\n      oid\n  ) f_config on f_config.oid = f.oid\n  left join (\n    select\n      oid,\n      jsonb_agg(jsonb_build_object(\n        'mode', t2.mode,\n        'name', name,\n        'type_id', type_id,\n        'has_default', has_default\n      )) as args\n    from\n      (\n        select\n          oid,\n          unnest(arg_modes) as mode,\n          unnest(arg_names) as name,\n          unnest(arg_types)::int8 as type_id,\n          unnest(arg_has_defaults) as has_default\n        from\n          functions\n      ) as t1,\n      lateral (\n        select\n          case\n            when t1.mode = 'i' then 'in'\n            when t1.mode = 'o' then 'out'\n            when t1.mode = 'b' then 'inout'\n            when t1.mode = 'v' then 'variadic'\n            else 'table'\n          end as mode\n      ) as t2\n    group by\n      t1.oid\n  ) f_args on f_args.oid = f.oid\n",g=r.z.object({id:r.z.number(),schema:r.z.string(),name:r.z.string(),language:r.z.string(),definition:r.z.string(),complete_statement:r.z.string(),args:r.z.array(r.z.object({mode:r.z.union([r.z.literal("in"),r.z.literal("out"),r.z.literal("inout"),r.z.literal("variadic"),r.z.literal("table")]),name:r.z.string(),type_id:r.z.number(),has_default:r.z.boolean()})),argument_types:r.z.string(),identity_argument_types:r.z.string(),return_type_id:r.z.number(),return_type:r.z.string(),return_type_relation_id:r.z.union([r.z.number(),r.z.null()]),is_set_returning_function:r.z.boolean(),behavior:r.z.union([r.z.literal("IMMUTABLE"),r.z.literal("STABLE"),r.z.literal("VOLATILE")]),security_definer:r.z.boolean(),config_params:r.z.union([r.z.record(r.z.string(),r.z.string()),r.z.null()])}),v=r.z.array(g),x=r.z.optional(g);function y(){var e,n;let{includeSystemSchemas:t=!1,includedSchemas:o,excludedSchemas:a,limit:r,offset:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s="\n    with f as (\n      ".concat(h,"\n    )\n    select\n      f.*\n    from f\n  "),c=(e=a,((n=t?void 0:d)&&(e=n.concat(null!=e?e:[])),null==o?void 0:o.length)?"IN (".concat(o.map(i.i0).join(","),")"):(null==e?void 0:e.length)?"NOT IN (".concat(e.map(i.i0).join(","),")"):"");return c&&(s+=" where schema ".concat(c)),r&&(s="".concat(s," limit ").concat(r)),l&&(s="".concat(s," offset ").concat(l)),{sql:s,zod:v}}function b(e){let{id:n,name:t,schema:o="public",args:a=[]}=e;if(n)return{sql:"\n      with f as (\n        ".concat(h,"\n      )\n      select\n        f.*\n      from f where id = ").concat((0,i.i0)(n),";"),zod:x};if(t&&o&&a)return{sql:"with f as (\n      ".concat(h,"\n    )\n    select\n      f.*\n    from f join pg_proc as p on id = p.oid where schema = ").concat((0,i.i0)(o)," and name = ").concat((0,i.i0)(t)," and p.proargtypes::text = ").concat(a.length?"(\n          select string_agg(type_oid::text, ' ') from (\n            select (\n              split_args.arr[\n                array_length(\n                  split_args.arr,\n                  1\n                )\n              ]::regtype::oid\n            ) as type_oid from (\n              select string_to_array(\n                unnest(\n                  array[".concat(a.map(i.i0),"]\n                ),\n                ' '\n              ) as arr\n            ) as split_args\n          ) args\n        )"):(0,i.i0)("")),zod:x};throw Error("Must provide either id or name and schema")}let j=r.z.object({name:r.z.string(),definition:r.z.string(),args:r.z.array(r.z.string()).optional(),behavior:r.z.enum(["IMMUTABLE","STABLE","VOLATILE"]).optional(),config_params:r.z.record(r.z.string(),r.z.string()).optional(),schema:r.z.string().optional(),language:r.z.string().optional(),return_type:r.z.string().optional(),security_definer:r.z.boolean().optional()});function w(e){let{name:n,schema:t,args:o,definition:a,return_type:r,language:l,behavior:s,security_definer:c,config_params:d}=e,{replace:u=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"\n    CREATE ".concat(u?"OR REPLACE":""," FUNCTION ").concat((0,i.yR)(t),".").concat((0,i.yR)(n),"(").concat((null==o?void 0:o.join(", "))||"",")\n    RETURNS ").concat(r,"\n    AS ").concat((0,i.i0)(a),"\n    LANGUAGE ").concat(l,"\n    ").concat(s,"\n    CALLED ON NULL INPUT\n    ").concat(c?"SECURITY DEFINER":"SECURITY INVOKER","\n    ").concat(d?Object.entries(d).map(e=>{let[n,t]=e;return"SET ".concat(n," ").concat("FROM CURRENT"===t[0]?"FROM CURRENT":"TO "+t)}).join("\n"):"",";\n  ")}function E(e){let{name:n,schema:t="public",args:o=[],definition:i,return_type:a="void",language:l="sql",behavior:s="VOLATILE",security_definer:c=!1,config_params:d={}}=e;return{sql:w({name:n,schema:t,args:o,definition:i,return_type:a,language:l,behavior:s,security_definer:c,config_params:d}),zod:r.z.void()}}let N=r.z.object({name:r.z.string().optional(),schema:r.z.string().optional(),definition:r.z.string().optional()});function _(e,n){var t;let{name:o,schema:a,definition:l}=n,s=e.argument_types.split(", "),c=e.identity_argument_types,d="string"==typeof l?w({...e,definition:l,args:s,config_params:null!==(t=e.config_params)&&void 0!==t?t:{}},{replace:!0}):"",u=o&&o!==e.name?"ALTER FUNCTION ".concat((0,i.yR)(e.schema),".").concat((0,i.yR)(e.name),"(").concat(c,") RENAME TO ").concat((0,i.yR)(o),";"):"",m=a&&a!==e.schema?"ALTER FUNCTION ".concat((0,i.yR)(e.schema),".").concat((0,i.yR)(o||e.name),"(").concat(c,")  SET SCHEMA ").concat((0,i.yR)(a),";"):"";return{sql:"\n    DO LANGUAGE plpgsql $$\n    BEGIN\n      IF ".concat("string"==typeof l?"TRUE":"FALSE"," THEN\n        ").concat(d,"\n\n        IF (\n          SELECT id\n          FROM (").concat(h,") AS f\n          WHERE f.schema = ").concat((0,i.i0)(e.schema),"\n          AND f.name = ").concat((0,i.i0)(e.name),"\n          AND f.identity_argument_types = ").concat((0,i.i0)(c),"\n        ) != ").concat(e.id," THEN\n          RAISE EXCEPTION 'Cannot find function \"").concat(e.schema,'"."').concat(e.name,'"(').concat(c,")';\n        END IF;\n      END IF;\n\n      ").concat(u,"\n\n      ").concat(m,"\n    END;\n    $$;\n  "),zod:r.z.void()}}let R=r.z.object({cascade:r.z.boolean().default(!1).optional()});function S(e){let{cascade:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{sql:"DROP FUNCTION ".concat((0,i.yR)(e.schema),".").concat((0,i.yR)(e.name),"\n  (").concat(e.identity_argument_types,")\n  ").concat(n?"CASCADE":"RESTRICT",";"),zod:r.z.void()}}var C={roles:{list:function(){let{includeDefaultRoles:e=!1,limit:n,offset:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o="\nwith\n  roles as (".concat(a,")\nselect\n  *\nfrom\n  roles\nwhere\n  true\n");return e||(o+=" and not pg_catalog.starts_with(name, 'pg_')"),n&&(o+=" limit ".concat(n)),t&&(o+=" offset ".concat(t)),{sql:o,zod:s}},retrieve:function(e){let{id:n,name:t}=e;return n?{sql:"".concat(a," where r.oid = ").concat((0,i.i0)(n),";"),zod:c}:{sql:"".concat(a," where rolname = ").concat((0,i.i0)(t),";"),zod:c}},create:function(e){let{name:n,isSuperuser:t=!1,canCreateDb:o=!1,canCreateRole:a=!1,inheritRole:r=!0,canLogin:l=!1,isReplicationRole:s=!1,canBypassRls:c=!1,connectionLimit:d=-1,password:u,validUntil:m,memberOf:p=[],members:f=[],admins:h=[],config:g={}}=e;return{sql:"\ncreate role ".concat((0,i.yR)(n),"\n  ").concat(t?"superuser":"","\n  ").concat(o?"createdb":"","\n  ").concat(a?"createrole":"","\n  ").concat(r?"":"noinherit","\n  ").concat(l?"login":"","\n  ").concat(s?"replication":"","\n  ").concat(c?"bypassrls":"","\n  connection limit ").concat(d,"\n  ").concat(void 0===u?"":"password ".concat((0,i.i0)(u)),"\n  ").concat(void 0===m?"":"valid until ".concat((0,i.i0)(m)),"\n  ").concat(0===p.length?"":"in role ".concat(p.map(i.yR).join(",")),"\n  ").concat(0===f.length?"":"role ".concat(f.map(i.yR).join(",")),"\n  ").concat(0===h.length?"":"admin ".concat(h.map(i.yR).join(",")),"\n  ;\n").concat(Object.entries(g).map(e=>{let[t,o]=e;return"alter role ".concat((0,i.yR)(n)," set ").concat((0,i.yR)(t)," = ").concat((0,i.i0)(o),";")}).join("\n"),"\n")}},update:function(e,n){let{id:t,name:o}=e,{name:a,isSuperuser:r,canCreateDb:l,canCreateRole:s,inheritRole:c,canLogin:d,isReplicationRole:u,canBypassRls:m,connectionLimit:p,password:f,validUntil:h}=n;return{sql:"\ndo $$\ndeclare\n  id oid := ".concat(void 0===t?"".concat((0,i.i0)(o),"::regrole"):(0,i.i0)(t),";\n  old record;\nbegin\n  select * into old from pg_roles where oid = id;\n  if old is null then\n    raise exception 'Cannot find role with id %', id;\n  end if;\n\n  execute(format('alter role %I\n    ").concat(void 0===r?"":r?"superuser":"nosuperuser","\n    ").concat(void 0===l?"":l?"createdb":"nocreatedb","\n    ").concat(void 0===s?"":s?"createrole":"nocreaterole","\n    ").concat(void 0===c?"":c?"inherit":"noinherit","\n    ").concat(void 0===d?"":d?"login":"nologin","\n    ").concat(void 0===u?"":u?"replication":"noreplication","\n    ").concat(void 0===m?"":m?"bypassrls":"nobypassrls","\n    ").concat(void 0===p?"":"connection limit ".concat((0,i.i0)(p)),"\n    ").concat(void 0===f?"":"password ".concat((0,i.i0)(f)),"\n    ").concat(void 0===h?"":"valid until ".concat((0,i.i0)(h)),"\n  ', old.rolname));\n\n  ").concat(void 0===a?"":"\n  -- Using the same name in the rename clause gives an error, so only do it if the new name is different.\n  if new_name != old.nspname then\n    execute(format('alter role %I rename to ".concat((0,i.yR)(a),";', old.nspname));\n  end if;\n  "),"\nend\n$$;\n")}},remove:function(e){let{id:n,name:t}=e,{ifExists:o=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{sql:"\ndo $$\ndeclare\n  id oid := ".concat(void 0===n?"".concat((0,i.i0)(t),"::regrole"):(0,i.i0)(n),";\n  old record;\nbegin\n  select * into old from pg_roles where oid = id;\n  if old is null then\n    raise exception 'Cannot find role with id %', id;\n  end if;\n\n  execute(format('drop role ").concat(o?"if exists":""," %I;', old.rolname));\nend\n$$;\n")}},zod:l},schemas:{list:function(){let{includeSystemSchemas:e=!1,limit:n,offset:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=u;return e||(o="".concat(o," and not (n.nspname in (").concat(d.map(i.i0).join(","),"))")),n&&(o="".concat(o," limit ").concat(n)),t&&(o="".concat(o," offset ").concat(t)),{sql:o,zod:p}},retrieve:function(e){let{id:n,name:t}=e;return n?{sql:"".concat(u," and n.oid = ").concat((0,i.i0)(n),";"),zod:f}:{sql:"".concat(u," and n.nspname = ").concat((0,i.i0)(t),";"),zod:f}},create:function(e){let{name:n,owner:t}=e;return{sql:"create schema ".concat((0,i.yR)(n),"\n  ").concat(void 0===t?"":"authorization ".concat((0,i.yR)(t)),";\n")}},update:function(e,n){let{id:t,name:o}=e,{name:a,owner:r}=n;return{sql:"\ndo $$\ndeclare\n  id oid := ".concat(void 0===t?"".concat((0,i.i0)(o),"::regnamespace"):(0,i.i0)(t),";\n  old record;\n  new_name text := ").concat(void 0===a?null:(0,i.i0)(a),";\n  new_owner text := ").concat(void 0===r?null:(0,i.i0)(r),";\nbegin\n  select * into old from pg_namespace where oid = id;\n  if old is null then\n    raise exception 'Cannot find schema with id %', id;\n  end if;\n\n  if new_owner is not null then\n    execute(format('alter schema %I owner to %I;', old.nspname, new_owner));\n  end if;\n\n  -- Using the same name in the rename clause gives an error, so only do it if the new name is different.\n  if new_name is not null and new_name != old.nspname then\n    execute(format('alter schema %I rename to %I;', old.nspname, new_name));\n  end if;\nend\n$$;\n")}},remove:function(e){let{id:n,name:t}=e,{cascade:o=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{sql:"\ndo $$\ndeclare\n  id oid := ".concat(void 0===n?"".concat((0,i.i0)(t),"::regnamespace"):(0,i.i0)(n),";\n  old record;\n  cascade bool := ").concat((0,i.i0)(o),";\nbegin\n  select * into old from pg_namespace where oid = id;\n  if old is null then\n    raise exception 'Cannot find schema with id %', id;\n  end if;\n\n  execute(format('drop schema %I %s;', old.nspname, case when cascade then 'cascade' else 'restrict' end));\nend\n$$;\n")}},zod:m},functions:o}},56124:function(e,n,t){t.d(n,{WU:function(){return s},yR:function(){return r},i0:function(){return l}});let o=new Set(["AES128","AES256","ALL","ALLOWOVERWRITE","ANALYSE","ANALYZE","AND","ANY","ARRAY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BACKUP","BETWEEN","BINARY","BLANKSASNULL","BOTH","BYTEDICT","CASE","CAST","CHECK","COLLATE","COLUMN","CONSTRAINT","CREATE","CREDENTIALS","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURRENT_USER_ID","DEFAULT","DEFERRABLE","DEFLATE","DEFRAG","DELTA","DELTA32K","DESC","DISABLE","DISTINCT","DO","ELSE","EMPTYASNULL","ENABLE","ENCODE","ENCRYPT","ENCRYPTION","END","EXCEPT","EXPLICIT","FALSE","FETCH","FOR","FOREIGN","FREEZE","FROM","FULL","GLOBALDICT256","GLOBALDICT64K","GRANT","GROUP","GZIP","HAVING","IDENTITY","IGNORE","ILIKE","IN","INITIALLY","INNER","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","LUN","LUNS","LZO","LZOP","MINUS","MOSTLY13","MOSTLY32","MOSTLY8","NATURAL","NEW","NOT","NOTNULL","NULL","NULLS","OFF","OFFLINE","OFFSET","OLD","ON","ONLY","OPEN","OR","ORDER","OUTER","OVERLAPS","PARALLEL","PARTITION","PERCENT","PLACING","PRIMARY","RAW","READRATIO","RECOVER","REFERENCES","REJECTLOG","RESORT","RESTORE","RETURNING","RIGHT","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","SYSDATE","SYSTEM","TABLE","TAG","TDES","TEXT255","TEXT32K","THEN","TO","TOP","TRAILING","TRUE","TRUNCATECOLUMNS","UNION","UNIQUE","USER","USING","VARIADIC","VERBOSE","WALLET","WHEN","WHERE","WINDOW","WITH","WITHOUT"]);function i(e){return e.replace("T"," ").replace("Z","+00")}function a(e,n,t){let o="";for(let[i,a]of(o+=e?" (":"(",n.entries()))o+=(0===i?"":", ")+t(a);return o+")"}function r(e){if(null==e)throw Error("SQL identifier cannot be null or undefined");if(!1===e)return'"f"';if(!0===e)return'"t"';if(e instanceof Date)return'"'.concat(i(e.toISOString()),'"');if(Array.isArray(e)){let n=[];for(let t of e){if(!0===Array.isArray(t))throw TypeError("Nested array to grouped list conversion is not supported for SQL identifier");n.push(r(t))}return n.toString()}if(e===Object(e))throw Error("SQL identifier cannot be an object");let n=String(e).slice(0);if(!0===/^[_a-z][\d$_a-z]*$/.test(n)&&!1==!!o.has(n.toUpperCase()))return n;let t='"';for(let e of n)t+='"'===e?e+e:e;return t+'"'}function l(e){let n,t="";if(null==e)return"NULL";if("bigint"==typeof e)return BigInt(e).toString();if(e===Number.POSITIVE_INFINITY)return"'Infinity'";if(e===Number.NEGATIVE_INFINITY)return"'-Infinity'";if(Number.isNaN(e))return"'NaN'";if("number"==typeof e)return Number(e).toString();if(!1===e)return"'f'";if(!0===e)return"'t'";if(e instanceof Date)return"'".concat(i(e.toISOString()),"'");if(Array.isArray(e)){let n=[];for(let[t,o]of e.entries())!0===Array.isArray(o)?n.push(a(0!==t,o,l)):n.push(l(o));return n.toString()}e===Object(e)?(n="jsonb",t=JSON.stringify(e)):t=String(e).slice(0);let o=!1,r="'";for(let e of t)"'"===e?r+=e+e:"\\"===e?(r+=e+e,o=!0):r+=e;return r+="'",!0===o&&(r="E".concat(r)),n&&(r+="::".concat(n)),r}function s(e){for(var n=arguments.length,t=Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];return function(e,n){let t=0,o="%(%|(\\d+\\$)?[",s=RegExp(o+="ILs])","g");return e.replace(s,(e,o)=>{if("%"===o)return"%";let s=t,c=o.split("$");if(c.length>1&&(s=Number.parseInt(c[0],10)-1,o=c[1]),s<0)throw Error("specified argument 0 but arguments start at 1");if(s>n.length-1)throw Error("too few arguments");return(t=s+1,"I"===o)?r(n[s]):"L"===o?l(n[s]):"s"===o?function e(n){if(null==n)return"";if(!1===n)return"f";if(!0===n)return"t";if(n instanceof Date)return i(n.toISOString());if(Array.isArray(n)){let t=[];for(let[o,i]of n.entries())null!=i&&(!0===Array.isArray(i)?t.push(a(0!==o,i,e)):t.push(e(i)));return t.toString()}return n===Object(n)?JSON.stringify(n):String(n).toString().slice(0)}(n[s]):void 0})}(e,t)}},4419:function(e,n,t){var o=t(52322),i=t(2784),a=t(25001),r=t(71653),l=t(67440),s=t(46318),c=t(70780);n.Z=function(e){let{defaultValue:n,descriptionText:t,error:d,icon:u,inputRef:m,label:p,afterLabel:f,beforeLabel:h,labelOptional:g,layout:v,value:x,actions:y,size:b="medium",validation:j,id:w="",name:E="",...N}=e,_=(0,s.Z)("inputNumber"),{formContextOnChange:R,values:S,errors:C,handleBlur:A,touched:L,fieldLevelValidation:T}=(0,c.G)();S&&!x&&(x=S[w||E]),d||(C&&!d&&(d=C[w||E]),d=L&&L[w||E]?d:void 0),(0,i.useEffect)(()=>{j&&T(w,j(x))},[]);let I=[_.base];return d&&I.push(_.variants.error),d||I.push(_.variants.standard),u&&I.push(_.with_icon),b&&I.push(_.size[b]),N.disabled&&I.push(_.disabled),(0,o.jsx)("div",{className:N.className,children:(0,o.jsx)(a.l,{label:p,afterLabel:f,beforeLabel:h,labelOptional:g,layout:v,id:w,error:d,descriptionText:t,style:N.style,size:b,children:(0,o.jsxs)("div",{className:_.container,children:[(0,o.jsx)("input",{"data-size":b,id:w,name:E,onChange:function(e){N.onChange&&N.onChange(e),R&&R(e),j&&T(w,j(e.target.value))},onBlur:function(e){A&&A(e),N.onBlur&&N.onBlur(e)},type:"number",ref:m,value:x,className:I.join(" "),...N}),u&&(0,o.jsx)(l.Z,{size:b,icon:u}),d||y?(0,o.jsxs)("div",{className:_.actions_container,children:[d&&(0,o.jsx)(r.Z,{size:b}),y&&y]}):null]})})})}},62284:function(e,n,t){t.d(n,{Z:function(){return v}});var o=t(52322),i=t(40538),a=t(35676),r=t.n(a),l=t(2784),s=t(25001),c=t(71653),d=t(67440),u=t(46318),m=t(54383),p=t(70780),f=t(90488);let h=(0,l.createContext)({onChange:e=>{},selected:void 0});function g(e){let{children:n,className:t,buttonClassName:a,descriptionText:f,error:g,icon:v,id:x="",name:y="",label:b,labelOptional:j,layout:w,value:E,onChange:N,onFocus:_,onBlur:R,style:S,size:C="medium",defaultValue:A,validation:L,disabled:T,optionsWidth:I}=e,[z,D]=(0,l.useState)(void 0),[O,k]=(0,l.useState)({}),Z=(0,u.Z)("listbox"),U=(0,l.useRef)(null),{formContextOnChange:P,values:F,errors:q,handleBlur:W,touched:M,fieldLevelValidation:V}=(0,p.G)();F&&!E&&(E=F[x||y],A=F[x||y]),g||(q&&!g&&(g=q[x||y]),g=M&&M[x||y]?g:void 0),(0,l.useEffect)(()=>{void 0!==E&&D(E)},[E]),(0,l.useEffect)(()=>{function e(){var e;document.documentElement.style.setProperty("--width-listbox","".concat(I||(null===(e=U.current)||void 0===e?void 0:e.offsetWidth),"px"))}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,l.useEffect)(()=>{var e;let t=r()(n);function o(e){return t.find(n=>n.props.value===e)}if(E){D(E);let e=o(E);k((null==e?void 0:e.props)?e.props:void 0);return}if(z){let e=o(z);k((null==e?void 0:e.props)?e.props:void 0);return}if(A){D(A);let e=o(z);k((null==e?void 0:e.props)?e.props:void 0);return}k(null===(e=t[0])||void 0===e?void 0:e.props)},[z]);let G=[Z.container,Z.base,a],K=[Z.addOnBefore];return g&&G.push(Z.variants.error),g||G.push(Z.variants.standard),v&&K.push(Z.with_icon),C&&G.push(Z.size[C]),T&&G.push(Z.disabled),(0,o.jsx)(s.l,{label:b,labelOptional:j,layout:w,id:x,error:g,descriptionText:f,className:t,style:S,size:C,children:(0,o.jsxs)(i.fC,{children:[(0,o.jsx)(i.xz,{asChild:!0,disabled:T,children:(0,o.jsxs)("button",{"data-size":C,ref:U,className:(0,m.cn)(G),onBlur:function(e){W&&W(e),R&&R(e)},onFocus:_,name:y,id:x,children:[(0,o.jsxs)("span",{className:(0,m.cn)(K),children:[v&&(0,o.jsx)(d.Z,{size:C,icon:v}),(null==O?void 0:O.addOnBefore)&&(0,o.jsx)(O.addOnBefore,{}),(0,o.jsx)("span",{className:Z.label,children:null==O?void 0:O.label})]}),(0,o.jsx)("span",{className:Z.chevron_container,children:(0,o.jsx)("svg",{className:Z.chevron,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),g&&(0,o.jsx)("div",{className:Z.actions_container,children:g&&(0,o.jsx)(c.Z,{size:C})})]})}),(0,o.jsx)(i.VY,{sideOffset:6,loop:!0,side:"bottom",align:"center",className:Z.options_container,children:(0,o.jsx)("div",{children:(0,o.jsx)(h.Provider,{value:{onChange:function(e){N&&N(e),D(e);let n={};n.target={type:"select",name:y,id:x,value:e,checked:void 0},P&&P(n),L&&V(x,L(e))},selected:z},children:n})})})]})})}g.Option=function(e){let{id:n,value:t,label:a,disabled:r=!1,children:l,className:s="",addOnBefore:c}=e,d=(0,u.Z)("listbox");return(0,o.jsx)(h.Consumer,{children:e=>{let{onChange:a,selected:u}=e,p=u===t;return(0,o.jsxs)(i.ck,{className:(0,m.cn)(d.option,p?d.option_active:" ",r?d.option_disabled:" ",s),onSelect:()=>r?{}:a(t),children:[(0,o.jsxs)("div",{className:d.option_inner,children:[c&&c({active:p,selected:u}),(0,o.jsx)("span",{children:"function"==typeof l?l({active:p,selected:u}):l})]}),p?(0,o.jsx)("span",{className:(0,m.cn)(d.option_check,p?d.option_check_active:""),children:(0,o.jsx)(f.Z,{className:d.option_check_icon,"aria-hidden":"true"})}):null]},n)}})};var v=g}}]);