"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8739],{38739:function(e,t,i){i.d(t,{Z:function(){return ef}});var l=i(52322),a=i(99959),n=i(2784),s=i(62202),r=i(53535),o=i(26211),c=i(3373),d=i(99248),u=i(63175),m=i(45022),p=i(59491),h=i(65644),f=i(29354),b=i(39097),x=i.n(b),v=i(5632),j=i(91547),y=i(85642),g=i(33259),_=i(85945),w=i(48228),k=i(88354),N=i(42654);async function C(e){let{projectRef:t,id:i,isPublic:l,file_size_limit:a,allowed_mime_types:n}=e;if(!t)throw Error("projectRef is required");if(!i)throw Error("Bucket name is requried");let s=await (0,k.v_)("".concat(d.T5,"/storage/").concat(t,"/buckets"),{id:i,public:l,file_size_limit:a,allowed_mime_types:n});if(s.error)throw s.error;return s}let z=function(){let{onSuccess:e,onError:t,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,_.NL)();return(0,w.D)(e=>C(e),{async onSuccess(t,i,a){let{projectRef:n}=i;await l.invalidateQueries(N.m.buckets(n)),await (null==e?void 0:e(t,i,a))},async onError(e,i,l){void 0===t?s.Am.error("Failed to create bucket: ".concat(e.message)):t(e,i,l)},...i})};var Z=i(83690),S=i(62277),E=i(750),O=i(22854),T=i(48869),P=i(11992),R=i(43687),A=i(54383),F=i(62284),I=i(32079),M=e=>{var t;let{visible:i,onClose:r}=e,{ref:o}=(0,a.UO)(),c=(0,v.useRouter)(),{mutate:u,isLoading:m}=z({onSuccess:e=>{s.ZP.success("Successfully created bucket ".concat(e.name)),c.push("/project/".concat(o,"/storage/buckets/").concat(e.name)),r()}}),{data:p}=(0,g.k)({projectRef:o},{enabled:d.Qy}),{value:h,unit:f}=(0,y.Ku)(null!==(t=null==p?void 0:p.fileSizeLimit)&&void 0!==t?t:0),b="".concat(h," ").concat(f),[_,w]=(0,n.useState)(j.b.BYTES),[k,N]=(0,n.useState)(!1),C=async e=>{if(!o)return console.error("Project ref is required");u({projectRef:o,id:e.name,isPublic:e.public,file_size_limit:e.has_file_size_limit?(0,y.Fm)(e.formatted_size_limit,_):null,allowed_mime_types:e.allowed_mime_types.length>0?e.allowed_mime_types.split(",").map(e=>e.trim()):null})};return(0,n.useEffect)(()=>{i&&(w(j.b.BYTES),N(!1))},[i]),(0,l.jsx)(Z.Z,{hideFooter:!0,visible:i,size:"medium",header:"Create storage bucket",onCancel:()=>r(),children:(0,l.jsx)(S.Z,{validateOnBlur:!1,initialValues:{name:"",public:!1,file_size_limit:0,allowed_mime_types:"",has_file_size_limit:!1,formatted_size_limit:0},validate:e=>{let t={};return e.name||(t.name="Please provide a name for your bucket"),e.name&&e.name.endsWith(" ")&&(t.name="The name of the bucket cannot end with a whitespace"),e.has_file_size_limit&&e.formatted_size_limit<0&&(t.formatted_size_limit="File size upload limit has to be at least 0"),"public"===e.name&&(t.name='"public" is a reserved name. Please choose another name'),t},onSubmit:C,children:e=>{let{values:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(Z.Z.Content,{children:[(0,l.jsx)(E.Z,{id:"name",name:"name",type:"text",className:"w-full",layout:"vertical",label:"Name of bucket",labelOptional:"Buckets cannot be renamed once created.",descriptionText:"Only lowercase letters, numbers, dots, and hyphens"}),(0,l.jsxs)("div",{className:"space-y-2 mt-6",children:[(0,l.jsx)(O.Z,{id:"public",name:"public",layout:"flex",label:"Public bucket",descriptionText:"Anyone can read any object without any authorization"}),t.public&&(0,l.jsxs)(T.b,{title:"Public buckets are not protected",variant:"warning",withIcon:!0,children:[(0,l.jsx)("p",{className:"mb-2",children:"Users can read objects in public buckets without any authorization."}),(0,l.jsx)("p",{children:"Row level security (RLS) policies are still required for other operations such as object uploads and deletes."})]})]})]}),(0,l.jsxs)(P.ZP,{open:k,onOpenChange:()=>N(!k),children:[(0,l.jsx)(P.ZP.Trigger,{asChild:!0,children:(0,l.jsxs)("div",{className:"w-full cursor-pointer py-3 px-5 flex items-center justify-between border-t border-default",children:[(0,l.jsx)("p",{className:"text-sm",children:"Additional configuration"}),(0,l.jsx)(R.Z,{size:18,strokeWidth:2,className:(0,A.cn)("text-foreground-light",k&&"rotate-180")})]})}),(0,l.jsx)(P.ZP.Content,{className:"py-4",children:(0,l.jsxs)("div",{className:"w-full space-y-5 px-5",children:[(0,l.jsxs)("div",{className:"space-y-5",children:[(0,l.jsx)(O.Z,{id:"has_file_size_limit",name:"has_file_size_limit",layout:"flex",label:"Restrict file upload size for bucket",descriptionText:"Prevent uploading of file sizes greater than a specified limit"}),t.has_file_size_limit&&(0,l.jsxs)("div",{className:"grid grid-cols-12 col-span-12 gap-x-2 gap-y-1",children:[(0,l.jsx)("div",{className:"col-span-8",children:(0,l.jsx)(E.Z,{type:"number",step:1,id:"formatted_size_limit",name:"formatted_size_limit",disabled:!1,onKeyPress:e=>{(e.charCode<48||e.charCode>57)&&e.preventDefault()},descriptionText:"Equivalent to ".concat((0,y.Fm)(t.formatted_size_limit,_).toLocaleString()," bytes.")})}),(0,l.jsx)("div",{className:"col-span-4",children:(0,l.jsx)(F.Z,{id:"size_limit_units",disabled:!1,value:_,onChange:w,children:Object.values(j.b).map(e=>(0,l.jsx)(F.Z.Option,{label:e,value:e,children:(0,l.jsx)("div",{children:e})},e))})}),d.Qy&&(0,l.jsx)("div",{className:"col-span-12",children:(0,l.jsxs)("p",{className:"text-foreground-light text-sm",children:["Note: The"," ",(0,l.jsx)(x(),{href:"/project/".concat(o,"/settings/storage"),className:"text-brand opacity-80 hover:opacity-100 transition",children:"global upload limit"})," ","takes precedence over this value (",b,")"]})})]})]}),(0,l.jsx)(E.Z,{id:"allowed_mime_types",name:"allowed_mime_types",layout:"vertical",label:"Allowed MIME types",placeholder:"e.g image/jpeg, image/png, audio/mpeg, video/mp4, etc",labelOptional:"Comma separated values",descriptionText:"Wildcards are allowed, e.g. image/*. Leave blank to allow any MIME type."})]})})]}),(0,l.jsx)(Z.Z.Separator,{}),(0,l.jsxs)(Z.Z.Content,{className:"flex items-center space-x-2 justify-end",children:[(0,l.jsx)(I.z,{type:"default",htmlType:"button",disabled:m,onClick:()=>r(),children:"Cancel"}),(0,l.jsx)(I.z,{type:"primary",htmlType:"submit",loading:m,disabled:m,children:"Save"})]})]})}})})};async function B(e){let{projectRef:t,id:i,isPublic:l,file_size_limit:a,allowed_mime_types:n}=e;if(!t)throw Error("projectRef is required");if(!i)throw Error("Bucket name is requried");let s=await (0,k.r$)("".concat(d.T5,"/storage/").concat(t,"/buckets/").concat(i),{public:l,file_size_limit:a,allowed_mime_types:n});if(s.error)throw s.error;return s}let L=function(){let{onSuccess:e,onError:t,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,_.NL)();return(0,w.D)(e=>B(e),{async onSuccess(t,i,a){let{projectRef:n}=i;await l.invalidateQueries(N.m.buckets(n)),await (null==e?void 0:e(t,i,a))},async onError(e,i,l){void 0===t?s.Am.error("Failed to update bucket: ".concat(e.message)):t(e,i,l)},...i})};var W=e=>{var t;let{visible:i,bucket:r,onClose:o}=e,{ref:c}=(0,a.UO)(),{mutate:u,isLoading:m}=L({onSuccess:()=>{s.ZP.success('Successfully updated bucket "'.concat(null==r?void 0:r.name,'"')),o()}}),{data:p}=(0,g.k)({projectRef:c},{enabled:d.Qy}),{value:h,unit:f}=(0,y.Ku)(null!==(t=null==p?void 0:p.fileSizeLimit)&&void 0!==t?t:0),b="".concat(h," ").concat(f),[v,_]=(0,n.useState)(j.b.BYTES),[w,k]=(0,n.useState)(!1),N=async e=>void 0===r?console.error("Bucket is required"):void 0===c?console.error("Project ref is required"):void u({projectRef:c,id:r.id,isPublic:e.public,file_size_limit:e.has_file_size_limit?(0,y.Fm)(e.formatted_size_limit,v):null,allowed_mime_types:e.allowed_mime_types.length>0?e.allowed_mime_types.split(",").map(e=>e.trim()):null});return(0,n.useEffect)(()=>{if(i){var e;let{unit:t}=(0,y.Ku)(null!==(e=null==r?void 0:r.file_size_limit)&&void 0!==e?e:0);_(t),k(!1)}},[i]),(0,l.jsx)(Z.Z,{hideFooter:!0,visible:i,size:"medium",header:'Edit bucket "'.concat(null==r?void 0:r.name,'"'),onCancel:o,children:(0,l.jsx)(S.Z,{validateOnBlur:!1,initialValues:{},validate:e=>{let t={};return e.has_file_size_limit&&e.formatted_size_limit<0&&(t.formatted_size_limit="File size upload limit has to be at least 0"),t},onSubmit:N,children:e=>{let{values:t,resetForm:a}=e;return(0,n.useEffect)(()=>{if(i&&void 0!==r){var e,t,l;let{value:i}=(0,y.Ku)(null!==(e=r.file_size_limit)&&void 0!==e?e:0),n={name:null!==(t=r.name)&&void 0!==t?t:"",public:r.public,file_size_limit:r.file_size_limit,allowed_mime_types:(null!==(l=r.allowed_mime_types)&&void 0!==l?l:[]).join(", "),has_file_size_limit:null!==r.file_size_limit,formatted_size_limit:null!=i?i:0};a({values:n,initialValues:n})}},[i]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(Z.Z.Content,{children:[(0,l.jsx)(E.Z,{disabled:!0,id:"name",name:"name",type:"text",className:"w-full",layout:"vertical",label:"Name of bucket",labelOptional:"Buckets cannot be renamed once created."}),(0,l.jsxs)("div",{className:"space-y-2 mt-6",children:[(0,l.jsx)(O.Z,{id:"public",name:"public",layout:"flex",label:"Public bucket",descriptionText:"Anyone can read any object without any authorization"}),(null==r?void 0:r.public)!==t.public&&(0,l.jsx)(T.b,{title:(null==r?void 0:r.public)||!t.public?(null==r?void 0:r.public)&&!t.public?"Warning: Making bucket private":"":"Warning: Making bucket public",variant:"warning",withIcon:!0,children:(0,l.jsx)("p",{className:"mb-2",children:(null==r?void 0:r.public)||!t.public?(null==r?void 0:r.public)&&!t.public?'All objects in "'.concat(null==r?void 0:r.name,'" will be made private and will only be accessible via signed URLs or downloaded with the right authorisation headers'):"":'This will make all objects in the bucket "'.concat(null==r?void 0:r.name,'" public')})})]})]}),(0,l.jsxs)(P.ZP,{open:w,onOpenChange:()=>k(!w),children:[(0,l.jsx)(P.ZP.Trigger,{asChild:!0,children:(0,l.jsxs)("div",{className:"w-full cursor-pointer py-3 px-5 flex items-center justify-between border-t border-default",children:[(0,l.jsx)("p",{className:"text-sm",children:"Additional configuration"}),(0,l.jsx)(R.Z,{size:18,strokeWidth:2,className:(0,A.cn)("text-foreground-light",w&&"rotate-180")})]})}),(0,l.jsx)(P.ZP.Content,{className:"py-4",children:(0,l.jsxs)("div",{className:"w-full space-y-4 px-5",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(O.Z,{id:"has_file_size_limit",name:"has_file_size_limit",layout:"flex",label:"Restrict file upload size for bucket",descriptionText:"Prevent uploading of file sizes greater than a specified limit"}),t.has_file_size_limit&&(0,l.jsxs)("div",{className:"grid grid-cols-12 col-span-12 gap-x-2 gap-y-1",children:[(0,l.jsx)("div",{className:"col-span-8",children:(0,l.jsx)(E.Z,{type:"number",step:1,id:"formatted_size_limit",name:"formatted_size_limit",disabled:!1,onKeyPress:e=>{(e.charCode<48||e.charCode>57)&&e.preventDefault()},descriptionText:"Equivalent to ".concat((0,y.Fm)(t.formatted_size_limit,v).toLocaleString()," bytes.")})}),(0,l.jsx)("div",{className:"col-span-4",children:(0,l.jsx)(F.Z,{id:"size_limit_units",disabled:!1,value:v,onChange:_,children:Object.values(j.b).map(e=>(0,l.jsx)(F.Z.Option,{label:e,value:e,children:(0,l.jsx)("div",{children:e})},e))})}),d.Qy&&(0,l.jsx)("div",{className:"col-span-12",children:(0,l.jsxs)("p",{className:"text-foreground-light text-sm",children:["Note: The"," ",(0,l.jsx)(x(),{href:"/project/".concat(c,"/settings/storage"),className:"text-brand opacity-80 hover:opacity-100 transition",children:"global upload limit"})," ","takes precedence over this value (",b,")"]})})]})]}),(0,l.jsx)(E.Z,{id:"allowed_mime_types",name:"allowed_mime_types",layout:"vertical",label:"Allowed MIME types",placeholder:"e.g image/jpeg, image/png, audio/mpeg, video/mp4, etc",labelOptional:"Comma separated values",descriptionText:"Wildcards are allowed, e.g. image/*. Leave blank to allow any MIME type."})]})})]}),(0,l.jsx)(Z.Z.Separator,{}),(0,l.jsxs)(Z.Z.Content,{className:"flex items-center space-x-2 justify-end",children:[(0,l.jsx)(I.z,{type:"default",disabled:m,onClick:()=>o(),children:"Cancel"}),(0,l.jsx)(I.z,{type:"primary",htmlType:"submit",loading:m,disabled:m,children:"Save"})]})]})}})})},q=i(52663),D=i(74138),V=i(31696);async function K(e){let{projectRef:t,id:i}=e;if(!t)throw Error("projectRef is required");if(!i)throw Error("Bucket name is requried");let{data:l,error:a}=await (0,V.v_)("/platform/storage/{ref}/buckets/{id}/empty",{params:{path:{id:i,ref:t}}});return a&&(0,V.S3)(a),l}let U=function(){let{onSuccess:e,onError:t,...i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,_.NL)();return(0,w.D)(e=>K(e),{async onSuccess(t,i,a){let{projectRef:n}=i;await l.invalidateQueries(N.m.buckets(n)),await (null==e?void 0:e(t,i,a))},async onError(e,i,l){void 0===t?s.Am.error("Failed to empty bucket: ".concat(e.message)):t(e,i,l)},...i})},Q=e=>{let{visible:t=!1,bucket:i,onClose:n}=e,{ref:r}=(0,a.UO)(),{fetchFolderContents:o}=(0,u.H)(),{mutate:c,isLoading:d}=U({onSuccess:async()=>{void 0!==i&&(await o(i.id,i.name,-1),s.ZP.success("Successfully deleted bucket ".concat(i.name)),n())}}),m=async()=>r?i?void c({projectRef:r,id:i.id}):console.error("No bucket is selected"):console.error("Project ref is required");return(0,l.jsx)(D.Z,{variant:"destructive",size:"small",title:"Confirm to delete all contents from ".concat(null==i?void 0:i.name),confirmLabel:"Empty bucket",visible:t,onCancel:()=>n(),onConfirm:m,alert:{title:"This action cannot be undone",description:"The contents of your bucket cannot be recovered once deleted"},children:(0,l.jsxs)("p",{className:"text-sm",children:['Are you sure you want to empty the bucket "',null==i?void 0:i.name,'"?']})})};var X=i(44778),Y=i(41679),G=i(88787),$=i(87175),H=i(3085),J=i(95492),ee=i(6277),et=i(34291),ei=i.n(et),el=i(81076),ea=i(34503),en=i(62795),es=i(13980),er=i.n(es);function eo(){return(eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e}).apply(this,arguments)}var ec=(0,n.forwardRef)(function(e,t){var i=e.color,l=e.size,a=void 0===l?24:l,s=function(e,t){if(null==e)return{};var i,l,a=function(e,t){if(null==e)return{};var i,l,a={},n=Object.keys(e);for(l=0;l<n.length;l++)i=n[l],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(l=0;l<n.length;l++)i=n[l],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}(e,["color","size"]);return n.createElement("svg",eo({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===i?"currentColor":i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),n.createElement("circle",{cx:"12",cy:"12",r:"10"}),n.createElement("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),n.createElement("line",{x1:"9",y1:"9",x2:"15",y2:"15"}))});ec.propTypes={color:er().string,size:er().oneOfType([er().string,er().number])},ec.displayName="XCircle";var ed=i(59073),eu=function(e){return(0,l.jsx)(ed.Z,{icon:ec,...e})},em=i(62134),ep=e=>{let{bucket:t,projectRef:i="",isSelected:a=!1,onSelectEmptyBucket:n=ei(),onSelectDeleteBucket:s=ei(),onSelectEditBucket:r=ei()}=e,o=(0,$.Xo)(p.KA.STORAGE_ADMIN_WRITE,"*");return(0,l.jsxs)("div",{className:(0,ee.default)("group flex items-center justify-between rounded-md",a&&"text-foreground bg-surface-100"),children:[(0,l.jsx)(x(),{href:"/project/".concat(i,"/storage/buckets/").concat(encodeURIComponent(t.id)),className:(0,A.cn)("py-1 px-3",a?"w-[88%]":"w-full"),children:(0,l.jsxs)("div",{className:"flex items-center justify-between space-x-2 truncate w-full",children:[(0,l.jsx)("p",{className:"text-sm group-hover:text-foreground transition truncate ".concat(a?"text-foreground":"text-foreground-light"),title:t.name,children:t.name}),t.public&&(0,l.jsx)(el.C,{variant:"warning",children:"Public"})]})}),o&&a?(0,l.jsxs)(ea.h_,{children:[(0,l.jsx)(ea.$F,{asChild:!0,children:(0,l.jsx)(I.z,{type:"text",icon:(0,l.jsx)(R.Z,{size:"tiny",strokeWidth:2,className:"text-foreground-light"}),className:"mr-1 p-0.5"})}),(0,l.jsxs)(ea.AW,{side:"bottom",align:"start",children:[(0,l.jsxs)(ea.Xi,{className:"space-x-2",onClick:()=>r(),children:[(0,l.jsx)(en.Z,{size:"tiny"}),(0,l.jsx)("p",{children:"Edit bucket"})]},"toggle-private"),(0,l.jsx)(ea.VD,{}),(0,l.jsxs)(ea.Xi,{className:"space-x-2",onClick:()=>n(),children:[(0,l.jsx)(eu,{size:"tiny"}),(0,l.jsx)("p",{children:"Empty bucket"})]},"delete-bucket"),(0,l.jsxs)(ea.Xi,{className:"space-x-2",onClick:()=>s(),children:[(0,l.jsx)(em.Z,{size:"tiny"}),(0,l.jsx)("p",{children:"Delete bucket"})]},"delete-bucket")]})]}):(0,l.jsx)("div",{className:"w-5"})]},t.id)},eh=()=>{let e=(0,v.useRouter)(),{ref:t,bucketId:i}=(0,a.UO)(),s=(0,o.V)(),r=(null==s?void 0:s.parent_project_ref)!==void 0,[c,d]=(0,n.useState)(!1),[u,m]=(0,n.useState)(),[b,j]=(0,n.useState)(),[y,g]=(0,n.useState)(),_=(0,$.Xo)(p.KA.STORAGE_ADMIN_WRITE,"*"),w=e.pathname.split("/")[4],{data:k,error:N,isLoading:C,isError:z,isSuccess:Z}=(0,G.K)({projectRef:t}),S=null!=k?k:[],E=(null==N?void 0:N.message.includes("Tenant config"))&&r;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(H.ZP,{type:"pills",className:"my-6 flex flex-grow flex-col",children:[(0,l.jsx)("div",{className:"mb-6 mx-5",children:(0,l.jsx)(X.u,{block:!0,type:"default",icon:(0,l.jsx)(h.Z,{size:14}),disabled:!_,style:{justifyContent:"start"},onClick:()=>d(!0),tooltip:{content:{side:"bottom",text:"You need additional permissions to create buckets"}},children:"New bucket"})}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"mx-3",children:[(0,l.jsx)(H.ZP.Group,{title:(0,l.jsx)("span",{className:"uppercase font-mono",children:"All buckets"})}),C&&(0,l.jsxs)("div",{className:"space-y-2 mx-2",children:[(0,l.jsx)(Y.Z,{className:"!py-2.5"}),(0,l.jsx)(Y.Z,{className:"!py-2.5"}),(0,l.jsx)(Y.Z,{className:"!py-2.5"})]}),z&&(0,l.jsx)("div",{className:"px-2",children:(0,l.jsxs)(J.bZ,{variant:E?"default":"warning",children:[(0,l.jsx)(J.Cd,{className:"text-xs tracking-normal",children:E?"Storage is not available on preview branches for now":"Failed to fetch buckets"}),(0,l.jsx)(J.X,{className:"text-xs",children:E?"We're actively looking into making this available on preview branches":"Please refresh to try again"})]})}),Z&&(0,l.jsxs)(l.Fragment,{children:[0===S.length&&(0,l.jsx)("div",{className:"px-2",children:(0,l.jsxs)(J.bZ,{children:[(0,l.jsx)(J.Cd,{children:"No buckets available"}),(0,l.jsx)(J.X,{children:"Buckets that you create will appear here"})]})}),S.map((e,a)=>{let n=i===e.id;return(0,l.jsx)(ep,{bucket:e,projectRef:t,isSelected:n,onSelectEmptyBucket:()=>j(e),onSelectDeleteBucket:()=>g(e),onSelectEditBucket:()=>m(e)},"".concat(a,"_").concat(e.id))})]})]}),(0,l.jsx)("div",{className:"h-px w-full bg-border"}),(0,l.jsxs)("div",{className:"mx-3",children:[(0,l.jsx)(H.ZP.Group,{title:(0,l.jsx)("span",{className:"uppercase font-mono",children:"Configuration"})}),(0,l.jsx)(x(),{href:"/project/".concat(t,"/storage/policies"),legacyBehavior:!0,children:(0,l.jsx)(H.ZP.Item,{rounded:!0,active:"policies"===w,children:(0,l.jsx)("p",{className:"truncate",children:"Policies"})})}),(0,l.jsx)(x(),{href:"/project/".concat(t,"/settings/storage"),children:(0,l.jsx)(H.ZP.Item,{rounded:!0,children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"truncate",children:"Settings"}),(0,l.jsx)(f.Z,{strokeWidth:1,className:"h-4 w-4"})]})})})]})]})]}),(0,l.jsx)(M,{visible:c,onClose:()=>d(!1)}),(0,l.jsx)(W,{visible:void 0!==u,bucket:u,onClose:()=>m(void 0)}),(0,l.jsx)(Q,{visible:void 0!==b,bucket:b,onClose:()=>j(void 0)}),(0,l.jsx)(q.Iw,{visible:void 0!==y,bucket:y,onClose:()=>g(void 0)})]})},ef=(0,c.Q)(e=>{let{title:t,children:i}=e,{ref:c}=(0,a.UO)(),p=(0,o.V)(),h=(0,u.H)(),{data:f,isLoading:b}=(0,r.q)({projectRef:c}),x=null==f?void 0:f.autoApiService,v=(null==p?void 0:p.status)===d.S.INACTIVE;(0,n.useEffect)(()=>{!b&&x&&j(x)},[b,c]);let j=async e=>{v||(e.endpoint?h.initStore(c,e.endpoint,e.serviceApiKey,e.protocol):s.ZP.error("Failed to fetch project configuration. Try refreshing your browser, or reach out to us at support@supabase.io"))};return(0,l.jsx)(m.Z,{title:t||"Storage",product:"Storage",productMenu:(0,l.jsx)(eh,{}),children:i})})},29354:function(e,t,i){i.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,i(52186).Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},65644:function(e,t,i){i.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.338.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,i(52186).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},11992:function(e,t,i){var l=i(52322),a=i(69557);i(2784);var n=i(46318);let s=e=>{let{open:t,children:i,className:n,...s}=e;return(0,l.jsx)(a.fC,{asChild:s.asChild,defaultOpen:s.defaultOpen,open:t,onOpenChange:s.onOpenChange,disabled:s.disabled,className:n,children:i})};s.Trigger=function(e){let{children:t,asChild:i}=e;return(0,l.jsx)(a.xz,{asChild:i,children:t})},s.Content=function(e){let{asChild:t,children:i,className:s}=e,r=(0,n.Z)("collapsible");return(0,l.jsx)(a.VY,{asChild:t,className:[r.content,s].join(" "),children:i})},t.ZP=s},69557:function(e,t,i){i.d(t,{Fw:function(){return g},VY:function(){return C},fC:function(){return k},p_:function(){return f},wy:function(){return j},xz:function(){return N}});var l=i(7896),a=i(2784),n=i(17998),s=i(92211),r=i(87695),o=i(61644),c=i(62656),d=i(72714),u=i(79616),m=i(23372);let p="Collapsible",[h,f]=(0,s.b)(p),[b,x]=h(p),v=(0,a.forwardRef)((e,t)=>{let{__scopeCollapsible:i,open:n,defaultOpen:s,disabled:o,onOpenChange:c,...u}=e,[p=!1,h]=(0,r.T)({prop:n,defaultProp:s,onChange:c});return(0,a.createElement)(b,{scope:i,disabled:o,contentId:(0,m.M)(),open:p,onOpenToggle:(0,a.useCallback)(()=>h(e=>!e),[h])},(0,a.createElement)(d.WV.div,(0,l.Z)({"data-state":w(p),"data-disabled":o?"":void 0},u,{ref:t})))}),j=(0,a.forwardRef)((e,t)=>{let{__scopeCollapsible:i,...s}=e,r=x("CollapsibleTrigger",i);return(0,a.createElement)(d.WV.button,(0,l.Z)({type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":w(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled},s,{ref:t,onClick:(0,n.M)(e.onClick,r.onOpenToggle)}))}),y="CollapsibleContent",g=(0,a.forwardRef)((e,t)=>{let{forceMount:i,...n}=e,s=x(y,e.__scopeCollapsible);return(0,a.createElement)(u.z,{present:i||s.open},({present:e})=>(0,a.createElement)(_,(0,l.Z)({},n,{ref:t,present:e})))}),_=(0,a.forwardRef)((e,t)=>{let{__scopeCollapsible:i,present:n,children:s,...r}=e,u=x(y,i),[m,p]=(0,a.useState)(n),h=(0,a.useRef)(null),f=(0,c.e)(t,h),b=(0,a.useRef)(0),v=b.current,j=(0,a.useRef)(0),g=j.current,_=u.open||m,k=(0,a.useRef)(_),N=(0,a.useRef)();return(0,a.useEffect)(()=>{let e=requestAnimationFrame(()=>k.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,o.b)(()=>{let e=h.current;if(e){N.current=N.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();b.current=t.height,j.current=t.width,k.current||(e.style.transitionDuration=N.current.transitionDuration,e.style.animationName=N.current.animationName),p(n)}},[u.open,n]),(0,a.createElement)(d.WV.div,(0,l.Z)({"data-state":w(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!_},r,{ref:f,style:{"--radix-collapsible-content-height":v?`${v}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style}}),_&&s)});function w(e){return e?"open":"closed"}let k=v,N=j,C=g}}]);